import{A as ne,B as oe,W as Fe,Z as me,_ as Oe,aa as De,ba as re,da as T,ea as L,fa as S,ga as P,ha as Re,i as ye,j as Pe,ja as N,ka as ae,la as U,m as Q,ma as H,n as O,o as X,p as Y,q as Ie,r as Z,s as ee,t as Ve,u as te,v as ke,z as ie}from"./chunk-CVW3PDBT.js";import{Cb as Te,Db as s,Eb as C,Fb as v,Gb as A,Hb as V,I as fe,Ib as k,Jb as F,Lb as M,Nb as ce,Oa as K,Ob as de,Pb as Ee,Q as he,Sa as c,Ta as b,V as R,_ as I,e as G,ea as w,ha as ge,hb as _,jb as d,kb as ve,kc as we,lc as j,mc as y,nb as a,nc as Me,oa as p,ob as o,pa as u,pb as x,qb as Ce,rb as be,sb as f,ub as h,vb as m,wa as xe,wb as Se,x as J,xb as se}from"./chunk-JRU3JP26.js";var $=(()=>{let l=class l{constructor(e){this.auth=e}loginUser(e,n){return De(this.auth,e,n)}logout(){return this.auth.signOut()}registerUser(e,n){return Oe(this.auth,e,n)}getUserLogged(){return this.auth.currentUser}getUserEmail(){let e=this.auth.currentUser;return e?e.email:null}getAuthState(){return me(this.auth)}getUserID(){return me(this.auth).pipe(fe(1),J(e=>{if(e)return e.uid;throw Error("No hay usuario.")}))}};l.\u0275fac=function(n){return new(n||l)(I(Fe))},l.\u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();var q=(()=>{let l=class l{constructor(e){this.fire=e}getUsuarios(){let e=S(this.fire,"usuarios");return T(e,{idField:"id"})}addObraSocial(e){let n=S(this.fire,"obraSocial");return L(n,e)}getObraSocial(){let e=S(this.fire,"obraSocial");return T(e,{idField:"id"})}addPaciente(e,n){let r=S(this.fire,"usuarios"),g=P(r,n);return ae(g,e)}getPaciente(){let e=S(this.fire,"usuarios"),n=N(e,H("rol","==","Paciente"));return T(n,{idField:"id"})}updatePaciente(e,n){let r=P(this.fire,"usuarios",e);return U(r,{historiaClinica:n})}addProfesional(e,n){let r=S(this.fire,"usuarios"),g=P(r,n);return ae(g,e)}updateProfesional(e,n){let r=P(this.fire,"usuarios",e);return U(r,{estado:n})}updateProfesionalAgenda(e,n){let r=P(this.fire,"usuarios",e);return U(r,{agenda:n})}getProfesionales(){let e=S(this.fire,"usuarios"),n=N(e,H("rol","==","Profesional"),H("estado","==","Pendiente"));return T(n,{idField:"id"})}getProFesionalPorEspecialidad(e){let n=S(this.fire,"usuarios"),r=N(n,H("rol","==","Profesional"),H("especialidades","array-contains",e));return T(r,{idField:"id"})}addProfesionalEspecialidad(e,n){let r=S(this.fire,`profesional/${e}/especialidades`);return L(r,n)}getHorariosDisponibles(e){let n=S(this.fire,`usuarios/${e}/horariosDisponibles`);return T(n,{idField:"id"})}addEspecialidadProfecional(e,n){let r=S(this.fire,`usuarios/${n}/especialidades`);return L(r,{especialidadRef:e})}addEspecialidad(e){let n=S(this.fire,"especialidades");return L(n,e)}getEspecialidad(){let e=S(this.fire,"especialidades");return T(e,{idField:"id"})}getEspecialidadProfesional(e){let n=S(this.fire,`usuarios/${e}/especialidades`);return T(n,{idField:"id"})}addAdministrador(e,n){return G(this,null,function*(){let r=S(this.fire,"usuarios"),g=P(r,n);return yield ae(g,e)})}getUserByID(e){return G(this,null,function*(){let n=S(this.fire,"usuarios"),r=P(n,e);return yield Re(r)})}};l.\u0275fac=function(n){return new(n||l)(I(re))},l.\u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();var Ne=[[["router-outlet"]],[["","id","footer"]]],Ue=["router-outlet","#footer"];function $e(i,l){if(i&1&&(a(0,"li")(1,"a",20),s(2),o()()),i&2){let t=l.$implicit;c(),d("routerLink",t.link),c(),C(t.title)}}function qe(i,l){if(i&1&&(Ce(0),a(1,"li",16)(2,"a",17),s(3),o(),a(4,"ul",18),_(5,$e,3,2,"li",19),o()(),be()),i&2){let t=m().$implicit;c(3),v(" ",t.title," "),c(2),d("ngForOf",t.children)}}function Be(i,l){if(i&1&&(a(0,"li",11)(1,"a",21),s(2),o()()),i&2){let t=m().$implicit;c(),d("routerLink",t.link),c(),C(t.title)}}function We(i,l){if(i&1&&(a(0,"li",11),_(1,qe,6,2,"ng-container",15)(2,Be,3,2,"ng-template",null,0,Ee),o()),i&2){let t=l.$implicit,e=Te(3);c(),d("ngIf",t.children)("ngIfElse",e)}}var hi=(()=>{let l=class l{constructor(e,n){this.afAuth=e,this.router=n,this.items=[],this.email="",this.afAuth.getAuthState().subscribe(r=>{r&&r.email&&(this.email=r.email)})}ngOnInit(){}logout(){this.afAuth.logout().then(()=>{this.router.navigate(["/auth"])})}};l.\u0275fac=function(n){return new(n||l)(b($),b(ye))},l.\u0275cmp=w({type:l,selectors:[["app-layout"]],inputs:{items:"items"},standalone:!0,features:[M],ngContentSelectors:Ue,decls:23,vars:2,consts:[["normalLink",""],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-dark","p-2"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/icono-clinica.png","alt","Bootstrap","width","30","height","30"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarTogglerDemo02","aria-controls","navbarTogglerDemo02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarTogglerDemo02",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["class","nav-item",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item"],["aria-disabled","true",1,"nav-link","disabled",2,"color","white"],["src","../../../assets/usuario2.jpg","alt","Icono","width","30","height","30",2,"margin-right","5px"],["type","button",1,"btn","btn-outline-light",3,"click"],[4,"ngIf","ngIfElse"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"routerLink"],["routerLinkActive","active","aria-current","page",1,"nav-link","active",3,"routerLink"]],template:function(n,r){n&1&&(Se(Ne),a(0,"div")(1,"nav",1)(2,"div",2)(3,"a",3),x(4,"img",4),s(5," Clinica Online "),o(),a(6,"button",5),x(7,"span",6),o(),a(8,"div",7)(9,"ul",8),_(10,We,4,2,"li",9),o(),a(11,"ul",10)(12,"li",11)(13,"div",12),x(14,"img",13),s(15),o()(),a(16,"li",11)(17,"button",14),h("click",function(){return r.logout()}),s(18," Cerrar sesi\xF3n "),o()()()()()(),a(19,"section"),se(20),o(),a(21,"footer"),se(22,1),o()()),n&2&&(c(10),d("ngForOf",r.items),c(5),v("",r.email," "))},dependencies:[y,j,Pe]});let i=l;return i})();var B=(()=>{let l=class l{constructor(e,n){this.authService=e,this.usuarioService=n}getDocumentSnapshotDeUsuario(){return this.authService.getUserID().pipe(he(e=>this.usuarioService.getUserByID(e)))}getDataDeUsuario(){return this.getDocumentSnapshotDeUsuario().pipe(J(e=>e.data()))}getRolActual(){return this.getDataDeUsuario().pipe(J(e=>e.rol))}};l.\u0275fac=function(n){return new(n||l)(I($),I(q))},l.\u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();var z=(()=>{let l=class l{constructor(e){this.fire=e,this.turnos=S(this.fire,"turnos")}add(e){return L(this.turnos,e)}actualizar(e,n){let r=P(this.fire,"turnos",e);return U(r,n)}getTurnos(){return T(this.turnos,{idField:"id"})}getTurnoPorid(e,n){let r=N(this.turnos,H(e,"==",n));return T(r,{idField:"id"})}};l.\u0275fac=function(n){return new(n||l)(I(re))},l.\u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();function Ge(i,l){if(i&1&&(a(0,"div",30),x(1,"img",8),o()),i&2){let t=m(2);c(),d("src",t.usuario.imagen2,K)("alt",t.usuario.name)}}function Je(i,l){if(i&1&&(a(0,"p",18)(1,"strong"),s(2,"Obra Social:"),o(),s(3),o()),i&2){let t=m(2);c(3),v(" ",t.usuario.obraSocial," ")}}function Ke(i,l){if(i&1&&(a(0,"li",18),s(1),o()),i&2){let t=l.$implicit;c(),v(" ",t," ")}}function Qe(i,l){if(i&1&&(a(0,"div")(1,"span",18)(2,"strong"),s(3,"Especialidades:"),o()(),a(4,"ul"),_(5,Ke,2,1,"li",31),o()()),i&2){let t=m(2);c(5),d("ngForOf",t.usuario.especialidades)}}function Xe(i,l){if(i&1){let t=f();a(0,"button",32),h("click",function(){p(t);let n=m(2);return u(n.verMisAtencionesHandler())}),s(1,"Ver mis atenciones"),o()}}function Ye(i,l){if(i&1){let t=f();a(0,"button",33),h("click",function(){p(t);let n=m(2);return u(n.verMisHorariosHandler())}),s(1,"Ver mis horarios"),o()}}function Ze(i,l){i&1&&(a(0,"th"),s(1," Paciente "),o())}function et(i,l){i&1&&(a(0,"th"),s(1," Doctor "),o())}function tt(i,l){if(i&1&&(a(0,"td"),s(1),o()),i&2){let t=m().$implicit;c(),A("",t.paciente.nombre," ",t.paciente.apellido,"")}}function it(i,l){if(i&1&&(a(0,"td"),s(1),o()),i&2){let t=m().$implicit;c(),A("",t.especialista.nombre," ",t.especialista.apellido,"")}}function nt(i,l){if(i&1&&(a(0,"td")(1,"span")(2,"strong"),s(3,"Altura: "),o(),s(4),o(),a(5,"span")(6,"strong"),s(7,"Peso: "),o(),s(8),o(),a(9,"span")(10,"strong"),s(11,"Temperatura: "),o(),s(12),o(),a(13,"tr")(14,"span")(15,"strong"),s(16,"Presion: "),o(),s(17),o(),a(18,"span")(19,"strong"),s(20,"clave1: "),o(),s(21),o(),a(22,"span")(23,"strong"),s(24,"valor1: "),o(),s(25),o()()()),i&2){let t=m().$implicit;c(4),v("",t.historial.altura," - "),c(4),v("",t.historial.peso," - "),c(4),v("",t.historial.temperatura," "),c(5),v("",t.historial.presion," - "),c(4),v("",t.historial.clave1," - "),c(4),v("",t.historial.valor1," ")}}function ot(i,l){i&1&&(a(0,"td")(1,"p"),s(2,"Sin Historial"),o()())}function rt(i,l){if(i&1&&(a(0,"tr")(1,"td"),s(2),o(),_(3,tt,2,2,"td",20)(4,it,2,2,"td",20)(5,nt,26,6,"td",20)(6,ot,3,0,"td",20),a(7,"td"),s(8),o(),a(9,"td"),s(10),o()()),i&2){let t=l.$implicit,e=m(2);c(2),C(t.especialidad),c(),d("ngIf",e.miRol==="Profesional"||e.miRol==="Administrador"),c(),d("ngIf",e.miRol==="Paciente"||e.miRol==="Administrador"),c(),d("ngIf",t.historial),c(),d("ngIf",!t.historial),c(2),C(t.fecha),c(2),C(t.hora)}}function at(i,l){if(i&1){let t=f();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),x(7,"img",8),o(),_(8,Ge,2,2,"div",9),o(),a(9,"button",10),x(10,"span",11),a(11,"span",12),s(12,"Previous"),o()(),a(13,"button",13),x(14,"span",14),a(15,"span",12),s(16,"Next"),o()()()(),a(17,"div",15)(18,"div",16)(19,"h4",17)(20,"strong"),s(21,"Nombre:"),o(),s(22),o(),a(23,"p",18)(24,"strong"),s(25,"Edad:"),o(),s(26),o(),a(27,"p",18)(28,"strong"),s(29,"DNI:"),o(),s(30),o(),_(31,Je,4,1,"p",19)(32,Qe,6,1,"div",20),a(33,"div",21),_(34,Xe,2,0,"button",22)(35,Ye,2,0,"button",23),o(),x(36,"div",24),o()()()(),a(37,"h2",25),s(38,"Historia Cl\xEDnica"),o(),a(39,"button",26),h("click",function(){p(t);let n=m();return u(n.crearPdf())}),s(40,"Descargar PDF"),o(),a(41,"table",27)(42,"thead")(43,"tr")(44,"th",28),s(45,"Especialidad"),o(),_(46,Ze,2,0,"th",20)(47,et,2,0,"th",20),a(48,"th",28),s(49,"Historial"),o(),a(50,"th",28),s(51,"Fecha"),o(),a(52,"th",28),s(53,"Hora"),o()()(),a(54,"tbody"),_(55,rt,11,7,"tr",29),o()(),x(56,"br")(57,"br"),o()}if(i&2){let t=m();c(7),d("src",t.usuario.imagen,K)("alt",t.usuario.name),c(),d("ngIf",t.usuario.imagen2),c(14),v("",t.usuario.nombre+" "+t.usuario.apellido," "),c(4),v(" ",t.usuario.edad,""),c(4),v(" ",t.usuario.dni,""),c(),d("ngIf",t.usuario.rol=="Paciente"),c(),d("ngIf",t.usuario.rol=="Profesional"),c(2),d("ngIf",t.usuario.rol=="Paciente"),c(),d("ngIf",t.usuario.rol=="Profesional"),c(11),d("ngIf",t.miRol==="Profesional"||t.miRol==="Administrador"),c(),d("ngIf",t.miRol==="Paciente"||t.miRol==="Administrador"),c(8),d("ngForOf",t.turnos)}}var bi=(()=>{let l=class l{constructor(e,n){this.otroService=e,this.turnoService=n,this.verHistoriaClinica=!1,this.verMisAtenciones=!1,this.turnos=[],this.miUID="",this.idTipo="",this.miRol=""}ngOnInit(){this.otroService.getDataDeUsuario().subscribe(e=>{this.usuario=e}),this.otroService.getDocumentSnapshotDeUsuario().subscribe(e=>{this.miRol=e.data().rol,this.miRol==="Administrador"?this.turnoService.getTurnos().subscribe(n=>this.turnos=n):(this.miUID=e.id,this.miRol==="Paciente"?this.idTipo="idPac":this.miRol==="Profesional"&&(this.idTipo="idEsp"),this.obtenerTurnos(this.idTipo,this.miUID))})}obtenerTurnos(e,n){this.turnoService.getTurnoPorid(e,n).subscribe(r=>this.turnos=r)}verMisAtencionesHandler(){}verMisHorariosHandler(){}verMiHistoriaClinicaHandler(){}crearPdf(){return G(this,null,function*(){let e=[];e.push(["Especialidad","Doctor","Historial","Fecha","Hora"]),this.turnos.forEach(r=>{let g=[r.especialidad,this.miRol==="Paciente"||this.miRol==="Administrador"?`${r.especialista.nombre} ${r.especialista.apellido}`:"",r.historial?`Altura: ${r.historial.altura} - Peso: ${r.historial.peso} - Temperatura: ${r.historial.temperatura} 
 Presion: ${r.historial.presion} - Clave: ${r.historial.clave1} - Valor: ${r.historial.valor1}`:"Sin Historial",r.fecha,r.hora];e.push(g)});let n={content:[{layout:"noBorders",table:{widths:["*","auto","*"],body:[[{image:yield this.getBase64ImageFromURL("../../../assets/icono-clinica.png"),width:60,alignment:"left"},{text:"Cl\xEDnica Online",style:"subheader",alignment:"center"},{text:`${new Date().toLocaleDateString()}`,alignment:"right"}]]}},{text:`
`},{style:"tableExample",table:{body:e}}]}})}getBase64ImageFromURL(e){return new Promise((n,r)=>{var g=new Image;g.setAttribute("crossOrigin","anonymous"),g.onload=()=>{var E=document.createElement("canvas");E.width=g.width,E.height=g.height;var W=E.getContext("2d");W.drawImage(g,0,0);var Ae=E.toDataURL("image/png");n(Ae)},g.onerror=E=>{r(E)},g.src=e})}};l.\u0275fac=function(n){return new(n||l)(b(B),b(z))},l.\u0275cmp=w({type:l,selectors:[["app-mi-perfil"]],standalone:!0,features:[M],decls:1,vars:1,consts:[["class","mt-2","style","width: 70%; margin: auto",4,"ngIf"],[1,"mt-2",2,"width","70%","margin","auto"],[1,"card","mb-3"],[1,"row","g-0"],[1,"col-md-4"],["id","carouselExampleFade",1,"carousel","slide","carousel-fade"],[1,"carousel-inner"],[1,"carousel-item","active"],[1,"d-block","w-100",2,"height","300px","object-fit","cover",3,"src","alt"],["class","carousel-item",4,"ngIf"],["type","button","data-bs-target","#carouselExampleFade","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleFade","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["class","card-text",4,"ngIf"],[4,"ngIf"],[1,"d-grid","gap-2"],["class","btn btn-info",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"d-flex"],[1,"text-center",2,"color","white"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"carousel-item"],["class","card-text",4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(n,r){n&1&&_(0,at,58,13,"div",0),n&2&&d("ngIf",r.usuario)},dependencies:[y,j]});let i=l;return i})();function lt(i,l){i&1&&(a(0,"h4",11),s(1," \xBFEsta seguro que deseas cancelar?"),o())}function st(i,l){i&1&&(a(0,"h4",11),s(1,"Ver rese\xF1a"),o())}function ct(i,l){i&1&&(a(0,"h4",11),s(1,"Calificar Atenci\xF3n"),o())}function dt(i,l){i&1&&(a(0,"h4",11),s(1,"Encuesta"),o())}function mt(i,l){i&1&&(a(0,"h4",11),s(1,"Rechazar Turno"),o())}function pt(i,l){i&1&&(a(0,"h4",11),s(1,"Finalizar Turno"),o())}function ut(i,l){i&1&&(a(0,"h4",11),s(1,"Historia Cl\xEDnica"),o())}function _t(i,l){if(i&1){let t=f();a(0,"div")(1,"p"),s(2,"Es necesario que proporcione un comentario explicando por qu\xE9 se cancela el turno."),o(),a(3,"div",12)(4,"label",13),s(5,"Mensaje:"),o(),a(6,"textarea",14),F("ngModelChange",function(n){p(t);let r=m();return k(r.mensaje,n)||(r.mensaje=n),u(n)}),o()()()}if(i&2){let t=m();c(6),V("ngModel",t.mensaje)}}function ft(i,l){if(i&1&&(a(0,"div")(1,"p"),s(2),o()()),i&2){let t=m();c(2),C(t.data==null?null:t.data.reviewEsp)}}function ht(i,l){if(i&1){let t=f();a(0,"div")(1,"p"),s(2,"Dejar un comentario de como fue la atenci\xF3n del Especialista."),o(),a(3,"div",12)(4,"label",13),s(5,"Message:"),o(),a(6,"textarea",14),F("ngModelChange",function(n){p(t);let r=m();return k(r.mensaje,n)||(r.mensaje=n),u(n)}),o()()()}if(i&2){let t=m();c(6),V("ngModel",t.mensaje)}}function gt(i,l){if(i&1){let t=f();a(0,"div")(1,"p"),s(2,"\xBFPor qu\xE9 raz\xF3n nos recomendar\xEDas?"),o(),a(3,"div",12)(4,"label",13),s(5,"Message:"),o(),a(6,"textarea",14),F("ngModelChange",function(n){p(t);let r=m();return k(r.mensaje,n)||(r.mensaje=n),u(n)}),o()()()}if(i&2){let t=m();c(6),V("ngModel",t.mensaje)}}function xt(i,l){if(i&1){let t=f();a(0,"div")(1,"p"),s(2,"Para rechazar el turno debe dejar un comentario del porque se rechaza el mismo."),o(),a(3,"div",12)(4,"label",13),s(5,"Message:"),o(),a(6,"textarea",14),F("ngModelChange",function(n){p(t);let r=m();return k(r.mensaje,n)||(r.mensaje=n),u(n)}),o()()()}if(i&2){let t=m();c(6),V("ngModel",t.mensaje)}}function vt(i,l){if(i&1){let t=f();a(0,"div")(1,"p"),s(2,"Para finalizar el turno debe dejar un comentario de la consulta y diagn\xF3stico realizado."),o(),a(3,"div",12)(4,"label",13),s(5,"Message:"),o(),a(6,"textarea",14),F("ngModelChange",function(n){p(t);let r=m();return k(r.mensaje,n)||(r.mensaje=n),u(n)}),o()()()}if(i&2){let t=m();c(6),V("ngModel",t.mensaje)}}function Ct(i,l){i&1&&(a(0,"span",33),s(1," La "),a(2,"strong"),s(3,"Altura"),o(),s(4," es requerida"),o())}function bt(i,l){i&1&&(a(0,"span",33),s(1," EL "),a(2,"strong"),s(3,"peso"),o(),s(4," es requerido"),o())}function St(i,l){i&1&&(a(0,"span",33),s(1," La "),a(2,"strong"),s(3,"Temperatura"),o(),s(4," es requerida"),o())}function Tt(i,l){i&1&&(a(0,"span",33),s(1," La "),a(2,"strong"),s(3,"presi\xF3n"),o(),s(4," es requerida "),o())}function Et(i,l){if(i&1){let t=f();a(0,"div")(1,"form",15),h("ngSubmit",function(){p(t);let n=m();return u(n.addHistorialClinica())}),a(2,"div",16)(3,"div",17)(4,"label",18),s(5,"Altura"),o(),x(6,"input",19),_(7,Ct,5,0,"span",20),o(),a(8,"div",17)(9,"label",21),s(10,"Peso"),o(),x(11,"input",22),_(12,bt,5,0,"span",20),o(),a(13,"div",17)(14,"label",23),s(15,"Temperatura"),o(),x(16,"input",24),_(17,St,5,0,"span",20),o(),a(18,"div",17)(19,"label",25),s(20,"Presion"),o(),x(21,"input",26),_(22,Tt,5,0,"span",20),o()(),x(23,"hr"),a(24,"h4"),s(25,"Dato Din\xE1mico"),o(),a(26,"div",16)(27,"div",17)(28,"label",27),s(29,"Clave"),o(),x(30,"input",28),o(),a(31,"div",17)(32,"label",29),s(33,"Valor"),o(),x(34,"input",30),o()(),x(35,"hr",31),a(36,"button",32),s(37," Agregar "),o()()()}if(i&2){let t,e,n,r,g=m();c(),d("formGroup",g.historial),c(6),d("ngIf",((t=g.historial.get("altura"))==null?null:t.hasError("required"))&&((t=g.historial.get("altura"))==null?null:t.touched)),c(5),d("ngIf",((e=g.historial.get("peso"))==null?null:e.hasError("required"))&&((e=g.historial.get("peso"))==null?null:e.touched)),c(5),d("ngIf",((n=g.historial.get("temperatura"))==null?null:n.hasError("required"))&&((n=g.historial.get("temperatura"))==null?null:n.touched)),c(5),d("ngIf",((r=g.historial.get("presion"))==null?null:r.hasError("required"))&&((r=g.historial.get("presion"))==null?null:r.touched)),c(14),d("disabled",!g.historial.valid)}}function wt(i,l){if(i&1){let t=f();a(0,"button",34),h("click",function(){p(t);let n=m();return u(n.onCloseModal())}),s(1," Cancelar "),o()}}function Mt(i,l){if(i&1){let t=f();a(0,"button",35),h("click",function(){p(t);let n=m();return u(n.cancelarTurno())}),s(1," Comfirmar "),o()}if(i&2){let t=m();d("disabled",!t.isMensajePresente())}}var He=(()=>{let l=class l{constructor(e,n){this.turnoServices=e,this.fb=n,this.mensaje="",this.closeModal=new xe,this.historial=this.fb.group({altura:["",[O.required,this.validarNumber]],peso:["",[O.required,this.validarNumber]],temperatura:["",[O.required,this.validarNumber]],presion:["",[O.required,this.validarNumber]],clave1:[""],valor1:[""]})}ngOnInit(){this.estado==="historial"&&this.data&&this.data.historial&&(console.log("entro"),this.historial.patchValue(this.data.historial))}get datosDinamicosArray(){return this.historial.get("datosDinamicos")}agregarDatoDinamico(){this.datosDinamicosArray.push(this.fb.group({clave:["",O.required],valor:["",O.required]}))}eliminarDatoDinamico(e){this.datosDinamicosArray.removeAt(e)}validarNumber(e){let n=e.value;return/^\d+$/.test(n)?null:{soloNumeros:!0}}onCloseModal(){this.closeModal.emit()}cancelarTurno(){this.data&&this.data.id&&(this.estado==="cancelar"||this.estado==="rechazado"?(this.data.razon=this.mensaje,this.data.estado="cancelado"):this.estado==="calificar"||this.estado==="encuesta"?this.data.reviewPac=this.mensaje:this.estado==="finalizado"&&(this.data.reviewEsp=this.mensaje,this.data.estado="finalizado"),this.turnoServices.actualizar(this.data.id,this.data).then(()=>{this.closeModal.emit()}).catch(e=>{console.log(e)}))}isMensajePresente(){return this.mensaje.trim().length>0}addHistorialClinica(){this.data&&this.data.id&&(this.data.historial=this.historial.value,this.turnoServices.actualizar(this.data.id,this.data).then(()=>{this.closeModal.emit()}).catch(e=>{console.log(e)}))}};l.\u0275fac=function(n){return new(n||l)(b(z),b(ie))},l.\u0275cmp=w({type:l,selectors:[["app-m-turno"]],inputs:{data:"data",estado:"estado"},outputs:{closeModal:"closeModal"},standalone:!0,features:[M],decls:24,vars:16,consts:[["tabindex","-1",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-secondary","data-bs-dismiss","modal",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"modal-title"],[1,"mb-3"],["for","message-text",1,"col-form-label"],["id","message-text","name","mensajeCancelacion",1,"form-control",3,"ngModelChange","ngModel"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-6"],["for","altura",1,"form-label"],["type","number","id","altura","formControlName","altura",1,"form-control"],["class","text-danger",4,"ngIf"],["for","peso",1,"form-label"],["type","number","id","peso","formControlName","peso",1,"form-control"],["for","temperatura",1,"form-label"],["id","temperatura","type","number","formControlName","temperatura",1,"form-control"],["for","presion",1,"form-label"],["type","number","formControlName","presion",1,"form-control"],["for","clave1",1,"form-label"],["id","clave1","type","text","formControlName","clave1",1,"form-control"],["for","valor1",1,"form-label"],["type","valor1","formControlName","valor1",1,"form-control"],[1,"my-4"],["type","submit",1,"w-100","btn","btn-lg",2,"background-color","#0d689d","color","white",3,"disabled"],[1,"text-danger"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"]],template:function(n,r){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,lt,2,0,"h4",4)(5,st,2,0,"h4",4)(6,ct,2,0,"h4",4)(7,dt,2,0,"h4",4)(8,mt,2,0,"h4",4)(9,pt,2,0,"h4",4)(10,ut,2,0,"h4",4),a(11,"button",5),h("click",function(){return r.onCloseModal()}),o()(),a(12,"div",6)(13,"form"),_(14,_t,7,1,"div",7)(15,ft,3,1,"div",7)(16,ht,7,1,"div",7)(17,gt,7,1,"div",7)(18,xt,7,1,"div",7)(19,vt,7,1,"div",7)(20,Et,38,6,"div",7),o()(),a(21,"div",8),_(22,wt,2,0,"button",9)(23,Mt,2,1,"button",10),o()()()()),n&2&&(c(4),d("ngIf",r.estado==="cancelar"),c(),d("ngIf",r.estado==="resena"),c(),d("ngIf",r.estado==="calificar"),c(),d("ngIf",r.estado==="encuesta"),c(),d("ngIf",r.estado==="rechazado"),c(),d("ngIf",r.estado==="finalizado"),c(),d("ngIf",r.estado==="historial"),c(4),d("ngIf",r.estado==="cancelar"),c(),d("ngIf",r.estado==="resena"),c(),d("ngIf",r.estado==="calificar"),c(),d("ngIf",r.estado==="encuesta"),c(),d("ngIf",r.estado==="rechazado"),c(),d("ngIf",r.estado==="finalizado"),c(),d("ngIf",r.estado==="historial"),c(2),d("ngIf",r.estado!="historial"),c(),d("ngIf",r.estado=="cancelar"||r.estado=="calificar"||r.estado=="encuesta"||r.estado=="rechazado"||r.estado=="finalizado"))},dependencies:[y,ne,ee,Q,Ve,X,Y,Z,Ie,oe,te,ke],styles:[".modal[_ngcontent-%COMP%]{display:block;background-color:#00000080;color:#fff}.modal-content[_ngcontent-%COMP%]{background-color:#3e4451}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#3e4451;color:#fff}.circular-container[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#727272}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]});let i=l;return i})();var ze=(()=>{let l=class l{transform(e){return"Dr/a. "+e.apellido+", "+e.nombre}};l.\u0275fac=function(n){return new(n||l)},l.\u0275pipe=ge({name:"doctor",type:l,pure:!0,standalone:!0});let i=l;return i})();function yt(i,l){i&1&&(a(0,"h2",7),s(1,"Mis turnos"),o())}function Pt(i,l){i&1&&(a(0,"h2",7),s(1,"Turnos"),o())}function It(i,l){if(i&1){let t=f();a(0,"div",8)(1,"label",9),s(2," Buscar por especialidad o especialista "),o(),a(3,"input",10),F("ngModelChange",function(n){p(t);let r=m();return k(r.filtro,n)||(r.filtro=n),u(n)}),h("ngModelChange",function(){p(t);let n=m();return u(n.pacienteFiltrar())}),o()()}if(i&2){let t=m();c(3),V("ngModel",t.filtro)}}function Vt(i,l){if(i&1){let t=f();a(0,"div",8)(1,"label",9),s(2," Buscar por especialidad o paciente "),o(),a(3,"input",11),F("ngModelChange",function(n){p(t);let r=m();return k(r.filtro,n)||(r.filtro=n),u(n)}),h("ngModelChange",function(){p(t);let n=m();return u(n.especialistaFiltrar())}),o()()}if(i&2){let t=m();c(3),V("ngModel",t.filtro)}}function kt(i,l){i&1&&(a(0,"th"),s(1,"Especialista"),o())}function Ft(i,l){i&1&&(a(0,"th"),s(1,"Paciente"),o())}function Ot(i,l){if(i&1&&(a(0,"td"),s(1),ce(2,"doctor"),o()),i&2){let t=m().$implicit;c(),C(de(2,1,t.especialista))}}function Dt(i,l){if(i&1&&(a(0,"td"),s(1),o()),i&2){let t=m().$implicit;c(),A("",t.paciente.nombre," ",t.paciente.apellido,"")}}function Rt(i,l){if(i&1){let t=f();a(0,"td")(1,"button",13),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.cancelarTurnoHandler(n))}),s(2,"Cancelar"),o()()}}function jt(i,l){if(i&1){let t=f();a(0,"td")(1,"button",14),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.verReviewHandler(n))}),s(2,"Ver rese\xF1a"),o()()}}function Ht(i,l){if(i&1){let t=f();a(0,"td")(1,"button",15),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.completarEncuestaHandler(n))}),s(2,"Completar encuesta"),o()()}}function zt(i,l){if(i&1){let t=f();a(0,"td")(1,"button",16),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.calificarAtencionHandler(n))}),s(2,"Calificar atenci\xF3n"),o()()}}function At(i,l){if(i&1){let t=f();a(0,"td")(1,"button",17),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.rechazarTurnoHandler(n))}),s(2,"Rechazar"),o()()}}function Lt(i,l){if(i&1){let t=f();a(0,"td")(1,"button",18),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.aceptarTurnoHandler(n))}),s(2,"Aceptar"),o()()}}function Nt(i,l){if(i&1){let t=f();a(0,"td")(1,"button",19),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.finalizarTurnoHandler(n))}),s(2,"Finalizar"),o()()}}function Ut(i,l){if(i&1){let t=f();a(0,"td")(1,"button",19),h("click",function(){p(t);let n=m().$implicit,r=m();return u(r.crearHistorialClinica(n))}),s(2),o()()}if(i&2){let t=m().$implicit;c(2),v(" ",t.historial?"Ver Historial":"Historial clinica"," ")}}function $t(i,l){if(i&1&&(a(0,"tr")(1,"td"),s(2),o(),_(3,Ot,3,3,"td",4)(4,Dt,2,2,"td",4),a(5,"td"),s(6),o(),a(7,"td"),s(8),ce(9,"uppercase"),o(),a(10,"td",12),s(11),o(),_(12,Rt,3,0,"td",4)(13,jt,3,0,"td",4)(14,Ht,3,0,"td",4)(15,zt,3,0,"td",4)(16,At,3,0,"td",4)(17,Lt,3,0,"td",4)(18,Nt,3,0,"td",4)(19,Ut,3,1,"td",4),o()),i&2){let t=l.$implicit,e=m();c(2),C(t.fecha+" - "+t.hora),c(),d("ngIf",e.miRol==="Paciente"||e.miRol==="Administrador"),c(),d("ngIf",e.miRol==="Profesional"||e.miRol==="Administrador"),c(2),C(t.especialidad),c(2),C(de(9,14,t.estado)),c(3),C(t.razon),c(),d("ngIf",t.estado==="reservado"),c(),d("ngIf",e.miRol==="Paciente"&&t.reviewEsp||e.miRol==="Profesional"&&t.reviewPac),c(),d("ngIf",t.estado==="realizado"&&e.miRol==="Paciente"),c(),d("ngIf",t.estado==="realizado"&&e.miRol==="Paciente"&&!t.reviewPac),c(),d("ngIf",t.estado==="reservado"&&e.miRol==="Profesional"),c(),d("ngIf",t.estado==="reservado"&&e.miRol==="Profesional"),c(),d("ngIf",t.estado==="aceptado"&&e.miRol==="Profesional"),c(),d("ngIf",t.estado==="finalizado"&&e.miRol==="Profesional")}}function qt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.cancelarTurnoHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}function Bt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.verReviewHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}function Wt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.calificarAtencionHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}function Gt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.completarEncuestaHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}function Jt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.rechazarTurnoHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}function Kt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.finalizarTurnoHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}function Qt(i,l){if(i&1){let t=f();a(0,"app-m-turno",20),h("closeModal",function(){p(t);let n=m();return u(n.finalizarTurnoHandler(null))}),o()}if(i&2){let t=m();d("data",t.turnoSeleccionado)("estado",t.estado)}}var ji=(()=>{let l=class l{constructor(e,n,r){this.turnoService=e,this.otroService=n,this.usuarioService=r,this.turnosOriginal=[],this.turnos=[],this.turnoSeleccionado=null,this.estado="cancelar",this.filtro="",this.miRol="",this.miUID="",this.idTipo="",this.loading=!1}ngOnInit(){this.otroService.getDocumentSnapshotDeUsuario().subscribe(e=>{this.miRol=e.data().rol,this.miRol==="Administrador"?this.turnoService.getTurnos().subscribe(n=>this.turnos=n):(this.miUID=e.id,this.miRol==="Paciente"?this.idTipo="idPac":this.miRol==="Profesional"&&(this.idTipo="idEsp"),this.obtenerTurnos(this.idTipo,this.miUID))})}pacienteFiltrar(){this.filtro?this.turnos=this.turnos.filter(e=>this.matchFilter(e,this.filtro.toLowerCase())):this.obtenerTurnos(this.idTipo,this.miUID)}matchFilter(e,n){let r=n.toLowerCase(),g=()=>e.historial?Object.values(e.historial).some(W=>String(W).toLowerCase().includes(r)):!1;return e.especialidad.toLowerCase().includes(r)||e.especialista.nombre.toLowerCase().includes(r)||e.especialista.apellido.toLowerCase().includes(r)||g()}obtenerTurnos(e,n){this.turnoService.getTurnoPorid(e,n).subscribe(r=>this.turnos=r)}especialistaFiltrar(){this.filtro?this.turnos=this.turnos.filter(e=>this.matchFilterEspecialista(e,this.filtro.toLowerCase())):this.obtenerTurnos(this.idTipo,this.miUID)}matchFilterEspecialista(e,n){let r=n.toLowerCase(),g=()=>e.historial?Object.values(e.historial).some(W=>String(W).toLowerCase().includes(r)):!1;return e.especialidad.toLowerCase().includes(r)||e.paciente.nombre.toLowerCase().includes(r)||e.paciente.apellido.toLowerCase().includes(r)||g()}cancelarTurnoHandler(e){this.estado="cancelar",this.turnoSeleccionado=e}verReviewHandler(e){this.estado="resena",this.turnoSeleccionado=e}calificarAtencionHandler(e){this.estado="calificar",this.turnoSeleccionado=e}completarEncuestaHandler(e){this.estado="encuesta",this.turnoSeleccionado=e}rechazarTurnoHandler(e){this.estado="rechazado",this.turnoSeleccionado=e}aceptarTurnoHandler(e){e.id&&(this.loading=!0,e.estado="aceptado",this.turnoService.actualizar(e.id,e).then(()=>{this.loading=!1}).catch(n=>{console.log(n)}))}finalizarTurnoHandler(e){this.estado="finalizado",this.turnoSeleccionado=e}crearHistorialClinica(e){this.estado="historial",this.turnoSeleccionado=e}};l.\u0275fac=function(n){return new(n||l)(b(z),b(B),b(q))},l.\u0275cmp=w({type:l,selectors:[["app-mis-turnos"]],standalone:!0,features:[M],decls:28,vars:14,consts:[[1,"card","mt-5",2,"width","95%","margin","auto","background-color","rgba(0, 0, 0, 0.5)","color","white"],[1,"card-body"],["class","card-title text-center",4,"ngIf"],["class","mb-4",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"data","estado","closeModal",4,"ngIf"],[1,"card-title","text-center"],[1,"mb-4"],[1,"mb-2"],["appEjercicioC","",1,"form-control","w-50",3,"ngModelChange","ngModel"],["appEjercicioC","",1,"form-control","w-25",3,"ngModelChange","ngModel"],[1,"tdMotivo"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-outline-light",3,"click"],[1,"btn","btn-outline-info",3,"click"],[1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-light",3,"click"],[3,"closeModal","data","estado"]],template:function(n,r){n&1&&(a(0,"div",0)(1,"div",1),_(2,yt,2,0,"h2",2)(3,Pt,2,0,"h2",2),x(4,"hr"),a(5,"div"),_(6,It,4,1,"div",3)(7,Vt,4,1,"div",3),a(8,"table")(9,"tr")(10,"th"),s(11,"Horario"),o(),_(12,kt,2,0,"th",4)(13,Ft,2,0,"th",4),a(14,"th"),s(15,"Especialidad"),o(),a(16,"th"),s(17,"Estado"),o(),a(18,"th"),s(19,"Motivo"),o()(),_(20,$t,20,16,"tr",5),o()()(),_(21,qt,1,2,"app-m-turno",6)(22,Bt,1,2,"app-m-turno",6)(23,Wt,1,2,"app-m-turno",6)(24,Gt,1,2,"app-m-turno",6)(25,Jt,1,2,"app-m-turno",6)(26,Kt,1,2,"app-m-turno",6)(27,Qt,1,2,"app-m-turno",6),o()),n&2&&(c(2),d("ngIf",r.miRol==="Paciente"||r.miRol==="Profesional"),c(),d("ngIf",r.miRol==="Administrador"),c(3),d("ngIf",r.miRol==="Paciente"||r.miRol==="Administrador"),c(),d("ngIf",r.miRol==="Profesional"),c(5),d("ngIf",r.miRol==="Paciente"||r.miRol==="Administrador"),c(),d("ngIf",r.miRol==="Profesional"||r.miRol==="Administrador"),c(7),d("ngForOf",r.turnos),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="cancelar"),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="resena"),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="calificar"),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="encuesta"),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="rechazado"),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="finalizado"),c(),d("ngIf",r.turnoSeleccionado&&r.estado=="historial"))},dependencies:[He,y,j,ne,Q,X,Z,Me,ze],styles:["tr[_ngcontent-%COMP%]{height:3.5rem}tr[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:.5rem 2rem .5rem 0}.tdMotivo[_ngcontent-%COMP%]{max-width:20rem}td[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{min-width:10rem}"]});let i=l;return i})();function Xt(i,l){if(i&1){let t=f();a(0,"div",10)(1,"button",11),h("click",function(){let n=p(t).$implicit,r=m(2);return u(r.onEspecialidadSeleccionadaHandler(n.nombre))})("click",function(){p(t);let n=m(2);return u(n.next())}),x(2,"div",12),o()()}if(i&2){let t=l.$implicit,e=m(2);c(2),ve("background-image",e.getBackgroundImage(t.img))}}function Yt(i,l){if(i&1&&(a(0,"fieldset")(1,"h2",8),s(2,"Especialidades"),o(),a(3,"div",1),_(4,Xt,3,2,"div",9),o()()),i&2){let t=m();c(4),d("ngForOf",t.especialidades)}}function Zt(i,l){if(i&1){let t=f();a(0,"div")(1,"div",17),h("click",function(){let n=p(t).$implicit,r=m(2);return u(r.selectProfesional(n))})("click",function(){p(t);let n=m(2);return u(n.next())}),x(2,"img",18),a(3,"p",19)(4,"strong",20),s(5),o(),a(6,"strong"),s(7,"Email: "),o(),s(8),a(9,"strong"),s(10,"Otras Especialidades: "),o(),s(11),o()()()}if(i&2){let t=l.$implicit;c(2),d("src",t.imagen,K),c(3),C(t.nombre+" "+t.apellido),c(3),v(" ",t.mail," - "),c(3),v("",t.especialidades," ")}}function ei(i,l){if(i&1){let t=f();a(0,"fieldset")(1,"h2",8),s(2,"Elegir Especialista"),o(),a(3,"div",13)(4,"h6",14),s(5),o(),_(6,Zt,12,4,"div",15),o(),a(7,"input",16),h("click",function(){p(t);let n=m();return u(n.previous())}),o()()}if(i&2){let t=m();c(5),C(t.especialidadDetails.value.especialidad),c(),d("ngForOf",t.profesionales)}}function ti(i,l){if(i&1){let t=f();a(0,"div")(1,"div",22),h("click",function(){let n=p(t).$implicit,r=m().$implicit,g=m(2);return u(g.onselectReserva(r.fecha,n))})("click",function(){p(t);let n=m(3);return u(n.next())}),a(2,"div",23)(3,"span"),s(4),o()()()()}if(i&2){let t=l.$implicit,e=m().$implicit;c(4),A(" ",e.fecha," ",t,"")}}function ii(i,l){if(i&1&&(a(0,"div",10),_(1,ti,5,2,"div",15),o()),i&2){let t=l.$implicit;c(),d("ngForOf",t.horarios)}}function ni(i,l){if(i&1){let t=f();a(0,"fieldset")(1,"h2",8),s(2,"Eleg\xED una fecha para el turno"),o(),a(3,"div",21)(4,"div",1),_(5,ii,2,1,"div",9),o()(),a(6,"input",16),h("click",function(){p(t);let n=m();return u(n.previous())}),o()()}if(i&2){let t=m();c(5),d("ngForOf",t.reservasProfesional)}}function oi(i,l){if(i&1&&(a(0,"div",27)(1,"h5",23),s(2),o(),a(3,"div",28)(4,"p",29)(5,"strong"),s(6,"Nombre del profesional:"),o(),s(7),x(8,"br"),a(9,"strong"),s(10,"Fecha:"),o(),s(11),x(12,"br"),a(13,"strong"),s(14,"Hora:"),o(),s(15),x(16,"br"),a(17,"strong"),s(18,"Especialidad:"),o(),s(19),x(20,"br"),o()()()),i&2){let t=m(2);c(2),C(t.turnoSolicitado.especialidad),c(5),C((t.selectedProfesional==null?null:t.selectedProfesional.nombre)+" "+(t.selectedProfesional==null?null:t.selectedProfesional.apellido)),c(4),v(" ",t.turnoSolicitado.fecha,""),c(4),v(" ",t.turnoSolicitado.hora,""),c(4),C(t.turnoSolicitado.especialidad)}}function ri(i,l){i&1&&x(0,"span",30)}function ai(i,l){i&1&&(a(0,"span"),s(1,"Alta"),o())}function li(i,l){if(i&1){let t=f();a(0,"fieldset")(1,"h2",8),s(2,"Confirmar Turno Solicitado"),o(),_(3,oi,21,5,"div",24),a(4,"input",16),h("click",function(){p(t);let n=m();return u(n.previous())}),o(),a(5,"button",25),h("click",function(){p(t);let n=m();return u(n.submit())}),_(6,ri,1,0,"span",26)(7,ai,2,0,"span",6),o()()}if(i&2){let t=m();c(3),d("ngIf",t.turnoSolicitado),c(2),d("disabled",t.loading),c(),d("ngIf",t.loading),c(),d("ngIf",!t.loading)}}var Li=(()=>{let l=class l{constructor(e,n,r,g,E){this.formBuilder=e,this.clinicaFire=n,this.authFire=r,this.turnosFire=g,this.otroService=E,this.idPac="",this.idEsp="",this.loading=!1,this.especialidades=[],this.selectedEspecialidad="",this.img="../../assets/icono-clinica.png",this.profesionales=[],this.selectedProfesional=null,this.reservasProfesional=[],this.selectedReserva=null,this.fecha="",this.selecHora="",this.especialida_step=!1,this.profecional_step=!1,this.fecha_step=!1,this.hora_step=!1,this.confirmar_step=!1,this.miRol="",this.step=1}ngOnInit(){this.otroService.getDocumentSnapshotDeUsuario().subscribe(e=>{this.miRol=e.data().rol,this.miRol=="Administrador"||this.miRol=="Paciente"&&this.clinicaFire.getUserByID(e.id).then(n=>{this.idPac=e.id,this.selectedPaciente=n.data()})}),this.clinicaFire.getEspecialidad().subscribe(e=>{this.especialidades=e}),this.especialidadDetails=this.formBuilder.group({especialidad:[null,O.required]})}selectProfesional(e){this.selectedProfesional=e,this.selectedProfesional&&this.selectedProfesional.id&&(this.idEsp=this.selectedProfesional.id,this.clinicaFire.getHorariosDisponibles(this.selectedProfesional.id).subscribe(n=>{this.reservasProfesional=n}))}next(){if(this.step==1){let e=this.especialidadDetails.value.especialidad;this.onEspecialidadSeleccionadaHandler(e),this.especialida_step=!0,this.step++}else this.step==2?(this.profecional_step=!0,this.step++):this.step==3&&(this.fecha_step=!0,this.onRellenarTurno(),this.step++)}previous(){this.step--,this.step==1&&(this.especialida_step=!1),this.step==2&&(this.profecional_step=!1),this.step==3&&(this.fecha_step=!1)}submit(){this.loading=!0,this.turnosFire.add(this.turnoSolicitado).then(()=>{this.loading=!1,console.log("se agrego correctamenta")}).catch(e=>{this.loading=!1,console.log(e)})}onRellenarTurno(){this.selectedProfesional!==null&&(this.turnoSolicitado={idEsp:this.idEsp,idPac:this.idPac,especialista:this.selectedProfesional,paciente:this.selectedPaciente,fecha:this.fecha,hora:this.selecHora,especialidad:this.especialidadDetails.value.especialidad,estado:"reservado",reviewEsp:"",reviewPac:""})}onEspecialidadSeleccionadaHandler(e){this.especialidadDetails.get("especialidad")?.setValue(e),this.clinicaFire.getProFesionalPorEspecialidad(e).subscribe(n=>{this.profesionales=n})}onselectReserva(e,n){this.fecha=e,this.selecHora=n}onselectHora(e){this.selecHora=e}getBackgroundImage(e){return e.trim()===""?'url("../../../assets/icono-clinica.png")':`url('${e}')`}};l.\u0275fac=function(n){return new(n||l)(b(ie),b(q),b($),b(z),b(B))},l.\u0275cmp=w({type:l,selectors:[["app-turno-solicitar"]],standalone:!0,features:[M],decls:21,vars:9,consts:[[1,"container","py-5"],[1,"row"],[1,"col-md-12","col-md-offset-2"],["id","msform",3,"formGroup"],["id","progressbar"],[3,"ngClass"],[4,"ngIf"],["id","msform"],[1,"fs-title"],["class","col-6 col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","mb-3"],["type","button",1,"especialidad-button",3,"click"],[1,"especialidad-image"],[1,"my-3","p-3","bg-body","rounded","shadow-sm"],[1,"border-bottom","pb-2","mb-0"],[4,"ngFor","ngForOf"],["type","button","name","previous","value","Anterior",1,"previous","action-button-previous",3,"click"],[1,"d-flex","text-muted","pt-3",2,"cursor","pointer",3,"click"],["width","42","height","42","aria-label","Profile Image",1,"bd-placeholder-img","flex-shrink-0","me-2","rounded",3,"src"],[1,"pb-3","mb-0","small","lh-sm","border-bottom","text-start"],[1,"d-block","text-gray-dark"],[1,"container"],[1,"card",3,"click"],[1,"card-header"],["class","card",4,"ngIf"],["type","button","name","submit",1,"submit","action-button",3,"click","disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"card-text"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,r){n&1&&(a(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"form",3)(5,"ul",4)(6,"li",5),s(7,"Especialidades"),o(),a(8,"li",5),s(9,"Elegir Especialista"),o(),a(10,"li",5),s(11,"Eleg\xED una fecha para el turno"),o(),a(12,"li",5),s(13,"Confirmar Turno"),o()(),_(14,Yt,5,1,"fieldset",6),o(),a(15,"form",7),_(16,ei,8,2,"fieldset",6),o(),a(17,"form",7),_(18,ni,7,1,"fieldset",6),o(),a(19,"form",7),_(20,li,8,4,"fieldset",6),o()()()()()),n&2&&(c(4),d("formGroup",r.especialidadDetails),c(2),d("ngClass",r.step>=1?"active":"inactive"),c(2),d("ngClass",r.step>=2?"active":"inactive"),c(2),d("ngClass",r.step>=3?"active":"inactive"),c(2),d("ngClass",r.step==4?"active":"inactive"),c(2),d("ngIf",r.step==1),c(2),d("ngIf",r.step==2),c(2),d("ngIf",r.step==3),c(2),d("ngIf",r.step==4))},dependencies:[j,y,oe,ee,Y,te,we],styles:['#msform[_ngcontent-%COMP%]{text-align:center;position:relative;margin-top:30px;color:#3f3e3e}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{background:#fff;border:0 none;border-radius:15px;box-shadow:0 0 15px 1px #0006;padding:20px 30px;box-sizing:border-box;width:80%;margin:0 10%;position:relative}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:not(:first-of-type){display:none}#msform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #msform[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:15px;border:1px solid #ccc;border-radius:0;margin-bottom:10px;width:100%;box-sizing:border-box;font-family:montserrat;color:#2c3e50;font-size:18px}#msform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, #msform[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;border:1px solid #ee0979;outline-width:0;transition:All .5s ease-in;-webkit-transition:All .5s ease-in;-moz-transition:All .5s ease-in;-o-transition:All .5s ease-in}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100px;background:#ee0979;font-weight:700;color:#fff;border:0 none;border-radius:25px;cursor:pointer;padding:10px 5px;margin:10px 5px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, #msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #fff,0 0 0 3px #ee0979}#msform[_ngcontent-%COMP%]   .action-button-previous[_ngcontent-%COMP%]{width:100px;background:#c5c5f1;font-weight:700;color:#fff;border:0 none;border-radius:25px;cursor:pointer;padding:10px 5px;margin:10px 5px}#msform[_ngcontent-%COMP%]   .action-button-previous[_ngcontent-%COMP%]:hover, #msform[_ngcontent-%COMP%]   .action-button-previous[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #fff,0 0 0 3px #c5c5f1}.fs-title[_ngcontent-%COMP%]{font-size:18px;text-transform:uppercase;color:#2c3e50;margin-bottom:10px;letter-spacing:2px;font-weight:700}.fs-subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:13px;color:#666;margin-bottom:20px}#progressbar[_ngcontent-%COMP%]{margin-bottom:30px;overflow:hidden;counter-reset:step;padding:0;display:flex;justify-content:center}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;color:#fff;text-transform:uppercase;font-size:9px;width:18%;float:left;position:relative;letter-spacing:1px}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(step);counter-increment:step;width:24px;height:24px;line-height:26px;display:block;font-size:12px;color:#333;background:#fff;border-radius:25px;margin:0 auto 10px}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";width:100%;height:2px;background:#fff;position:absolute;left:-50%;top:9px;z-index:-1}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:after{content:none}#progressbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before, #progressbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{background:#ee0979;color:#fff}#progressbar[_ngcontent-%COMP%]   li.inactive[_ngcontent-%COMP%]:before{background:#deb887;color:#000}fieldset[_ngcontent-%COMP%]{-webkit-animation-duration:.25ms;-webkit-animation-name:_ngcontent-%COMP%_slidein;-moz-animation-duration:1s;-moz-animation-name:slidein;-o-animation-duration:1s;-o-animation-name:slidein;animation-duration:1s;animation-name:_ngcontent-%COMP%_slidein}@-webkit-keyframes _ngcontent-%COMP%_slidein{0%{margin-right:100%;width:300%}to{margin-right:0%;width:100%}}@-moz-keyframes slidein{0%{margin-left:100%;width:300%}to{margin-left:0%;width:100%}}@-o-keyframes slidein{0%{margin-left:100%;width:300%}to{margin-left:0%;width:100%}}@keyframes _ngcontent-%COMP%_slidein{0%{margin-left:100%;width:300%}to{margin-left:0%;width:100%}}.selected[_ngcontent-%COMP%]{background-color:#6490f6;color:#fff}.especialidad-button[_ngcontent-%COMP%]{width:100%;padding:0;border:none;background:none;cursor:pointer}.especialidad-image[_ngcontent-%COMP%]{width:100%;height:180px;background-size:cover;background-position:center;border-radius:8px;border:1px solid #ddd}.especialidad-button[_ngcontent-%COMP%]:focus{outline:none}.especialidad-button.selected[_ngcontent-%COMP%]   .especialidad-image[_ngcontent-%COMP%]{background-color:#00f}.especialidad-overlay[_ngcontent-%COMP%]{background:#6490f6}']});let i=l;return i})();export{$ as a,q as b,hi as c,B as d,z as e,bi as f,He as g,ji as h,Li as i};
