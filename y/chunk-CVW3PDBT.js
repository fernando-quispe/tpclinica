import{$ as F,$a as Su,$b as Ug,A as mu,Aa as Mt,B as lg,C as yu,Ca as bu,D as hg,Da as gr,E as ht,Ea as mr,F as fr,Fa as Eg,G as rn,Ga as Tg,H as vu,Ha as Ag,I as pr,Ia as bg,J as dg,Ja as Sg,K as kn,Ka as Cg,Kb as Vt,L as sn,La as Rg,Lb as Vg,M as _u,Ma as xn,N as fg,O as Iu,P as wu,Pa as Dg,Q as We,Qb as Oi,R as pg,Ra as Ni,Rb as Lg,S as Te,Sb as wo,T as ce,Ta as Y,Tb as Eo,U as Nt,Ua as Pg,Ub as Pu,V as X,Vb as To,W as kt,Wb as Ao,X as gg,Xa as Ng,Xb as bo,Y as J,Ya as Vn,Yb as Mi,Z as Eu,Zb as Fg,_ as H,_a as me,_b as yr,a as V,aa as Be,ab as kg,ac as vr,b as he,ba as mg,bc as jg,ca as Pi,cb as tt,cc as Bg,d as en,da as Ke,db as Og,dc as qe,e as _,ea as yg,eb as Mg,ec as $g,f as sg,fa as Ot,fb as Cu,fc as xi,g as lu,ga as Ae,gb as ki,gc as qg,h as Pt,hc as zg,i as hu,ia as ot,ib as Ru,ic as Vi,j as du,jc as So,k as tn,ka as vg,l as Ze,la as on,lb as Du,m as og,ma as dt,n as ag,na as On,o as nn,p as fu,pb as xg,pc as Gg,q as pu,r as gu,ra as an,rc as Co,s as Ee,sa as _g,sc as Wg,t as j,ta as ft,tc as Ro,u as Di,ua as Tu,ub as xt,v as cg,va as Mn,w as ug,wa as et,x as te,xa as Ig,y as Io,ya as Au,z as Ge,za as wg}from"./chunk-JRU3JP26.js";var Fi=class{},Po=class{},Ln=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ku=class{encodeKey(e){return Kg(e)}encodeValue(e){return Kg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function qw(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var zw=/%(\d[a-f0-9])/gi,Gw={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Kg(n){return encodeURIComponent(n).replace(zw,(e,t)=>Gw[t]??e)}function Do(n){return`${n}`}var cn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ku,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=qw(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Do):[Do(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Do(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Do(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ou=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Ww(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Hg(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Qg(n){return typeof Blob<"u"&&n instanceof Blob}function Jg(n){return typeof FormData<"u"&&n instanceof FormData}function Kw(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Li=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Ww(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ln,this.context??=new Ou,!this.params)this.params=new cn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Hg(this.body)||Qg(this.body)||Jg(this.body)||Kw(this.body)?this.body:this.body instanceof cn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Jg(this.body)?null:Qg(this.body)?this.body.type||null:Hg(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof cn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,f=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((I,C)=>I.set(C,e.setHeaders[C]),h)),e.setParams&&(f=Object.keys(e.setParams).reduce((I,C)=>I.set(C,e.setParams[C]),f)),new n(t,r,o,{params:f,headers:h,context:m,reportProgress:l,responseType:i,withCredentials:c,transferCache:s})}},_r=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(_r||{}),Ui=class{constructor(e,t=Oo.Ok,r="OK"){this.headers=e.headers||new Ln,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Mu=class n extends Ui{constructor(e={}){super(e),this.type=_r.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},No=class n extends Ui{constructor(e={}){super(e),this.type=_r.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ko=class extends Ui{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Oo=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Oo||{});function Nu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Hw=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Li)o=r;else{let h;s.headers instanceof Ln?h=s.headers:h=new Ln(s.headers);let f;s.params&&(s.params instanceof cn?f=s.params:f=new cn({fromObject:s.params})),o=new Li(r,i,s.body!==void 0?s.body:null,{headers:h,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=j(o).pipe(rn(h=>this.handler.handle(h)));if(r instanceof Li||s.observe==="events")return c;let l=c.pipe(ht(h=>h instanceof No));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(te(h=>{if(h.body!==null&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return l.pipe(te(h=>{if(h.body!==null&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return l.pipe(te(h=>{if(h.body!==null&&typeof h.body!="string")throw new Error("Response is not a string.");return h.body}));case"json":default:return l.pipe(te(h=>h.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new cn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Nu(s,i))}post(r,i,s={}){return this.request("POST",r,Nu(s,i))}put(r,i,s={}){return this.request("PUT",r,Nu(s,i))}};e.\u0275fac=function(i){return new(i||e)(H(Fi))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function em(n,e){return e(n)}function Qw(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function Jw(n,e,t){return(r,i)=>dt(t,()=>e(r,s=>n(s,i)))}var Yw=new J(""),xu=new J(""),Xw=new J(""),Zw=new J("");function eE(){let n=null;return(e,t)=>{n===null&&(n=(F(Yw,{optional:!0})??[]).reduceRight(Qw,em));let r=F(ki),i=r.add();return n(e,t).pipe(kn(()=>r.remove(i)))}}var Yg=(()=>{let e=class e extends Fi{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=F(ki);let s=F(Zw,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(xu),...this.injector.get(Xw,[])]));this.chain=s.reduceRight((o,c)=>Jw(o,c,this.injector),em)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(kn(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(H(Po),H(on))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();var tE=/^\)\]\}',?\n/;function nE(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Xg=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ce(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ee(i.\u0275loadImpl()):j(null)).pipe(We(()=>new Pt(o=>{let c=i.build();if(c.open(r.method,r.urlWithParams),r.withCredentials&&(c.withCredentials=!0),r.headers.forEach((R,M)=>c.setRequestHeader(R,M.join(","))),r.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&c.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();c.responseType=R!=="json"?R:"text"}let l=r.serializeBody(),h=null,f=()=>{if(h!==null)return h;let R=c.statusText||"OK",M=new Ln(c.getAllResponseHeaders()),q=nE(c)||r.url;return h=new Mu({headers:M,status:c.status,statusText:R,url:q}),h},m=()=>{let{headers:R,status:M,statusText:q,url:Q}=f(),K=null;M!==Oo.NoContent&&(K=typeof c.response>"u"?c.responseText:c.response),M===0&&(M=K?Oo.Ok:0);let we=M>=200&&M<300;if(r.responseType==="json"&&typeof K=="string"){let ie=K;K=K.replace(tE,"");try{K=K!==""?JSON.parse(K):null}catch(E){K=ie,we&&(we=!1,K={error:E,text:K})}}we?(o.next(new No({body:K,headers:R,status:M,statusText:q,url:Q||void 0})),o.complete()):o.error(new ko({error:K,headers:R,status:M,statusText:q,url:Q||void 0}))},I=R=>{let{url:M}=f(),q=new ko({error:R,status:c.status||0,statusText:c.statusText||"Unknown Error",url:M||void 0});o.error(q)},C=!1,N=R=>{C||(o.next(f()),C=!0);let M={type:_r.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(M.total=R.total),r.responseType==="text"&&c.responseText&&(M.partialText=c.responseText),o.next(M)},O=R=>{let M={type:_r.UploadProgress,loaded:R.loaded};R.lengthComputable&&(M.total=R.total),o.next(M)};return c.addEventListener("load",m),c.addEventListener("error",I),c.addEventListener("timeout",I),c.addEventListener("abort",I),r.reportProgress&&(c.addEventListener("progress",N),l!==null&&c.upload&&c.upload.addEventListener("progress",O)),c.send(l),o.next({type:_r.Sent}),()=>{c.removeEventListener("error",I),c.removeEventListener("abort",I),c.removeEventListener("load",m),c.removeEventListener("timeout",I),r.reportProgress&&(c.removeEventListener("progress",N),l!==null&&c.upload&&c.upload.removeEventListener("progress",O)),c.readyState!==c.DONE&&c.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(H(Ro))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),tm=new J(""),rE="XSRF-TOKEN",iE=new J("",{providedIn:"root",factory:()=>rE}),sE="X-XSRF-TOKEN",oE=new J("",{providedIn:"root",factory:()=>sE}),Mo=class{},aE=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=So(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(H(qe),H(Mt),H(iE))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function cE(n,e){let t=n.url.toLowerCase();if(!F(tm)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=F(Mo).getToken(),i=F(oE);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var nm=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(nm||{});function uE(n,e){return{\u0275kind:n,\u0275providers:e}}function lE(...n){let e=[Hw,Xg,Yg,{provide:Fi,useExisting:Yg},{provide:Po,useExisting:Xg},{provide:xu,useValue:cE,multi:!0},{provide:tm,useValue:!0},{provide:Mo,useClass:aE}];for(let t of n)e.push(...t.\u0275providers);return ot(e)}var Zg=new J("");function hE(){return uE(nm.LegacyInterceptors,[{provide:Zg,useFactory:eE},{provide:xu,useExisting:Zg,multi:!0}])}var bP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ot({type:e}),e.\u0275inj=kt({providers:[lE(hE())]});let n=e;return n})();var Fu=class extends Bg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Uu=class n extends Fu{static makeCurrent(){jg(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=fE();return t==null?null:pE(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return So(document.cookie,e)}},ji=null;function fE(){return ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null}function pE(n){return new URL(n,document.baseURI).pathname}var gE=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),ju=new J(""),om=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ce(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(H(ju),H(me))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Vo=class{constructor(e){this._doc=e}},Vu="ng-app-id",am=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Co(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Vu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Vu),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Vu,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,c=o.get(i)?.elements;c?c.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(H(qe),H(Au),H(bu,8),H(Mt))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Lu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$u=/%COMP%/g,cm="%COMP%",mE=`_nghost-${cm}`,yE=`_ngcontent-${cm}`,vE=!0,_E=new J("",{providedIn:"root",factory:()=>vE});function IE(n){return yE.replace($u,n)}function wE(n){return mE.replace($u,n)}function um(n,e){return e.map(t=>t.replace($u,n))}var rm=(()=>{let e=class e{constructor(r,i,s,o,c,l,h,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=h,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Co(l),this.defaultRenderer=new Bi(r,c,h,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pi.ShadowDom&&(i=he(V({},i),{encapsulation:Pi.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Lo?s.applyToHost(r):s instanceof $i&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let c=this.doc,l=this.ngZone,h=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,I=this.platformIsServer;switch(i.encapsulation){case Pi.Emulated:o=new Lo(h,f,i,this.appId,m,c,l,I);break;case Pi.ShadowDom:return new Bu(h,f,r,i,c,l,this.nonce,I);default:o=new $i(h,f,i,m,c,l,I);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(H(om),H(am),H(Au),H(_E),H(qe),H(Mt),H(me),H(bu))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),Bi=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Lu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(im(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(im(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ce(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Lu[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Lu[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ni.DashCase|Ni.Important)?e.style.setProperty(t,r,i&Ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function im(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Bu=class extends Bi{constructor(e,t,r,i,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=um(i.id,i.styles);for(let f of h){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$i=class extends Bi{constructor(e,t,r,i,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?um(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Lo=class extends $i{constructor(e,t,r,i,s,o,c,l){let h=i+"-"+r.id;super(e,t,r,s,o,c,l,h),this.contentAttr=IE(h),this.hostAttr=wE(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},EE=(()=>{let e=class e extends Vo{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(H(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),sm=["alt","control","meta","shift"],TE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bE=(()=>{let e=class e extends Vo{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(r,o.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),c="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),c="code."),sm.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),c+=f+".")}),c+=o,i.length!=0||o.length===0)return null;let h={};return h.domEventName=s,h.fullKey=c,h}static matchEventFullKeyCode(r,i){let s=TE[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),sm.forEach(c=>{if(c!==s){let l=AE[c];l(r)&&(o+=c+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(H(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function WP(n,e){return Fg(V({rootComponent:n},SE(e)))}function SE(n){return{appProviders:[...NE,...n?.providers??[]],platformProviders:PE}}function CE(){Uu.makeCurrent()}function RE(){return new Tu}function DE(){return Ig(document),document}var PE=[{provide:Mt,useValue:Gg},{provide:wg,useValue:CE,multi:!0},{provide:qe,useFactory:DE,deps:[]}];var NE=[{provide:vg,useValue:"root"},{provide:Tu,useFactory:RE,deps:[]},{provide:ju,useClass:EE,multi:!0,deps:[qe,me,Mt]},{provide:ju,useClass:bE,multi:!0,deps:[qe]},rm,am,om,{provide:Ng,useExisting:rm},{provide:Ro,useClass:gE,deps:[]},[]];var lm=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(H(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var kE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=H(OE),s},providedIn:"root"});let n=e;return n})(),OE=(()=>{let e=class e extends kE{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case xn.NONE:return i;case xn.HTML:return mr(i,"HTML")?gr(i):Rg(this._doc,String(i)).toString();case xn.STYLE:return mr(i,"Style")?gr(i):i;case xn.SCRIPT:if(mr(i,"Script"))return gr(i);throw new ce(5200,!1);case xn.URL:return mr(i,"URL")?gr(i):Cg(String(i));case xn.RESOURCE_URL:if(mr(i,"ResourceURL"))return gr(i);throw new ce(5201,!1);default:throw new ce(5202,!1)}}bypassSecurityTrustHtml(r){return Eg(r)}bypassSecurityTrustStyle(r){return Tg(r)}bypassSecurityTrustScript(r){return Ag(r)}bypassSecurityTrustUrl(r){return bg(r)}bypassSecurityTrustResourceUrl(r){return Sg(r)}};e.\u0275fac=function(i){return new(i||e)(H(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var W="primary",is=Symbol("RouteTitle"),Ku=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ar(n){return new Ku(n)}function xE(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function VE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pt(n[t],e[t]))return!1;return!0}function pt(n,e){let t=n?Hu(n):void 0,r=e?Hu(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!_m(n[i],e[i]))return!1;return!0}function Hu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _m(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Im(n){return n.length>0?n[n.length-1]:null}function fn(n){return cg(n)?n:Eo(n)?Ee(Promise.resolve(n)):j(n)}var LE={exact:Em,subset:Tm},wm={exact:FE,subset:UE,ignored:()=>!0};function hm(n,e,t){return LE[t.paths](n.root,e.root,t.matrixParams)&&wm[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function FE(n,e){return pt(n,e)}function Em(n,e,t){if(!Un(n.segments,e.segments)||!jo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Em(n.children[r],e.children[r],t))return!1;return!0}function UE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_m(n[t],e[t]))}function Tm(n,e,t){return Am(n,e,e.segments,t)}function Am(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Un(i,t)||e.hasChildren()||!jo(i,t,r))}else if(n.segments.length===t.length){if(!Un(n.segments,t)||!jo(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Tm(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Un(n.segments,i)||!jo(n.segments,i,r)||!n.children[W]?!1:Am(n.children[W],e,s,r)}}function jo(n,e,t){return e.every((r,i)=>wm[t](n[i].parameters,r.parameters))}var un=class{constructor(e=new oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ar(this.queryParams),this._queryParamMap}toString(){return $E.serialize(this)}},oe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bo(this)}},Fn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ar(this.parameters),this._parameterMap}toString(){return Sm(this)}};function jE(n,e){return Un(n,e)&&n.every((t,r)=>pt(t.parameters,e[r].parameters))}function Un(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function BE(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===W&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==W&&(t=t.concat(e(i,r)))}),t}var ss=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new Qi,providedIn:"root"});let n=e;return n})(),Qi=class{parse(e){let t=new Ju(e);return new un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qi(e.root,!0)}`,r=GE(e.queryParams),i=typeof e.fragment=="string"?`#${qE(e.fragment)}`:"";return`${t}${r}${i}`}},$E=new Qi;function Bo(n){return n.segments.map(e=>Sm(e)).join("/")}function qi(n,e){if(!n.hasChildren())return Bo(n);if(e){let t=n.children[W]?qi(n.children[W],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==W&&r.push(`${i}:${qi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=BE(n,(r,i)=>i===W?[qi(n.children[W],!1)]:[`${i}:${qi(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[W]!=null?`${Bo(n)}/${t[0]}`:`${Bo(n)}/(${t.join("//")})`}}function bm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fo(n){return bm(n).replace(/%3B/gi,";")}function qE(n){return encodeURI(n)}function Qu(n){return bm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $o(n){return decodeURIComponent(n)}function dm(n){return $o(n.replace(/\+/g,"%20"))}function Sm(n){return`${Qu(n.path)}${zE(n.parameters)}`}function zE(n){return Object.entries(n).map(([e,t])=>`;${Qu(e)}=${Qu(t)}`).join("")}function GE(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Fo(t)}=${Fo(i)}`).join("&"):`${Fo(t)}=${Fo(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var WE=/^[^\/()?;#]+/;function qu(n){let e=n.match(WE);return e?e[0]:""}var KE=/^[^\/()?;=#]+/;function HE(n){let e=n.match(KE);return e?e[0]:""}var QE=/^[^=?&#]+/;function JE(n){let e=n.match(QE);return e?e[0]:""}var YE=/^[^&#]+/;function XE(n){let e=n.match(YE);return e?e[0]:""}var Ju=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new oe([],{}):new oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[W]=new oe(e,t)),r}parseSegment(){let e=qu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new Fn($o(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=HE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=qu(this.remaining);i&&(r=i,this.capture(r))}e[$o(t)]=$o(r)}parseQueryParam(e){let t=JE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=XE(this.remaining);o&&(r=o,this.capture(r))}let i=dm(t),s=dm(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ce(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=W);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[W]:new oe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}};function Cm(n){return n.segments.length>0?new oe([],{[W]:n}):n}function Rm(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Rm(i);if(r===W&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new oe(n.segments,e);return ZE(t)}function ZE(n){if(n.numberOfChildren===1&&n.children[W]){let e=n.children[W];return new oe(n.segments.concat(e.segments),e.children)}return n}function br(n){return n instanceof un}function eT(n,e,t=null,r=null){let i=Dm(n);return Pm(i,e,t,r)}function Dm(n){let e;function t(s){let o={};for(let l of s.children){let h=t(l);o[l.outlet]=h}let c=new oe(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=Cm(r);return e??i}function Pm(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return zu(i,i,i,t,r);let s=tT(e);if(s.toRoot())return zu(i,i,new oe([],{}),t,r);let o=nT(s,i,n),c=o.processChildren?Wi(o.segmentGroup,o.index,s.commands):km(o.segmentGroup,o.index,s.commands);return zu(i,o.segmentGroup,c,t,r)}function qo(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ji(n){return typeof n=="object"&&n!=null&&n.outlets}function zu(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,h])=>{s[l]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=Nm(n,e,t);let c=Cm(Rm(o));return new un(c,s,i)}function Nm(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Nm(s,e,t)}),new oe(n.segments,r)}var zo=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&qo(r[0]))throw new ce(4003,!1);let i=r.find(Ji);if(i&&i!==Im(r))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new zo(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new zo(t,e,r)}var Er=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function nT(n,e,t){if(n.isAbsolute)return new Er(e,!0,0);if(!t)return new Er(e,!1,NaN);if(t.parent===null)return new Er(t,!0,0);let r=qo(n.commands[0])?0:1,i=t.segments.length-1+r;return rT(t,i,n.numberOfDoubleDots)}function rT(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ce(4005,!1);i=r.segments.length}return new Er(r,!1,i-s)}function iT(n){return Ji(n[0])?n[0].outlets:{[W]:n}}function km(n,e,t){if(n??=new oe([],{}),n.segments.length===0&&n.hasChildren())return Wi(n,e,t);let r=sT(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new oe(n.segments.slice(0,r.pathIndex),{});return s.children[W]=new oe(n.segments.slice(r.pathIndex),n.children),Wi(s,0,i)}else return r.match&&i.length===0?new oe(n.segments,{}):r.match&&!n.hasChildren()?Yu(n,e,t):r.match?Wi(n,0,i):Yu(n,e,t)}function Wi(n,e,t){if(t.length===0)return new oe(n.segments,{});{let r=iT(t),i={};if(Object.keys(r).some(s=>s!==W)&&n.children[W]&&n.numberOfChildren===1&&n.children[W].segments.length===0){let s=Wi(n.children[W],e,t);return new oe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=km(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new oe(n.segments,i)}}function sT(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Ji(c))break;let l=`${c}`,h=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!pm(l,h,o))return s;r+=2}else{if(!pm(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Yu(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ji(s)){let l=oT(s.outlets);return new oe(r,l)}if(i===0&&qo(t[0])){let l=n.segments[e];r.push(new Fn(l.path,fm(t[0]))),i++;continue}let o=Ji(s)?s.outlets[W]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&qo(c)?(r.push(new Fn(o,fm(c))),i+=2):(r.push(new Fn(o,{})),i++)}return new oe(r,{})}function oT(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Yu(new oe([],{}),0,r))}),e}function fm(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pm(n,e,t){return n==t.path&&pt(e,t.parameters)}var Ki="imperative",Ce=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ce||{}),nt=class{constructor(e,t){this.id=e,this.url=t}},Sr=class extends nt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ce.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gt=class extends nt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ce.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qe=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qe||{}),Go=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Go||{}),ln=class extends nt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ce.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hn=class extends nt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ce.NavigationSkipped}},Yi=class extends nt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ce.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wo=class extends nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ce.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xu=class extends nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ce.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zu=class extends nt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ce.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},el=class extends nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tl=class extends nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nl=class{constructor(e){this.route=e,this.type=Ce.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rl=class{constructor(e){this.route=e,this.type=Ce.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},il=class{constructor(e){this.snapshot=e,this.type=Ce.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sl=class{constructor(e){this.snapshot=e,this.type=Ce.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ol=class{constructor(e){this.snapshot=e,this.type=Ce.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},al=class{constructor(e){this.snapshot=e,this.type=Ce.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ko=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ce.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Xi=class{},Zi=class{constructor(e){this.url=e}};var cl=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new os,this.attachRef=null}},os=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new cl,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ho=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ul(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ul(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ll(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ll(e,this._root).map(t=>t.value)}};function ul(n,e){if(n===e.value)return e;for(let t of e.children){let r=ul(n,t);if(r)return r}return null}function ll(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ll(n,t);if(r.length)return r.unshift(e),r}return[]}var He=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function wr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qo=class extends Ho{constructor(e,t){super(e),this.snapshot=t,Il(this,e)}toString(){return this.snapshot.toString()}};function Om(n){let e=aT(n),t=new Ze([new Fn("",{})]),r=new Ze({}),i=new Ze({}),s=new Ze({}),o=new Ze(""),c=new dn(t,r,s,o,i,W,n,e.root);return c.snapshot=e.root,new Qo(new He(c,[]),e)}function aT(n){let e={},t={},r={},i="",s=new es([],e,r,i,t,W,n,null,{});return new Jo("",new He(s,[]))}var dn=class{constructor(e,t,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(te(h=>h[is]))??j(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Ar(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Ar(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _l(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&xm(i)&&(r.resolve[is]=i.title),r}var es=class{get title(){return this.data?.[is]}constructor(e,t,r,i,s,o,c,l,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ar(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jo=class extends Ho{constructor(e,t){super(t),this.url=e,Il(this,t)}toString(){return Mm(this._root)}};function Il(n,e){e.value._routerState=n,e.children.forEach(t=>Il(n,t))}function Mm(n){let e=n.children.length>0?` { ${n.children.map(Mm).join(", ")} } `:"";return`${n.value}${e}`}function Gu(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),pt(e.params,t.params)||n.paramsSubject.next(t.params),VE(e.url,t.url)||n.urlSubject.next(t.url),pt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hl(n,e){let t=pt(n.params,e.params)&&jE(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hl(n.parent,e.parent))}function xm(n){return typeof n.title=="string"||n.title===null}var cT=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=F(os),this.location=F(kg),this.changeDetector=F(Mi),this.environmentInjector=F(on),this.inputBinder=F(ea,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,h=new dl(r,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:h,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ae({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[On]});let n=e;return n})(),dl=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dn?this.route:e===os?this.childContexts:this.parent.get(e,t)}},ea=new J(""),gm=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Io([i.queryParams,i.params,i.data]).pipe(We(([o,c,l],h)=>(l=V(V(V({},o),c),l),h===0?j(l):Promise.resolve(l)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let c=Ug(i.component);if(!c){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of c.inputs)r.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function uT(n,e,t){let r=ts(n,e._root,t?t._root:void 0);return new Qo(r,e)}function ts(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=lT(n,e,t);return new He(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ts(n,c)),o}}let r=hT(e.value),i=e.children.map(s=>ts(n,s));return new He(r,i)}}function lT(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ts(n,r,i);return ts(n,r)})}function hT(n){return new dn(new Ze(n.url),new Ze(n.params),new Ze(n.queryParams),new Ze(n.fragment),new Ze(n.data),n.outlet,n.component,n)}var Vm="ngNavigationCancelingError";function Lm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=br(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Fm(!1,Qe.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Fm(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Vm]=!0,t.cancellationCode=e,t}function dT(n){return Um(n)&&br(n.url)}function Um(n){return!!n&&n[Vm]}var fT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=yg({type:e,selectors:[["ng-component"]],standalone:!0,features:[Vg],decls:1,vars:0,template:function(i,s){i&1&&xg(0,"router-outlet")},dependencies:[cT],encapsulation:2});let n=e;return n})();function pT(n,e){return n.providers&&!n._injector&&(n._injector=Cu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wl(n){let e=n.children&&n.children.map(wl),t=e?he(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==W&&(t.component=fT),t}function mt(n){return n.outlet||W}function gT(n,e){let t=n.filter(r=>mt(r)===e);return t.push(...n.filter(r=>mt(r)!==e)),t}function as(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var mT=(n,e,t,r)=>te(i=>(new fl(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),fl=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=wr(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=wr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=wr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=wr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new al(s.value.snapshot))}),e.children.length&&this.forwardEvent(new sl(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Gu(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Gu(c.route.value),this.activateChildRoutes(e,null,o.children)}else{let c=as(i.snapshot);o.attachRef=null,o.route=i,o.injector=c,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Yo=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Tr=class{constructor(e,t){this.component=e,this.route=t}};function yT(n,e,t){let r=n._root,i=e?e._root:null;return zi(r,i,t,[r.value])}function vT(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Rr(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gg(n)?n:e.get(n):r}function zi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=wr(e);return n.children.forEach(o=>{_T(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Hi(c,t.getContext(o),i)),i}function _T(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=IT(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Yo(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?zi(n,e,c?c.children:null,r,i):zi(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Tr(c.outlet.component,o))}else o&&Hi(e,c,i),i.canActivateChecks.push(new Yo(r)),s.component?zi(n,null,c?c.children:null,r,i):zi(n,null,t,r,i);return i}function IT(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Un(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Un(n.url,e.url)||!pt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hl(n,e)||!pt(n.queryParams,e.queryParams);case"paramsChange":default:return!hl(n,e)}}function Hi(n,e,t){let r=wr(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Hi(o,e.children.getContext(s),t):Hi(o,null,t):Hi(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Tr(e.outlet.component,i)):t.canDeactivateChecks.push(new Tr(null,i)):t.canDeactivateChecks.push(new Tr(null,i))}function cs(n){return typeof n=="function"}function wT(n){return typeof n=="boolean"}function ET(n){return n&&cs(n.canLoad)}function TT(n){return n&&cs(n.canActivate)}function AT(n){return n&&cs(n.canActivateChild)}function bT(n){return n&&cs(n.canDeactivate)}function ST(n){return n&&cs(n.canMatch)}function jm(n){return n instanceof ug||n?.name==="EmptyError"}var Uo=Symbol("INITIAL_VALUE");function Cr(){return We(n=>Io(n.map(e=>e.pipe(pr(1),wu(Uo)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===Uo)return Uo;if(t===!1||t instanceof un)return t}return!0}),ht(e=>e!==Uo),pr(1)))}function CT(n,e){return Ge(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?j(he(V({},t),{guardsResult:!0})):RT(o,r,i,n).pipe(Ge(c=>c&&wT(c)?DT(r,s,n,e):j(c)),te(c=>he(V({},t),{guardsResult:c})))})}function RT(n,e,t,r){return Ee(n).pipe(Ge(i=>MT(i.component,i.route,t,e,r)),sn(i=>i!==!0,!0))}function DT(n,e,t,r){return Ee(e).pipe(rn(i=>lg(NT(i.route.parent,r),PT(i.route,r),OT(n,i.path,t),kT(n,i.route,t))),sn(i=>i!==!0,!0))}function PT(n,e){return n!==null&&e&&e(new ol(n)),j(!0)}function NT(n,e){return n!==null&&e&&e(new il(n)),j(!0)}function kT(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return j(!0);let i=r.map(s=>yu(()=>{let o=as(e)??t,c=Rr(s,o),l=TT(c)?c.canActivate(e,n):dt(o,()=>c(e,n));return fn(l).pipe(sn())}));return j(i).pipe(Cr())}function OT(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>vT(o)).filter(o=>o!==null).map(o=>yu(()=>{let c=o.guards.map(l=>{let h=as(o.node)??t,f=Rr(l,h),m=AT(f)?f.canActivateChild(r,n):dt(h,()=>f(r,n));return fn(m).pipe(sn())});return j(c).pipe(Cr())}));return j(s).pipe(Cr())}function MT(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return j(!0);let o=s.map(c=>{let l=as(e)??i,h=Rr(c,l),f=bT(h)?h.canDeactivate(n,e,t,r):dt(l,()=>h(n,e,t,r));return fn(f).pipe(sn())});return j(o).pipe(Cr())}function xT(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return j(!0);let s=i.map(o=>{let c=Rr(o,n),l=ET(c)?c.canLoad(e,t):dt(n,()=>c(e,t));return fn(l)});return j(s).pipe(Cr(),Bm(r))}function Bm(n){return lu(Te(e=>{if(br(e))throw Lm(n,e)}),te(e=>e===!0))}function VT(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return j(!0);let s=i.map(o=>{let c=Rr(o,n),l=ST(c)?c.canMatch(e,t):dt(n,()=>c(e,t));return fn(l)});return j(s).pipe(Cr(),Bm(r))}var ns=class{constructor(e){this.segmentGroup=e||null}},Xo=class extends Error{constructor(e){super(),this.urlTree=e}};function Ir(n){return Di(new ns(n))}function LT(n){return Di(new ce(4e3,!1))}function FT(n){return Di(Fm(!1,Qe.GuardRejected))}var pl=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return j(r);if(i.numberOfChildren>1||!i.children[W])return LT(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Xo(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new un(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new oe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ce(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},gl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UT(n,e,t,r,i){let s=El(n,e,t);return s.matched?(r=pT(e,r),VT(r,e,t,i).pipe(te(o=>o===!0?s:V({},gl)))):j(s)}function El(n,e,t){if(e.path==="**")return jT(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},gl):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xE)(t,n,e);if(!i)return V({},gl);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function jT(n){return{matched:!0,parameters:n.length>0?Im(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mm(n,e,t,r){return t.length>0&&qT(n,t,r)?{segmentGroup:new oe(e,$T(r,new oe(t,n.children))),slicedSegments:[]}:t.length===0&&zT(n,t,r)?{segmentGroup:new oe(n.segments,BT(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new oe(n.segments,n.children),slicedSegments:t}}function BT(n,e,t,r){let i={};for(let s of t)if(ta(n,e,s)&&!r[mt(s)]){let o=new oe([],{});i[mt(s)]=o}return V(V({},r),i)}function $T(n,e){let t={};t[W]=e;for(let r of n)if(r.path===""&&mt(r)!==W){let i=new oe([],{});t[mt(r)]=i}return t}function qT(n,e,t){return t.some(r=>ta(n,e,r)&&mt(r)!==W)}function zT(n,e,t){return t.some(r=>ta(n,e,r))}function ta(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function GT(n,e,t,r){return mt(n)!==r&&(r===W||!ta(e,t,n))?!1:El(e,n,t).matched}function WT(n,e,t){return e.length===0&&!n.children[t]}var ml=class{};function KT(n,e,t,r,i,s,o="emptyOnly"){return new yl(n,e,t,r,i,o,s).recognize()}var HT=31,yl=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new pl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=mm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(t=>{let r=new es([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new He(r,t),s=new Jo("",i),o=eT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(fr(r=>{if(r instanceof Xo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ns?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=_l(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(te(s=>s instanceof He?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ee(i).pipe(rn(s=>{let o=r.children[s],c=gT(t,s);return this.processSegmentGroup(e,c,o,s)}),Iu((s,o)=>(s.push(...o),s)),vu(null),fg(),Ge(s=>{if(s===null)return Ir(r);let o=$m(s);return QT(o),j(o)}))}processSegment(e,t,r,i,s,o){return Ee(t).pipe(rn(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o).pipe(fr(l=>{if(l instanceof ns)return j(null);throw l}))),sn(c=>!!c),fr(c=>{if(jm(c))return WT(r,i,s)?j(new ml):Ir(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,c){return GT(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Ir(i):Ir(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:c,consumedSegments:l,positionalParamSegments:h,remainingSegments:f}=El(t,i,s);if(!c)return Ir(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HT&&(this.allowRedirects=!1));let m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,h);return this.applyRedirects.lineralizeSegments(i,m).pipe(Ge(I=>this.processSegment(e,r,t,I.concat(f),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=UT(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(We(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(We(({routes:l})=>{let h=r._loadedInjector??e,{consumedSegments:f,remainingSegments:m,parameters:I}=c,C=new es(f,I,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,YT(r),mt(r),r.component??r._loadedComponent??null,r,XT(r)),{segmentGroup:N,slicedSegments:O}=mm(t,f,m,l);if(O.length===0&&N.hasChildren())return this.processChildren(h,l,N).pipe(te(M=>M===null?null:new He(C,M)));if(l.length===0&&O.length===0)return j(new He(C,[]));let R=mt(r)===s;return this.processSegment(h,l,N,O,R?W:s,!0).pipe(te(M=>new He(C,M instanceof He?[M]:[])))}))):Ir(t)))}getChildConfig(e,t,r){return t.children?j({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?j({routes:t._loadedRoutes,injector:t._loadedInjector}):xT(e,t,r,this.urlSerializer).pipe(Ge(i=>i?this.configLoader.loadChildren(e,t).pipe(Te(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):FT(t))):j({routes:[],injector:e})}};function QT(n){n.sort((e,t)=>e.value.outlet===W?-1:t.value.outlet===W?1:e.value.outlet.localeCompare(t.value.outlet))}function JT(n){let e=n.value.routeConfig;return e&&e.path===""}function $m(n){let e=[],t=new Set;for(let r of n){if(!JT(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$m(r.children);e.push(new He(r.value,i))}return e.filter(r=>!t.has(r))}function YT(n){return n.data||{}}function XT(n){return n.resolve||{}}function ZT(n,e,t,r,i,s){return Ge(o=>KT(n,e,t,r,o.extractedUrl,i,s).pipe(te(({state:c,tree:l})=>he(V({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function eA(n,e){return Ge(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return j(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let h of qm(l))o.add(h);let c=0;return Ee(o).pipe(rn(l=>s.has(l)?tA(l,r,n,e):(l.data=_l(l,l.parent,n).resolve,j(void 0))),Te(()=>c++),_u(1),Ge(l=>c===o.size?j(t):nn))})}function qm(n){let e=n.children.map(t=>qm(t)).flat();return[n,...e]}function tA(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!xm(i)&&(s[is]=i.title),nA(s,n,e,r).pipe(te(o=>(n._resolvedData=o,n.data=_l(n,n.parent,t).resolve,null)))}function nA(n,e,t,r){let i=Hu(n);if(i.length===0)return j({});let s={};return Ee(i).pipe(Ge(o=>rA(n[o],e,t,r).pipe(sn(),Te(c=>{s[o]=c}))),_u(1),dg(s),fr(o=>jm(o)?nn:Di(o)))}function rA(n,e,t,r){let i=as(e)??r,s=Rr(n,i),o=s.resolve?s.resolve(e,t):dt(i,()=>s(e,t));return fn(o)}function Wu(n){return We(e=>{let t=n(e);return t?Ee(t).pipe(te(()=>e)):j(e)})}var zm=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[is]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>F(iA),providedIn:"root"});let n=e;return n})(),iA=(()=>{let e=class e extends zm{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(H(lm))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),us=new J("",{providedIn:"root",factory:()=>({})}),rs=new J(""),Tl=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(bo)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return j(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=fn(r.loadComponent()).pipe(te(Gm),Te(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),kn(()=>{this.componentLoaders.delete(r)})),s=new du(i,()=>new tn).pipe(hu());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return j({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=sA(i,this.compiler,r,this.onLoadEndListener).pipe(kn(()=>{this.childrenLoaders.delete(i)})),c=new du(o,()=>new tn).pipe(hu());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function sA(n,e,t,r){return fn(n.loadChildren()).pipe(te(Gm),Ge(i=>i instanceof Mg||Array.isArray(i)?j(i):Ee(e.compileModuleAsync(i))),te(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(rs,[],{optional:!0,self:!0}).flat()),{routes:o.map(wl),injector:s}}))}function oA(n){return n&&typeof n=="object"&&"default"in n}function Gm(n){return oA(n)?n.default:n}var Al=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>F(aA),providedIn:"root"});let n=e;return n})(),aA=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Wm=new J(""),Km=new J("");function cA(n,e,t){let r=n.get(Km),i=n.get(qe);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=i.startViewTransition(()=>(s(),uA(n))),{onViewTransitionCreated:l}=r;return l&&dt(n,()=>l({transition:c,from:e,to:t})),o})}function uA(n){return new Promise(e=>{Su(e,{injector:n})})}var bl=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tn,this.transitionAbortSubject=new tn,this.configLoader=F(Tl),this.environmentInjector=F(on),this.urlSerializer=F(ss),this.rootContexts=F(os),this.location=F(Vi),this.inputBindingEnabled=F(ea,{optional:!0})!==null,this.titleStrategy=F(zm),this.options=F(us,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Al),this.createViewTransition=F(Wm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>j(void 0),this.rootComponentType=null;let r=s=>this.events.next(new nl(s)),i=s=>this.events.next(new rl(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(he(V(V({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ki,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ht(o=>o.id!==0),te(o=>he(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),We(o=>{let c=!1,l=!1;return j(o).pipe(We(h=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qe.SupersededByNewNavigation),nn;this.currentTransition=o,this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?he(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=h.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&m!=="reload"){let I="";return this.events.next(new hn(h.id,this.urlSerializer.serialize(h.rawUrl),I,Go.IgnoredSameUrlNavigation)),h.resolve(null),nn}if(this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return j(h).pipe(We(I=>{let C=this.transitions?.getValue();return this.events.next(new Sr(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),C!==this.transitions?.getValue()?nn:Promise.resolve(I)}),ZT(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(I=>{o.targetSnapshot=I.targetSnapshot,o.urlAfterRedirects=I.urlAfterRedirects,this.currentNavigation=he(V({},this.currentNavigation),{finalUrl:I.urlAfterRedirects});let C=new Wo(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(C)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(h.currentRawUrl)){let{id:I,extractedUrl:C,source:N,restoredState:O,extras:R}=h,M=new Sr(I,this.urlSerializer.serialize(C),N,O);this.events.next(M);let q=Om(this.rootComponentType).snapshot;return this.currentTransition=o=he(V({},h),{targetSnapshot:q,urlAfterRedirects:C,extras:he(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,j(o)}else{let I="";return this.events.next(new hn(h.id,this.urlSerializer.serialize(h.extractedUrl),I,Go.IgnoredByUrlHandlingStrategy)),h.resolve(null),nn}}),Te(h=>{let f=new Xu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),te(h=>(this.currentTransition=o=he(V({},h),{guards:yT(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),o)),CT(this.environmentInjector,h=>this.events.next(h)),Te(h=>{if(o.guardsResult=h.guardsResult,br(h.guardsResult))throw Lm(this.urlSerializer,h.guardsResult);let f=new Zu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(f)}),ht(h=>h.guardsResult?!0:(this.cancelNavigationTransition(h,"",Qe.GuardRejected),!1)),Wu(h=>{if(h.guards.canActivateChecks.length)return j(h).pipe(Te(f=>{let m=new el(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),We(f=>{let m=!1;return j(f).pipe(eA(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(f,"",Qe.NoDataFromResolver)}}))}),Te(f=>{let m=new tl(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Wu(h=>{let f=m=>{let I=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(m.routeConfig).pipe(Te(C=>{m.component=C}),te(()=>{})));for(let C of m.children)I.push(...f(C));return I};return Io(f(h.targetSnapshot.root)).pipe(vu(null),pr(1))}),Wu(()=>this.afterPreactivation()),We(()=>{let{currentSnapshot:h,targetSnapshot:f}=o,m=this.createViewTransition?.(this.environmentInjector,h.root,f.root);return m?Ee(m).pipe(te(()=>o)):j(o)}),te(h=>{let f=uT(r.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return this.currentTransition=o=he(V({},h),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Te(()=>{this.events.next(new Xi)}),mT(this.rootContexts,r.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),pr(1),Te({next:h=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gt(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects))),this.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{c=!0}}),pg(this.transitionAbortSubject.pipe(Te(h=>{throw h}))),kn(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",Qe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),fr(h=>{if(l=!0,Um(h))this.events.next(new ln(o.id,this.urlSerializer.serialize(o.extractedUrl),h.message,h.cancellationCode)),dT(h)?this.events.next(new Zi(h.url)):o.resolve(!1);else{this.events.next(new Yi(o.id,this.urlSerializer.serialize(o.extractedUrl),h,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(h))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return nn}))}))}cancelNavigationTransition(r,i,s){let o=new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function lA(n){return n!==Ki}var hA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>F(dA),providedIn:"root"});let n=e;return n})(),vl=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},dA=(()=>{let e=class e extends vl{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=an(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Hm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>F(fA),providedIn:"root"});let n=e;return n})(),fA=(()=>{let e=class e extends Hm{constructor(){super(...arguments),this.location=F(Vi),this.urlSerializer=F(ss),this.options=F(us,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Al),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new un,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Om(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Sr)this.stateMemento=this.createStateMemento();else if(r instanceof hn)this.rawUrlTree=i.initialUrl;else if(r instanceof Wo){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Xi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ln&&(r.code===Qe.GuardRejected||r.code===Qe.NoDataFromResolver)?this.restoreHistory(i):r instanceof Yi?this.restoreHistory(i,!0):r instanceof gt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,c=V(V({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",c)}else{let o=V(V({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=an(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Gi=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Gi||{});function Qm(n,e){n.events.pipe(ht(t=>t instanceof gt||t instanceof ln||t instanceof Yi||t instanceof hn),te(t=>t instanceof gt||t instanceof hn?Gi.COMPLETE:(t instanceof ln?t.code===Qe.Redirect||t.code===Qe.SupersededByNewNavigation:!1)?Gi.REDIRECTING:Gi.FAILED),ht(t=>t!==Gi.REDIRECTING),pr(1)).subscribe(()=>{e()})}function pA(n){throw n}var gA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Lt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F(wo),this.stateManager=F(Hm),this.options=F(us,{optional:!0})||{},this.pendingTasks=F(ki),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(bl),this.urlSerializer=F(ss),this.location=F(Vi),this.urlHandlingStrategy=F(Al),this._events=new tn,this.errorHandler=this.options.errorHandler||pA,this.navigated=!1,this.routeReuseStrategy=F(hA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(rs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(ea,{optional:!0}),this.eventsSubscription=new sg,this.isNgZoneEnabled=F(me)instanceof me&&me.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ln&&i.code!==Qe.Redirect&&i.code!==Qe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof gt)this.navigated=!0;else if(i instanceof Zi){let c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||lA(s.source)};this.scheduleNavigation(c,Ki,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}vA(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ki,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let h=V({},s);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(o.state=h)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(wl),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:h}=i,f=h?this.currentUrlTree.fragment:c,m=null;switch(l){case"merge":m=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let I;try{let C=s?s.snapshot:this.routerState.snapshot.root;I=Dm(C)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),I=this.currentUrlTree.root}return Pm(I,r,m,f??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=br(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ki,null,i)}navigate(r,i={skipLocationChange:!1}){return yA(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=V({},gA):i===!1?s=V({},mA):s=i,br(r))return hm(this.currentUrlTree,r,s);let o=this.parseUrl(r);return hm(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,h,f;c?(l=c.resolve,h=c.reject,f=c.promise):f=new Promise((I,C)=>{l=I,h=C});let m=this.pendingTasks.add();return Qm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(I=>Promise.reject(I))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function yA(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ce(4008,!1)}function vA(n){return!(n instanceof Xi)&&!(n instanceof Zi)}var pN=(()=>{let e=class e{constructor(r,i,s,o,c,l){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new tn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let h=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=h==="a"||h==="area",this.isAnchorElement?this.subscription=r.events.subscribe(f=>{f instanceof gt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,c){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||i||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let h={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,h),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Dg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(Y(Lt),Y(dn),_g("tabindex"),Y(Vn),Y(Mn),Y(xi))},e.\u0275dir=Ae({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&xt("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),i&2&&Ru("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ke.HasDecoratorInputTransform,"preserveFragment","preserveFragment",yr],skipLocationChange:[Ke.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",yr],replaceUrl:[Ke.HasDecoratorInputTransform,"replaceUrl","replaceUrl",yr],routerLink:"routerLink"},standalone:!0,features:[Og,On]});let n=e;return n})();var Zo=class{};var _A=(()=>{let e=class e{constructor(r,i,s,o,c){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ht(r=>r instanceof gt),rn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Cu(o.providers,r,`Route: ${o.path}`));let c=o._injector??r,l=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Ee(s).pipe(mu())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=j(null);let o=s.pipe(Ge(c=>c===null?j(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??r,c.routes))));if(i.loadComponent&&!i._loadedComponent){let c=this.loader.loadComponent(i);return Ee([o,c]).pipe(mu())}else return o})}};e.\u0275fac=function(i){return new(i||e)(H(Lt),H(bo),H(on),H(Zo),H(Tl))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jm=new J(""),IA=(()=>{let e=class e{constructor(r,i,s,o,c={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=F(on),c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Sr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof gt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof hn&&r.code===Go.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ko&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Su(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Ko(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Pg()},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function gN(n,...e){return ot([{provide:rs,multi:!0,useValue:n},[],{provide:dn,useFactory:Ym,deps:[Lt]},{provide:To,multi:!0,useFactory:Xm},e.map(t=>t.\u0275providers)])}function Ym(n){return n.routerState.root}function ls(n,e){return{\u0275kind:n,\u0275providers:e}}function Xm(){let n=F(ft);return e=>{let t=n.get(Ao);if(e!==t.components[0])return;let r=n.get(Lt),i=n.get(Zm);n.get(Sl)===1&&r.initialNavigation(),n.get(ey,null,Eu.Optional)?.setUpPreloading(),n.get(Jm,null,Eu.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Zm=new J("",{factory:()=>new tn}),Sl=new J("",{providedIn:"root",factory:()=>1});function wA(){return ls(2,[{provide:Sl,useValue:0},{provide:Pu,multi:!0,deps:[ft],useFactory:e=>{let t=e.get($g,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Lt),s=e.get(Zm);Qm(i,()=>{r(!0)}),e.get(bl).afterPreactivation=()=>(r(!0),s.closed?j(void 0):s),i.initialNavigation()}))}}])}function EA(){return ls(3,[{provide:Pu,multi:!0,useFactory:()=>{let e=F(Lt);return()=>{e.setUpLocationChangeListener()}}},{provide:Sl,useValue:2}])}var ey=new J("");function TA(n){return ls(0,[{provide:ey,useExisting:_A},{provide:Zo,useExisting:n}])}function AA(){return ls(8,[gm,{provide:ea,useExisting:gm}])}function bA(n){let e=[{provide:Wm,useValue:cA},{provide:Km,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return ls(9,e)}var ym=new J("ROUTER_FORROOT_GUARD"),SA=[Vi,{provide:ss,useClass:Qi},Lt,os,{provide:dn,useFactory:Ym,deps:[Lt]},Tl,[]],mN=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[SA,[],{provide:rs,multi:!0,useValue:r},{provide:ym,useFactory:PA,deps:[[Lt,new Be,new mg]]},{provide:us,useValue:i||{}},i?.useHash?RA():DA(),CA(),i?.preloadingStrategy?TA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?NA(i):[],i?.bindToComponentInputs?AA().\u0275providers:[],i?.enableViewTransitions?bA().\u0275providers:[],kA()]}}static forChild(r){return{ngModule:e,providers:[{provide:rs,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(H(ym,8))},e.\u0275mod=Ot({type:e}),e.\u0275inj=kt({});let n=e;return n})();function CA(){return{provide:Jm,useFactory:()=>{let n=F(Wg),e=F(me),t=F(us),r=F(bl),i=F(ss);return t.scrollOffset&&n.setOffset(t.scrollOffset),new IA(i,r,n,e,t)}}}function RA(){return{provide:xi,useClass:zg}}function DA(){return{provide:xi,useClass:qg}}function PA(n){return"guarded"}function NA(n){return[n.initialNavigation==="disabled"?EA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?wA().\u0275providers:[]]}var vm=new J("");function kA(){return[{provide:vm,useFactory:Xm},{provide:To,multi:!0,useExisting:vm}]}var hy=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Y(Vn),Y(Mn))},e.\u0275dir=Ae({type:e});let n=e;return n})(),ua=(()=>{let e=class e extends hy{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=an(e)))(s||e)}})(),e.\u0275dir=Ae({type:e,features:[tt]});let n=e;return n})(),kr=new J("");var OA={provide:kr,useExisting:Nt(()=>dy),multi:!0};function MA(){let n=vr()?vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var xA=new J(""),dy=(()=>{let e=class e extends hy{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!MA())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Y(Vn),Y(Mn),Y(xA,8))},e.\u0275dir=Ae({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&xt("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[Vt([OA]),tt]});let n=e;return n})();function pn(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function fy(n){return n!=null&&typeof n.length=="number"}var la=new J(""),ha=new J(""),VA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ty=class{static min(e){return LA(e)}static max(e){return FA(e)}static required(e){return UA(e)}static requiredTrue(e){return jA(e)}static email(e){return BA(e)}static minLength(e){return $A(e)}static maxLength(e){return qA(e)}static pattern(e){return zA(e)}static nullValidator(e){return py(e)}static compose(e){return Iy(e)}static composeAsync(e){return wy(e)}};function LA(n){return e=>{if(pn(e.value)||pn(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function FA(n){return e=>{if(pn(e.value)||pn(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function UA(n){return pn(n.value)?{required:!0}:null}function jA(n){return n.value===!0?null:{required:!0}}function BA(n){return pn(n.value)||VA.test(n.value)?null:{email:!0}}function $A(n){return e=>pn(e.value)||!fy(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function qA(n){return e=>fy(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function zA(n){if(!n)return py;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(pn(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function py(n){return null}function gy(n){return n!=null}function my(n){return Eo(n)?Ee(n):n}function yy(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function vy(n,e){return e.map(t=>t(n))}function GA(n){return!n.validate}function _y(n){return n.map(e=>GA(e)?e:t=>e.validate(t))}function Iy(n){if(!n)return null;let e=n.filter(gy);return e.length==0?null:function(t){return yy(vy(t,e))}}function Pl(n){return n!=null?Iy(_y(n)):null}function wy(n){if(!n)return null;let e=n.filter(gy);return e.length==0?null:function(t){let r=vy(t,e).map(my);return hg(r).pipe(te(yy))}}function Nl(n){return n!=null?wy(_y(n)):null}function ny(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ey(n){return n._rawValidators}function Ty(n){return n._rawAsyncValidators}function Cl(n){return n?Array.isArray(n)?n:[n]:[]}function ra(n,e){return Array.isArray(n)?n.includes(e):n===e}function ry(n,e){let t=Cl(e);return Cl(n).forEach(i=>{ra(t,i)||t.push(i)}),t}function iy(n,e){return Cl(e).filter(t=>!ra(n,t))}var ia=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Pl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ft=class extends ia{get formDirective(){return null}get path(){return null}},jn=class extends ia{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},sa=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},WA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},MN=he(V({},WA),{"[class.ng-submitted]":"isSubmitted"}),xN=(()=>{let e=class e extends sa{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Y(jn,2))},e.\u0275dir=Ae({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Du("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[tt]});let n=e;return n})(),VN=(()=>{let e=class e extends sa{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Y(Ft,10))},e.\u0275dir=Ae({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Du("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[tt]});let n=e;return n})();var hs="VALID",na="INVALID",Dr="PENDING",ds="DISABLED";function kl(n){return(da(n)?n.validators:n)||null}function KA(n){return Array.isArray(n)?Pl(n):n||null}function Ol(n,e){return(da(e)?e.asyncValidators:n)||null}function HA(n){return Array.isArray(n)?Nl(n):n||null}function da(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Ay(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ce(1e3,"");if(!r[t])throw new ce(1001,"")}function by(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ce(1002,"")})}var Pr=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hs}get invalid(){return this.status===na}get pending(){return this.status==Dr}get disabled(){return this.status===ds}get enabled(){return this.status!==ds}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ry(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ry(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iy(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iy(e,this._rawAsyncValidators))}hasValidator(e){return ra(this._rawValidators,e)}hasAsyncValidator(e){return ra(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ds,this.errors=null,this._forEachChild(r=>{r.disable(he(V({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(V({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hs,this._forEachChild(r=>{r.enable(he(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(V({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hs||this.status===Dr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ds:hs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dr,this._hasOwnPendingAsyncValidator=!0;let t=my(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?ds:this.errors?na:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dr)?Dr:this._anyControlsHaveStatus(na)?na:hs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){da(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KA(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=HA(this._rawAsyncValidators)}},Nr=class extends Pr{constructor(e,t,r){super(kl(t),Ol(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){by(this,!0,e),Object.keys(e).forEach(r=>{Ay(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Rl=class extends Nr{};var gs=new J("CallSetDisabledState",{providedIn:"root",factory:()=>fa}),fa="always";function Sy(n,e){return[...e.path,n]}function oa(n,e,t=fa){Ml(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),JA(n,e),XA(n,e),YA(n,e),QA(n,e)}function sy(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ca(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function aa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QA(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Ml(n,e){let t=Ey(n);e.validator!==null?n.setValidators(ny(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ty(n);e.asyncValidator!==null?n.setAsyncValidators(ny(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();aa(e._rawValidators,i),aa(e._rawAsyncValidators,i)}function ca(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Ey(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Ty(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return aa(e._rawValidators,r),aa(e._rawAsyncValidators,r),t}function JA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Cy(n,e)})}function YA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Cy(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Cy(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function XA(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Ry(n,e){n==null,Ml(n,e)}function ZA(n,e){return ca(n,e)}function Dy(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function eb(n){return Object.getPrototypeOf(n.constructor)===ua}function Py(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ny(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===dy?t=s:eb(s)?r=s:i=s}),i||r||t||null}function tb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var nb={provide:Ft,useExisting:Nt(()=>rb)},fs=Promise.resolve(),rb=(()=>{let e=class e extends Ft{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new et,this.form=new Nr({},Pl(r),Nl(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){fs.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),oa(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){fs.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){fs.then(()=>{let i=this._findContainer(r.path),s=new Nr({});Ry(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){fs.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){fs.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Py(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(Y(la,10),Y(ha,10),Y(gs,8))},e.\u0275dir=Ae({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&xt("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[Ke.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vt([nb]),tt]});let n=e;return n})();function oy(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ay(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ps=class extends Pr{constructor(e=null,t,r){super(kl(t),Ol(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),da(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ay(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oy(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oy(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ay(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ib=n=>n instanceof ps;var sb={provide:jn,useExisting:Nt(()=>ob)},cy=Promise.resolve(),ob=(()=>{let e=class e extends jn{constructor(r,i,s,o,c,l){super(),this._changeDetectorRef=c,this.callSetDisabledState=l,this.control=new ps,this._registered=!1,this.name="",this.update=new et,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Ny(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Dy(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){oa(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){cy.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&yr(i);cy.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Sy(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(Y(Ft,9),Y(la,10),Y(ha,10),Y(kr,10),Y(Mi,8),Y(gs,8))},e.\u0275dir=Ae({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ke.None,"disabled","isDisabled"],model:[Ke.None,"ngModel","model"],options:[Ke.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vt([sb]),tt,On]});let n=e;return n})(),FN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ae({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),ab={provide:kr,useExisting:Nt(()=>cb),multi:!0},cb=(()=>{let e=class e extends ua{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=an(e)))(s||e)}})(),e.\u0275dir=Ae({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&xt("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[Vt([ab]),tt]});let n=e;return n})();var ky=new J("");var ub={provide:Ft,useExisting:Nt(()=>lb)},lb=(()=>{let e=class e extends Ft{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new et,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ca(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return oa(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){sy(r.control||null,r,!1),tb(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,Py(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(sy(i||null,r),ib(s)&&(oa(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);Ry(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&ZA(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ml(this.form,this),this._oldForm&&ca(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(Y(la,10),Y(ha,10),Y(gs,8))},e.\u0275dir=Ae({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&xt("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:[Ke.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vt([ub]),tt,On]});let n=e;return n})();var hb={provide:jn,useExisting:Nt(()=>db)},db=(()=>{let e=class e extends jn{set isDisabled(r){}constructor(r,i,s,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new et,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Ny(this,o)}ngOnChanges(r){this._added||this._setUpControl(),Dy(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return Sy(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(Y(Ft,13),Y(la,10),Y(ha,10),Y(kr,10),Y(ky,8))},e.\u0275dir=Ae({type:e,selectors:[["","formControlName",""]],inputs:{name:[Ke.None,"formControlName","name"],isDisabled:[Ke.None,"disabled","isDisabled"],model:[Ke.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Vt([hb]),tt,On]});let n=e;return n})(),fb={provide:kr,useExisting:Nt(()=>My),multi:!0};function Oy(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function pb(n){return n.split(":")[0]}var My=(()=>{let e=class e extends ua{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=Oy(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=pb(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=an(e)))(s||e)}})(),e.\u0275dir=Ae({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&xt("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vt([fb]),tt]});let n=e;return n})(),UN=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(Oy(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Y(Mn),Y(Vn),Y(My,9))},e.\u0275dir=Ae({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),gb={provide:kr,useExisting:Nt(()=>xy),multi:!0};function uy(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function mb(n){return n.split(":")[0]}var xy=(()=>{let e=class e extends ua{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,c)=>{o._setSelected(s.indexOf(c.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let c=o;for(let l=0;l<c.length;l++){let h=c[l],f=this._getOptionValue(h.value);s.push(f)}}else{let c=i.options;for(let l=0;l<c.length;l++){let h=c[l];if(h.selected){let f=this._getOptionValue(h.value);s.push(f)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=mb(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=an(e)))(s||e)}})(),e.\u0275dir=Ae({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&xt("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vt([gb]),tt]});let n=e;return n})(),jN=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(uy(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(uy(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Y(Mn),Y(Vn),Y(xy,9))},e.\u0275dir=Ae({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var Vy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ot({type:e}),e.\u0275inj=kt({});let n=e;return n})(),Dl=class extends Pr{constructor(e,t,r){super(kl(t),Ol(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){by(this,!1,e),e.forEach((r,i)=>{Ay(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function ly(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var BN=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return ly(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Nr(s,o)}record(r,i=null){let s=this._reduceControls(r);return new Rl(s,i)}control(r,i,s){let o={};return this.useNonNullable?(ly(i)?o=i:(o.validators=i,o.asyncValidators=s),new ps(r,he(V({},o),{nonNullable:!0}))):new ps(r,i,s)}array(r,i,s){let o=r.map(c=>this._createControl(c));return new Dl(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof ps)return r;if(r instanceof Pr)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $N=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:gs,useValue:r.callSetDisabledState??fa}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ot({type:e}),e.\u0275inj=kt({imports:[Vy]});let n=e;return n})(),qN=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ky,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:gs,useValue:r.callSetDisabledState??fa}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ot({type:e}),e.\u0275inj=kt({imports:[Vy]});let n=e;return n})();var Fy=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yb=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Uy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,f=s>>2,m=(s&3)<<4|c>>4,I=(c&15)<<2|h>>6,C=h&63;l||(C=64,o||(I=64)),r.push(t[f],t[m],t[I],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||m==null)throw new Vl;let I=s<<2|c>>4;if(r.push(I),h!==64){let C=c<<4&240|h>>2;if(r.push(C),m!==64){let N=h<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Vl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vb=function(n){let e=Fy(n);return Uy.encodeByteArray(e,!0)},ms=function(n){return vb(n).replace(/\./g,"")},Fl=function(n){try{return Uy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _b(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ib=()=>_b().__FIREBASE_DEFAULTS__,wb=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Eb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Fl(n[1]);return e&&JSON.parse(e)},ga=()=>{try{return Ib()||wb()||Eb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ul=n=>{var e,t;return(t=(e=ga())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},jy=n=>{let e=Ul(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jl=()=>{var n;return(n=ga())===null||n===void 0?void 0:n.config},Bl=n=>{var e;return(e=ga())===null||e===void 0?void 0:e[`_${n}`]};var pa=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function By(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ms(JSON.stringify(t)),ms(JSON.stringify(o)),""].join(".")}function be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function Tb(){var n;let e=(n=ga())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gy(){let n=be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Wy(){return!Tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $l(){try{return typeof indexedDB=="object"}catch{return!1}}function Ky(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Ab="FirebaseError",Je=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Ab,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}},Ut=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bb(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Je(i,c,r)}};function bb(n,e){return n.replace(Sb,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Sb=/\{\$([^}]+)}/g;function Hy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Ly(s)&&Ly(o)){if(!Bn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Ly(n){return n!==null&&typeof n=="object"}function ys(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Or(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Mr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Qy(n,e){let t=new Ll(n,e);return t.subscribe.bind(t)}var Ll=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Cb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xl),i.error===void 0&&(i.error=xl),i.complete===void 0&&(i.complete=xl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Cb(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xl(){}var WN=4*60*60*1e3;function ye(n){return n&&n._delegate?n._delegate:n}var rt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $n="[DEFAULT]";var ql=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new pa;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Db(e))try{this.getOrInitializeService({instanceIdentifier:$n})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=$n){return this.instances.has(e)}getOptions(e=$n){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$n){return this.component?this.component.multipleInstances?e:$n:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Rb(n){return n===$n?void 0:n}function Db(n){return n.instantiationMode==="EAGER"}var ma=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ql(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Pb=[],Z=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Z||{}),Nb={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},kb=Z.INFO,Ob={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Mb=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ob[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},gn=class{constructor(e){this.name=e,this._logLevel=kb,this._logHandler=Mb,this._userLogHandler=null,Pb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var xb=(n,e)=>e.some(t=>n instanceof t),Jy,Yy;function Vb(){return Jy||(Jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lb(){return Yy||(Yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Xy=new WeakMap,Gl=new WeakMap,Zy=new WeakMap,zl=new WeakMap,Kl=new WeakMap;function Fb(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(yt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Xy.set(t,n)}).catch(()=>{}),Kl.set(e,n),e}function Ub(n){if(Gl.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Gl.set(n,e)}var Wl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gl.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ev(n){Wl=n(Wl)}function jb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ya(this),e,...t);return Zy.set(r,e.sort?e.sort():[e]),yt(r)}:Lb().includes(n)?function(...e){return n.apply(ya(this),e),yt(Xy.get(this))}:function(...e){return yt(n.apply(ya(this),e))}}function Bb(n){return typeof n=="function"?jb(n):(n instanceof IDBTransaction&&Ub(n),xb(n,Vb())?new Proxy(n,Wl):n)}function yt(n){if(n instanceof IDBRequest)return Fb(n);if(zl.has(n))return zl.get(n);let e=Bb(n);return e!==n&&(zl.set(n,e),Kl.set(e,n)),e}var ya=n=>Kl.get(n);function nv(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=yt(o);return r&&o.addEventListener("upgradeneeded",l=>{r(yt(o.result),l.oldVersion,l.newVersion,yt(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var $b=["get","getKey","getAll","getAllKeys","count"],qb=["put","add","delete","clear"],Hl=new Map;function tv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hl.get(e))return Hl.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$b.includes(t)))return;let s=function(o,...c){return _(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),h=l.store;return r&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),i&&l.done]))[0]})};return Hl.set(e,s),s}ev(n=>he(V({},n),{get:(e,t,r)=>tv(e,t)||n.get(e,t,r),has:(e,t)=>!!tv(e,t)||n.has(e,t)}));var Jl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zb(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function zb(n){let e=n.getComponent();return e?.type==="VERSION"}var Yl="@firebase/app",rv="0.10.5";var qn=new gn("@firebase/app"),Gb="@firebase/app-compat",Wb="@firebase/analytics-compat",Kb="@firebase/analytics",Hb="@firebase/app-check-compat",Qb="@firebase/app-check",Jb="@firebase/auth",Yb="@firebase/auth-compat",Xb="@firebase/database",Zb="@firebase/database-compat",eS="@firebase/functions",tS="@firebase/functions-compat",nS="@firebase/installations",rS="@firebase/installations-compat",iS="@firebase/messaging",sS="@firebase/messaging-compat",oS="@firebase/performance",aS="@firebase/performance-compat",cS="@firebase/remote-config",uS="@firebase/remote-config-compat",lS="@firebase/storage",hS="@firebase/storage-compat",dS="@firebase/firestore",fS="@firebase/vertexai-preview",pS="@firebase/firestore-compat",gS="firebase",mS="10.12.2";var Xl="[DEFAULT]",yS={[Yl]:"fire-core",[Gb]:"fire-core-compat",[Kb]:"fire-analytics",[Wb]:"fire-analytics-compat",[Qb]:"fire-app-check",[Hb]:"fire-app-check-compat",[Jb]:"fire-auth",[Yb]:"fire-auth-compat",[Xb]:"fire-rtdb",[Zb]:"fire-rtdb-compat",[eS]:"fire-fn",[tS]:"fire-fn-compat",[nS]:"fire-iid",[rS]:"fire-iid-compat",[iS]:"fire-fcm",[sS]:"fire-fcm-compat",[oS]:"fire-perf",[aS]:"fire-perf-compat",[cS]:"fire-rc",[uS]:"fire-rc-compat",[lS]:"fire-gcs",[hS]:"fire-gcs-compat",[dS]:"fire-fst",[pS]:"fire-fst-compat",[fS]:"fire-vertex","fire-js":"fire-js",[gS]:"fire-js-all"};var vs=new Map,vS=new Map,Zl=new Map;function iv(n,e){try{n.container.addComponent(e)}catch(t){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yn(n){let e=n.name;if(Zl.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Zl.set(e,n);for(let t of vs.values())iv(t,n);for(let t of vS.values())iv(t,n);return!0}function Is(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function at(n){return n.settings!==void 0}var _S={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mn=new Ut("app","Firebase",_S);var eh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}};var vn=mS;function rh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Xl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mn.create("bad-app-name",{appName:String(i)});if(t||(t=jl()),!t)throw mn.create("no-options");let s=vs.get(i);if(s){if(Bn(t,s.options)&&Bn(r,s.config))return s;throw mn.create("duplicate-app",{appName:i})}let o=new ma(i);for(let l of Zl.values())o.addComponent(l);let c=new eh(t,r,o);return vs.set(i,c),c}function xr(n=Xl){let e=vs.get(n);if(!e&&n===Xl&&jl())return rh();if(!e)throw mn.create("no-app",{appName:n});return e}function va(){return Array.from(vs.values())}function Se(n,e,t){var r;let i=(r=yS[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(c.join(" "));return}yn(new rt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var IS="firebase-heartbeat-database",wS=1,_s="firebase-heartbeat-store",Ql=null;function cv(){return Ql||(Ql=nv(IS,wS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_s)}catch(t){console.warn(t)}}}}).catch(n=>{throw mn.create("idb-open",{originalErrorMessage:n.message})})),Ql}function ES(n){return _(this,null,function*(){try{let t=(yield cv()).transaction(_s),r=yield t.objectStore(_s).get(uv(n));return yield t.done,r}catch(e){if(e instanceof Je)qn.warn(e.message);else{let t=mn.create("idb-get",{originalErrorMessage:e?.message});qn.warn(t.message)}}})}function sv(n,e){return _(this,null,function*(){try{let r=(yield cv()).transaction(_s,"readwrite");yield r.objectStore(_s).put(e,uv(n)),yield r.done}catch(t){if(t instanceof Je)qn.warn(t.message);else{let r=mn.create("idb-set",{originalErrorMessage:t?.message});qn.warn(r.message)}}})}function uv(n){return`${n.name}!${n.options.appId}`}var TS=1024,AS=30*24*60*60*1e3,th=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new nh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ov();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=AS}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return _(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ov(),{heartbeatsToSend:r,unsentEntries:i}=bS(this._heartbeatsCache.heartbeats),s=ms(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function ov(){return new Date().toISOString().substring(0,10)}function bS(n,e=TS){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),av(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),av(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var nh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return $l()?Ky().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ES(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function av(n){return ms(JSON.stringify({version:2,heartbeats:n})).length}function SS(n){yn(new rt("platform-logger",e=>new Jl(e),"PRIVATE")),yn(new rt("heartbeat",e=>new th(e),"PRIVATE")),Se(Yl,rv,n),Se(Yl,rv,"esm2017"),Se("fire-js","")}SS("");var CS="firebase",RS="10.12.2";Se(CS,RS,"app");var Gn=new Oi("ANGULARFIRE2_VERSION");function Ia(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ws=(n,e)=>{let t=e?[e]:va(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Lr=class{constructor(){return ws(DS)}},DS="app-check";function Vr(){}var _a=class{zone;delegate;constructor(e,t=ag){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},ih=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vr,{},Vr,Vr)),t.pipe(Te({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Fr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _a(Zone.current)),this.insideAngular=t.run(()=>new _a(Zone.current,og)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(H(me))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wa(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function PS(n){return wa().ngZone.runOutsideAngular(()=>n())}function zn(n){return wa().ngZone.run(()=>n())}function NS(n){return kS(wa())(n)}function kS(n){return function(t){return t=t.lift(new ih(n.ngZone)),t.pipe(gu(n.outsideAngular),pu(n.insideAngular))}}var OS=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),zn(()=>n.apply(void 0,r))},Re=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=zn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vr,{},Vr,Vr))),r[s]=OS(r[s],t));let i=PS(()=>n.apply(this,r));if(!e)if(i instanceof Pt){let s=wa();return i.pipe(gu(s.outsideAngular),pu(s.insideAngular))}else return zn(()=>i);return i instanceof Pt?i.pipe(NS):i instanceof Promise?zn(()=>new Promise((s,o)=>i.then(c=>zn(()=>s(c)),c=>zn(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:zn(()=>i)};var jt=class{constructor(e){return e}},Wn=class{constructor(){return va()}};function MS(n){return n&&n.length===1?n[0]:new jt(xr())}var sh=new J("angularfire2._apps"),xS={provide:jt,useFactory:MS,deps:[[new Be,sh]]},VS={provide:Wn,deps:[[new Be,sh]]};function LS(n){return(e,t)=>{let r=t.get(Mt);Se("angularfire",Gn.full,"core"),Se("angularfire",Gn.full,"app"),Se("angular",Lg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new jt(i)}}function Nk(n,...e){return ot([xS,VS,{provide:sh,useFactory:LS(n),multi:!0,deps:[me,ft,Fr,...e]}])}var kk=Re(rh,!0);function Sv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Cv=Sv,Rv=new Ut("auth","Firebase",Sv());var Ca=new gn("@firebase/auth");function FS(n,...e){Ca.logLevel<=Z.WARN&&Ca.warn(`Auth (${vn}): ${n}`,...e)}function Ta(n,...e){Ca.logLevel<=Z.ERROR&&Ca.error(`Auth (${vn}): ${n}`,...e)}function _t(n,...e){throw Rh(n,...e)}function Kn(n,...e){return Rh(n,...e)}function Dv(n,e,t){let r=Object.assign(Object.assign({},Cv()),{[e]:t});return new Ut("auth","Firebase",r).create(e,{appName:n.name})}function qt(n){return Dv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rh(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Rv.create(n,...e)}function B(n,e,...t){if(!n)throw Rh(e,...t)}function Bt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ta(e),new Error(e)}function In(n,e){n||Bt(e)}function uh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function US(){return lv()==="http:"||lv()==="https:"}function lv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function jS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(US()||qy()||"connection"in navigator)?navigator.onLine:!0}function BS(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Hn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,In(t>e,"Short delay should be less than long delay!"),this.isMobile=$y()||zy()}get(){return jS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Dh(n,e){In(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ra=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qS=new Hn(3e4,6e4);function wn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function En(s,o,c,l){return _(this,arguments,function*(n,e,t,r,i={}){return Pv(n,i,()=>_(this,null,function*(){let h={},f={};r&&(e==="GET"?f=r:h={body:JSON.stringify(r)});let m=ys(Object.assign({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();return I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode),Ra.fetch()(Nv(n,n.config.apiHost,t,m),Object.assign({method:e,headers:I,referrerPolicy:"no-referrer"},h))}))})}function Pv(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},$S),e);try{let i=new lh(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ea(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ea(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ea(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ea(n,"user-disabled",o);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Dv(n,f,h);_t(n,f)}}catch(i){if(i instanceof Je)throw i;_t(n,"network-request-failed",{message:String(i)})}})}function Ds(s,o,c,l){return _(this,arguments,function*(n,e,t,r,i={}){let h=yield En(n,e,t,r,i);return"mfaPendingCredential"in h&&_t(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function Nv(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Dh(n.config,i):`${n.config.apiScheme}://${i}`}function zS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var lh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),qS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ea(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Kn(n,e,r);return i.customData._tokenResponse=t,i}function hv(n){return n!==void 0&&n.enterprise!==void 0}var hh=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function GS(n,e){return _(this,null,function*(){return En(n,"GET","/v2/recaptchaConfig",wn(n,e))})}function WS(n,e){return _(this,null,function*(){return En(n,"POST","/v1/accounts:delete",e)})}function kv(n,e){return _(this,null,function*(){return En(n,"POST","/v1/accounts:lookup",e)})}function Es(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ph(n,e=!1){return _(this,null,function*(){let t=ye(n),r=yield t.getIdToken(e),i=Nh(r);B(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Es(oh(i.auth_time)),issuedAtTime:Es(oh(i.iat)),expirationTime:Es(oh(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function oh(n){return Number(n)*1e3}function Nh(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ta("JWT malformed, contained fewer than 3 sections"),null;try{let i=Fl(t);return i?JSON.parse(i):(Ta("Failed to decode base64 JWT payload"),null)}catch(i){return Ta("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dv(n){let e=Nh(n);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function As(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Je&&KS(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function KS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var dh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bs=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Es(this.lastLoginAt),this.creationTime=Es(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Da(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield As(n,kv(t,{idToken:r}));B(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ov(s.providerUserInfo):[],c=HS(n.providerData,o),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=l?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new bs(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function kh(n){return _(this,null,function*(){let e=ye(n);yield Da(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function HS(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ov(n){return n.map(e=>{var{providerId:t}=e,r=fu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function QS(n,e){return _(this,null,function*(){let t=yield Pv(n,{},()=>_(this,null,function*(){let r=ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Nv(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ra.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function JS(n,e){return _(this,null,function*(){return En(n,"POST","/v2/accounts:revokeToken",wn(n,e))})}var Ts=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){B(e.length!==0,"internal-error");let t=dv(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield QS(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Bt("not implemented")}};function _n(n,e){B(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ur=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=fu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield As(this,this.stsTokenManager.getToken(this.auth,e));return B(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ph(this,e)}reload(){return kh(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Da(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(at(this.auth.app))return Promise.reject(qt(this.auth));let e=yield this.getIdToken();return yield As(this,WS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,h,f;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,O=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,M=(h=t.createdAt)!==null&&h!==void 0?h:void 0,q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Q,emailVerified:K,isAnonymous:we,providerData:ie,stsTokenManager:E}=t;B(Q&&E,e,"internal-error");let g=Ts.fromJSON(this.name,E);B(typeof Q=="string",e,"internal-error"),_n(m,e.name),_n(I,e.name),B(typeof K=="boolean",e,"internal-error"),B(typeof we=="boolean",e,"internal-error"),_n(C,e.name),_n(N,e.name),_n(O,e.name),_n(R,e.name),_n(M,e.name),_n(q,e.name);let v=new n({uid:Q,auth:e,email:I,emailVerified:K,displayName:m,isAnonymous:we,photoURL:N,phoneNumber:C,tenantId:O,stsTokenManager:g,createdAt:M,lastLoginAt:q});return ie&&Array.isArray(ie)&&(v.providerData=ie.map(w=>Object.assign({},w))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Ts;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Da(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];B(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Ov(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ts;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,h),l})}};var fv=new Map;function $t(n){In(n instanceof Function,"Expected a class definition");let e=fv.get(n);return e?(In(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fv.set(n,e),e)}var YS=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),fh=YS;function Aa(n,e,t){return`firebase:${n}:${e}:${t}`}var Pa=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Aa(this.userKey,i.apiKey,s),this.fullPersistenceKey=Aa("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ur._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n($t(fh),e,r);let i=(yield Promise.all(t.map(h=>_(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=i[0]||$t(fh),o=Aa(r,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let m=Ur._fromJSON(e,f);h!==s&&(c=m),s=h;break}}catch{}let l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>_(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,r))})}};function pv(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fv(e))return"Blackberry";if(Uv(e))return"Webos";if(Oh(e))return"Safari";if((e.includes("chrome/")||xv(e))&&!e.includes("edge/"))return"Chrome";if(Lv(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Mv(n=be()){return/firefox\//i.test(n)}function Oh(n=be()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xv(n=be()){return/crios\//i.test(n)}function Vv(n=be()){return/iemobile/i.test(n)}function Lv(n=be()){return/android/i.test(n)}function Fv(n=be()){return/blackberry/i.test(n)}function Uv(n=be()){return/webos/i.test(n)}function Fa(n=be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function XS(n=be()){var e;return Fa(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZS(){return Gy()&&document.documentMode===10}function jv(n=be()){return Fa(n)||Lv(n)||Uv(n)||Fv(n)||/windows phone/i.test(n)||Vv(n)}function e0(){try{return!!(window&&window!==window.top)}catch{return!1}}function Bv(n,e=[]){let t;switch(n){case"Browser":t=pv(be());break;case"Worker":t=`${pv(be())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vn}/${r}`}var ph=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function t0(t){return _(this,arguments,function*(n,e={}){return En(n,"GET","/v2/passwordPolicy",wn(n,e))})}var n0=6,gh=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:n0,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mh=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Na(this),this.idTokenSubscription=new Na(this),this.beforeStateQueue=new ph(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$t(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Pa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield kv(this,{idToken:e}),r=yield Ur._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(at(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Da(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=BS()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(at(this.app))return Promise.reject(qt(this));let t=e?ye(e):null;return t&&B(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return at(this.app)?Promise.reject(qt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return at(this.app)?Promise.reject(qt(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence($t(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield t0(this),t=new gh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ut("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JS(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&$t(e)||this._popupRedirectResolver;B(t,this,"argument-error"),this.redirectPersistenceManager=yield Pa.create(this,[$t(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&FS(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Jn(n){return ye(n)}var Na=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qy(t=>this.observer=t)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ua={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r0(n){Ua=n}function $v(n){return Ua.loadJS(n)}function i0(){return Ua.recaptchaEnterpriseScript}function s0(){return Ua.gapiScript}function qv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var o0="recaptcha-enterprise",a0="NO_RECAPTCHA",yh=class{constructor(e){this.type=o0,this.auth=Jn(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>_(this,null,function*(){GS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new hh(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{c(l)})}))})}function i(s,o,c){let l=window.grecaptcha;hv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(a0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&hv(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=i0();l.length!==0&&(l+=c),$v(l).then(()=>{i(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function gv(n,e,t,r=!1){return _(this,null,function*(){let i=new yh(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function vh(n,e,t,r){return _(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield gv(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield gv(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function Mh(n,e){let t=Is(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Bn(s,e??{}))return i;_t(i,"already-initialized")}return t.initialize({options:e})}function c0(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($t);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function xh(n,e,t){let r=Jn(n);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=zv(e),{host:o,port:c}=u0(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||l0()}function zv(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function u0(n){let e=zv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:mv(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:mv(o)}}}function mv(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function l0(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ss=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bt("not implemented")}_getIdTokenResponse(e){return Bt("not implemented")}_linkToIdToken(e,t){return Bt("not implemented")}_getReauthenticationResolver(e){return Bt("not implemented")}};function h0(n,e){return _(this,null,function*(){return En(n,"POST","/v1/accounts:signUp",e)})}function d0(n,e){return _(this,null,function*(){return Ds(n,"POST","/v1/accounts:signInWithPassword",wn(n,e))})}function f0(n,e){return _(this,null,function*(){return Ds(n,"POST","/v1/accounts:signInWithEmailLink",wn(n,e))})}function p0(n,e){return _(this,null,function*(){return Ds(n,"POST","/v1/accounts:signInWithEmailLink",wn(n,e))})}var Cs=class n extends Ss{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,t,"signInWithPassword",d0);case"emailLink":return f0(e,{email:this._email,oobCode:this._password});default:_t(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,r,"signUpPassword",h0);case"emailLink":return p0(e,{idToken:t,email:this._email,oobCode:this._password});default:_t(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ah(n,e){return _(this,null,function*(){return Ds(n,"POST","/v1/accounts:signInWithIdp",wn(n,e))})}function g0(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m0(n){let e=Or(Mr(n)).link,t=e?Or(Mr(e)).deep_link_id:null,r=Or(Mr(n)).deep_link_id;return(r?Or(Mr(r)).link:null)||r||t||e||n}var ka=class n{constructor(e){var t,r,i,s,o,c;let l=Or(Mr(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,m=g0((i=l.mode)!==null&&i!==void 0?i:null);B(h&&f&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=m0(e);try{return new n(t)}catch{return null}}};var Gv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Cs._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ka.parseLink(r);return B(i,"argument-error"),Cs._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Oa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _h=class extends Oa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function y0(n,e){return _(this,null,function*(){return Ds(n,"POST","/v1/accounts:signUp",wn(n,e))})}var jr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let s=yield Ur._fromIdTokenResponse(e,r,i),o=yv(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=yv(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function yv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ih=class n extends Je{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Wv(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(n,s,e,r):s})}function v0(n,e,t=!1){return _(this,null,function*(){let r=yield As(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return jr._forOperation(n,"link",r)})}function _0(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(at(r.app))return Promise.reject(qt(r));let i="reauthenticate";try{let s=yield As(n,Wv(r,i,e,n),t);B(s.idToken,r,"internal-error");let o=Nh(s.idToken);B(o,r,"internal-error");let{sub:c}=o;return B(n.uid===c,r,"user-mismatch"),jr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&_t(r,"user-mismatch"),s}})}function Kv(n,e,t=!1){return _(this,null,function*(){if(at(n.app))return Promise.reject(qt(n));let r="signIn",i=yield Wv(n,r,e),s=yield jr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Vh(n,e){return _(this,null,function*(){return Kv(Jn(n),e)})}function Hv(n){return _(this,null,function*(){let e=Jn(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Lh(n,e,t){return _(this,null,function*(){if(at(n.app))return Promise.reject(qt(n));let r=Jn(n),o=yield vh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y0).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Hv(n),l}),c=yield jr._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function Fh(n,e,t){return at(n.app)?Promise.reject(qt(n)):Vh(ye(n),Gv.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Hv(n),r}))}function ja(n,e,t,r){return ye(n).onIdTokenChanged(e,t,r)}function Uh(n,e,t){return ye(n).beforeAuthStateChanged(e,t)}function Ba(n,e,t,r){return ye(n).onAuthStateChanged(e,t,r)}var Ma="__sak";var xa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ma,"1"),this.storage.removeItem(Ma),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function I0(){let n=be();return Oh(n)||Fa(n)}var w0=1e3,E0=10,T0=(()=>{class n extends xa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=I0()&&e0(),this.fallbackToPolling=jv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,h)=>{this.notifyListeners(c,h)});return}let i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(i);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);ZS()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,E0):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},w0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield en(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield en(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield en(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Qv=T0;var A0=(()=>{class n extends xa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),jh=A0;function b0(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var S0=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(f=>_(this,null,function*(){return f(r.origin,o)})),h=yield b0(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Jv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var wh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let h=Jv("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let I=m;if(I.data.eventId===h)switch(I.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function vt(){return window}function C0(n){vt().location.href=n}function Yv(){return typeof vt().WorkerGlobalScope<"u"&&typeof vt().importScripts=="function"}function R0(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function D0(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function P0(){return Yv()?self:null}var Xv="firebaseLocalStorageDb",N0=1,Va="firebaseLocalStorage",Zv="fbase_key",Qn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function $a(n,e){return n.transaction([Va],e?"readwrite":"readonly").objectStore(Va)}function k0(){let n=indexedDB.deleteDatabase(Xv);return new Qn(n).toPromise()}function Eh(){let n=indexedDB.open(Xv,N0);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Va,{keyPath:Zv})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Va)?e(r):(r.close(),yield k0(),e(yield Eh()))}))})}function vv(n,e,t){return _(this,null,function*(){let r=$a(n,!0).put({[Zv]:e,value:t});return new Qn(r).toPromise()})}function O0(n,e){return _(this,null,function*(){let t=$a(n,!1).get(e),r=yield new Qn(t).toPromise();return r===void 0?null:r.value})}function _v(n,e){let t=$a(n,!0).delete(e);return new Qn(t).toPromise()}var M0=800,x0=3,V0=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Eh(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>x0)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Yv()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=S0._getInstance(P0()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield R0(),!this.activeServiceWorker)return;this.sender=new wh(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||D0()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Eh();return yield vv(t,Ma,"1"),yield _v(t,Ma),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>vv(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>O0(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>_v(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=$a(s,!1).getAll();return new Qn(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),M0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),e_=V0;var jk=qv("rcb"),Bk=new Hn(3e4,6e4);function L0(n,e){return e?$t(e):(B(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Rs=class extends Ss{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ah(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ah(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ah(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function F0(n){return Kv(n.auth,new Rs(n),n.bypassAuthState)}function U0(n){let{auth:e,user:t}=n;return B(t,e,"internal-error"),_0(t,new Rs(n),n.bypassAuthState)}function j0(n){return _(this,null,function*(){let{auth:e,user:t}=n;return B(t,e,"internal-error"),v0(t,new Rs(n),n.bypassAuthState)})}var Th=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F0;case"linkViaPopup":case"linkViaRedirect":return j0;case"reauthViaPopup":case"reauthViaRedirect":return U0;default:_t(this.auth,"internal-error")}}resolve(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $k=new Hn(2e3,1e4);var B0="pendingRedirect",ba=new Map,Ah=class n extends Th{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=ba.get(this.auth._key());if(!e){try{let r=(yield $0(this.resolver,this.auth))?yield en(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ba.set(this.auth._key(),e)}return this.bypassAuthState||ba.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return en(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,en(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function $0(n,e){return _(this,null,function*(){let t=G0(e),r=z0(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function q0(n,e){ba.set(n._key(),e)}function z0(n){return $t(n._redirectPersistence)}function G0(n){return Aa(B0,n.config.apiKey,n.name)}function W0(n,e,t=!1){return _(this,null,function*(){if(at(n.app))return Promise.reject(qt(n));let r=Jn(n),i=L0(r,e),o=yield new Ah(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var K0=10*60*1e3,bh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H0(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!t_(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K0&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(e))}saveEventToCache(e){this.cachedEventUids.add(Iv(e)),this.lastProcessedEventTime=Date.now()}};function Iv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function t_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function H0(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t_(n);default:return!1}}function Q0(t){return _(this,arguments,function*(n,e={}){return En(n,"GET","/v1/projects",e)})}var J0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y0=/^https?/;function X0(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Q0(n);for(let t of e)try{if(Z0(t))return}catch{}_t(n,"unauthorized-domain")})}function Z0(n){let e=uh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Y0.test(t))return!1;if(J0.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var eC=new Hn(3e4,6e4);function wv(){let n=vt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tC(n){return new Promise((e,t)=>{var r,i,s;function o(){wv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wv(),t(Kn(n,"network-request-failed"))},timeout:eC.get()})}if(!((i=(r=vt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vt().gapi)===null||s===void 0)&&s.load)o();else{let c=qv("iframefcb");return vt()[c]=()=>{gapi.load?o():t(Kn(n,"network-request-failed"))},$v(`${s0()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Sa=null,e})}var Sa=null;function nC(n){return Sa=Sa||tC(n),Sa}var rC=new Hn(5e3,15e3),iC="__/auth/iframe",sC="emulator/auth/iframe",oC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cC(n){let e=n.config;B(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Dh(e,sC):`https://${n.config.authDomain}/${iC}`,r={apiKey:e.apiKey,appName:n.name,v:vn},i=aC.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ys(r).slice(1)}`}function uC(n){return _(this,null,function*(){let e=yield nC(n),t=vt().gapi;return B(t,n,"internal-error"),e.open({where:document.body,url:cC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oC,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Kn(n,"network-request-failed"),c=vt().setTimeout(()=>{s(o)},rC.get());function l(){vt().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var lC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hC=500,dC=600,fC="_blank",pC="http://localhost",La=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gC(n,e,t,r=hC,i=dC){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},lC),{width:r.toString(),height:i.toString(),top:s,left:o}),h=be().toLowerCase();t&&(c=xv(h)?fC:t),Mv(h)&&(e=e||pC,l.scrollbars="yes");let f=Object.entries(l).reduce((I,[C,N])=>`${I}${C}=${N},`,"");if(XS(h)&&c!=="_self")return mC(e||"",c),new La(null);let m=window.open(e||"",c,f);B(m,n,"popup-blocked");try{m.focus()}catch{}return new La(m)}function mC(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var yC="__/auth/handler",vC="emulator/auth/handler",_C=encodeURIComponent("fac");function Ev(n,e,t,r,i,s){return _(this,null,function*(){B(n.config.authDomain,n,"auth-domain-config-required"),B(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vn,eventId:i};if(e instanceof Oa){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Hy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof _h){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),h=l?`#${_C}=${encodeURIComponent(l)}`:"";return`${IC(n)}?${ys(c).slice(1)}${h}`})}function IC({config:n}){return n.emulator?Dh(n,vC):`https://${n.authDomain}/${yC}`}var ch="webStorageSupport",Sh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jh,this._completeRedirectFn=W0,this._overrideRedirectResult=q0}_openPopup(e,t,r,i){return _(this,null,function*(){var s;In((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Ev(e,t,r,uh(),i);return gC(e,o,Jv())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield Ev(e,t,r,uh(),i);return C0(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(In(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield uC(e),r=new bh(e);return t.register("authEvent",i=>(B(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ch,{type:ch},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[ch];o!==void 0&&t(!!o),_t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=X0(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jv()||Oh()||Fa()}},n_=Sh;var Tv="@firebase/auth",Av="1.7.4";var Ch=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EC(n){yn(new rt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bv(n)},h=new mh(r,i,s,l);return c0(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yn(new rt("auth-internal",e=>{let t=Jn(e.getProvider("auth").getImmediate());return(r=>new Ch(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(Tv,Av,wC(n)),Se(Tv,Av,"esm2017")}var TC=5*60,AC=Bl("authIdTokenMaxAge")||TC,bv=null,bC=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>AC)return;let i=t?.token;bv!==i&&(bv=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Bh(n=xr()){let e=Is(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Mh(n,{popupRedirectResolver:n_,persistence:[e_,Qv,jh]}),r=Bl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=bC(s.toString());Uh(t,o,()=>o(t.currentUser)),ja(t,c=>o(c))}}let i=Ul("auth");return i&&xh(t,`http://${i}`),t}function SC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}r0({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Kn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",SC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EC("Browser");function i_(n){return new Pt(function(e){var t=Ba(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var s_="auth",Ps=class{constructor(e){return e}},Ns=class{constructor(){return ws(s_)}};var $h=new J("angularfire2.auth-instances");function gR(n,e){let t=Ia(s_,n,e);return t&&new Ps(t)}function mR(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ps(r)}}var yR={provide:Ns,deps:[[new Be,$h]]},vR={provide:Ps,useFactory:gR,deps:[[new Be,$h],jt]};function NO(n,...e){return Se("angularfire",Gn.full,"auth"),ot([vR,yR,{provide:$h,useFactory:mR(n),multi:!0,deps:[me,ft,Fr,Wn,[new Be,Lr],...e]}])}var kO=Re(i_,!0);var OO=Re(Lh,!0);var MO=Re(Bh,!0);var xO=Re(Fh,!0);var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a_={};var Tn,qh;(function(){var n;function e(E,g){function v(){}v.prototype=g.prototype,E.D=g.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,T,b){for(var y=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)y[Ct-2]=arguments[Ct];return g.prototype[T].apply(w,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,g,v){v||(v=0);var w=Array(16);if(typeof g=="string")for(var T=0;16>T;++T)w[T]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(T=0;16>T;++T)w[T]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=E.g[0],v=E.g[1],T=E.g[2];var b=E.g[3],y=g+(b^v&(T^b))+w[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=b+(T^g&(v^T))+w[1]+3905402710&4294967295,b=g+(y<<12&4294967295|y>>>20),y=T+(v^b&(g^v))+w[2]+606105819&4294967295,T=b+(y<<17&4294967295|y>>>15),y=v+(g^T&(b^g))+w[3]+3250441966&4294967295,v=T+(y<<22&4294967295|y>>>10),y=g+(b^v&(T^b))+w[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=b+(T^g&(v^T))+w[5]+1200080426&4294967295,b=g+(y<<12&4294967295|y>>>20),y=T+(v^b&(g^v))+w[6]+2821735955&4294967295,T=b+(y<<17&4294967295|y>>>15),y=v+(g^T&(b^g))+w[7]+4249261313&4294967295,v=T+(y<<22&4294967295|y>>>10),y=g+(b^v&(T^b))+w[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=b+(T^g&(v^T))+w[9]+2336552879&4294967295,b=g+(y<<12&4294967295|y>>>20),y=T+(v^b&(g^v))+w[10]+4294925233&4294967295,T=b+(y<<17&4294967295|y>>>15),y=v+(g^T&(b^g))+w[11]+2304563134&4294967295,v=T+(y<<22&4294967295|y>>>10),y=g+(b^v&(T^b))+w[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=b+(T^g&(v^T))+w[13]+4254626195&4294967295,b=g+(y<<12&4294967295|y>>>20),y=T+(v^b&(g^v))+w[14]+2792965006&4294967295,T=b+(y<<17&4294967295|y>>>15),y=v+(g^T&(b^g))+w[15]+1236535329&4294967295,v=T+(y<<22&4294967295|y>>>10),y=g+(T^b&(v^T))+w[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=b+(v^T&(g^v))+w[6]+3225465664&4294967295,b=g+(y<<9&4294967295|y>>>23),y=T+(g^v&(b^g))+w[11]+643717713&4294967295,T=b+(y<<14&4294967295|y>>>18),y=v+(b^g&(T^b))+w[0]+3921069994&4294967295,v=T+(y<<20&4294967295|y>>>12),y=g+(T^b&(v^T))+w[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=b+(v^T&(g^v))+w[10]+38016083&4294967295,b=g+(y<<9&4294967295|y>>>23),y=T+(g^v&(b^g))+w[15]+3634488961&4294967295,T=b+(y<<14&4294967295|y>>>18),y=v+(b^g&(T^b))+w[4]+3889429448&4294967295,v=T+(y<<20&4294967295|y>>>12),y=g+(T^b&(v^T))+w[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=b+(v^T&(g^v))+w[14]+3275163606&4294967295,b=g+(y<<9&4294967295|y>>>23),y=T+(g^v&(b^g))+w[3]+4107603335&4294967295,T=b+(y<<14&4294967295|y>>>18),y=v+(b^g&(T^b))+w[8]+1163531501&4294967295,v=T+(y<<20&4294967295|y>>>12),y=g+(T^b&(v^T))+w[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=b+(v^T&(g^v))+w[2]+4243563512&4294967295,b=g+(y<<9&4294967295|y>>>23),y=T+(g^v&(b^g))+w[7]+1735328473&4294967295,T=b+(y<<14&4294967295|y>>>18),y=v+(b^g&(T^b))+w[12]+2368359562&4294967295,v=T+(y<<20&4294967295|y>>>12),y=g+(v^T^b)+w[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=b+(g^v^T)+w[8]+2272392833&4294967295,b=g+(y<<11&4294967295|y>>>21),y=T+(b^g^v)+w[11]+1839030562&4294967295,T=b+(y<<16&4294967295|y>>>16),y=v+(T^b^g)+w[14]+4259657740&4294967295,v=T+(y<<23&4294967295|y>>>9),y=g+(v^T^b)+w[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=b+(g^v^T)+w[4]+1272893353&4294967295,b=g+(y<<11&4294967295|y>>>21),y=T+(b^g^v)+w[7]+4139469664&4294967295,T=b+(y<<16&4294967295|y>>>16),y=v+(T^b^g)+w[10]+3200236656&4294967295,v=T+(y<<23&4294967295|y>>>9),y=g+(v^T^b)+w[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=b+(g^v^T)+w[0]+3936430074&4294967295,b=g+(y<<11&4294967295|y>>>21),y=T+(b^g^v)+w[3]+3572445317&4294967295,T=b+(y<<16&4294967295|y>>>16),y=v+(T^b^g)+w[6]+76029189&4294967295,v=T+(y<<23&4294967295|y>>>9),y=g+(v^T^b)+w[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=b+(g^v^T)+w[12]+3873151461&4294967295,b=g+(y<<11&4294967295|y>>>21),y=T+(b^g^v)+w[15]+530742520&4294967295,T=b+(y<<16&4294967295|y>>>16),y=v+(T^b^g)+w[2]+3299628645&4294967295,v=T+(y<<23&4294967295|y>>>9),y=g+(T^(v|~b))+w[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=b+(v^(g|~T))+w[7]+1126891415&4294967295,b=g+(y<<10&4294967295|y>>>22),y=T+(g^(b|~v))+w[14]+2878612391&4294967295,T=b+(y<<15&4294967295|y>>>17),y=v+(b^(T|~g))+w[5]+4237533241&4294967295,v=T+(y<<21&4294967295|y>>>11),y=g+(T^(v|~b))+w[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=b+(v^(g|~T))+w[3]+2399980690&4294967295,b=g+(y<<10&4294967295|y>>>22),y=T+(g^(b|~v))+w[10]+4293915773&4294967295,T=b+(y<<15&4294967295|y>>>17),y=v+(b^(T|~g))+w[1]+2240044497&4294967295,v=T+(y<<21&4294967295|y>>>11),y=g+(T^(v|~b))+w[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=b+(v^(g|~T))+w[15]+4264355552&4294967295,b=g+(y<<10&4294967295|y>>>22),y=T+(g^(b|~v))+w[6]+2734768916&4294967295,T=b+(y<<15&4294967295|y>>>17),y=v+(b^(T|~g))+w[13]+1309151649&4294967295,v=T+(y<<21&4294967295|y>>>11),y=g+(T^(v|~b))+w[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=b+(v^(g|~T))+w[11]+3174756917&4294967295,b=g+(y<<10&4294967295|y>>>22),y=T+(g^(b|~v))+w[2]+718787259&4294967295,T=b+(y<<15&4294967295|y>>>17),y=v+(b^(T|~g))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(T+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var v=g-this.blockSize,w=this.B,T=this.h,b=0;b<g;){if(T==0)for(;b<=v;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<g;)if(w[T++]=E.charCodeAt(b++),T==this.blockSize){i(this,w),T=0;break}}else for(;b<g;)if(w[T++]=E[b++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var v=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=v&255,v/=256;for(this.u(E),E=Array(16),g=v=0;4>g;++g)for(var w=0;32>w;w+=8)E[v++]=this.g[g]>>>w&255;return E};function s(E,g){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=g(E)}function o(E,g){this.h=g;for(var v=[],w=!0,T=E.length-1;0<=T;T--){var b=E[T]|0;w&&b==g||(v[T]=b,w=!1)}this.g=v}var c={};function l(E){return-128<=E&&128>E?s(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return R(h(-E));for(var g=[],v=1,w=0;E>=v;w++)g[w]=E/v|0,v*=4294967296;return new o(g,0)}function f(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return R(f(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(g,8)),w=m,T=0;T<E.length;T+=8){var b=Math.min(8,E.length-T),y=parseInt(E.substring(T,T+b),g);8>b?(b=h(Math.pow(g,b)),w=w.j(b).add(h(y))):(w=w.j(v),w=w.add(h(y)))}return w}var m=l(0),I=l(1),C=l(16777216);n=o.prototype,n.m=function(){if(O(this))return-R(this).m();for(var E=0,g=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*g,g*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(O(this))return"-"+R(this).toString(E);for(var g=h(Math.pow(E,6)),v=this,w="";;){var T=K(v,g).g;v=M(v,T.j(g));var b=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=T,N(v))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function O(E){return E.h==-1}n.l=function(E){return E=M(this,E),O(E)?-1:N(E)?0:1};function R(E){for(var g=E.g.length,v=[],w=0;w<g;w++)v[w]=~E.g[w];return new o(v,~E.h).add(I)}n.abs=function(){return O(this)?R(this):this},n.add=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],w=0,T=0;T<=g;T++){var b=w+(this.i(T)&65535)+(E.i(T)&65535),y=(b>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);w=y>>>16,b&=65535,y&=65535,v[T]=y<<16|b}return new o(v,v[v.length-1]&-2147483648?-1:0)};function M(E,g){return E.add(R(g))}n.j=function(E){if(N(this)||N(E))return m;if(O(this))return O(E)?R(this).j(R(E)):R(R(this).j(E));if(O(E))return R(this.j(R(E)));if(0>this.l(C)&&0>E.l(C))return h(this.m()*E.m());for(var g=this.g.length+E.g.length,v=[],w=0;w<2*g;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<E.g.length;T++){var b=this.i(w)>>>16,y=this.i(w)&65535,Ct=E.i(T)>>>16,li=E.i(T)&65535;v[2*w+2*T]+=y*li,q(v,2*w+2*T),v[2*w+2*T+1]+=b*li,q(v,2*w+2*T+1),v[2*w+2*T+1]+=y*Ct,q(v,2*w+2*T+1),v[2*w+2*T+2]+=b*Ct,q(v,2*w+2*T+2)}for(w=0;w<g;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=g;w<2*g;w++)v[w]=0;return new o(v,0)};function q(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function Q(E,g){this.g=E,this.h=g}function K(E,g){if(N(g))throw Error("division by zero");if(N(E))return new Q(m,m);if(O(E))return g=K(R(E),g),new Q(R(g.g),R(g.h));if(O(g))return g=K(E,R(g)),new Q(R(g.g),g.h);if(30<E.g.length){if(O(E)||O(g))throw Error("slowDivide_ only works with positive integers.");for(var v=I,w=g;0>=w.l(E);)v=we(v),w=we(w);var T=ie(v,1),b=ie(w,1);for(w=ie(w,2),v=ie(v,2);!N(w);){var y=b.add(w);0>=y.l(E)&&(T=T.add(v),b=y),w=ie(w,1),v=ie(v,1)}return g=M(E,T.j(g)),new Q(T,g)}for(T=m;0<=E.l(g);){for(v=Math.max(1,Math.floor(E.m()/g.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=h(v),y=b.j(g);O(y)||0<y.l(E);)v-=w,b=h(v),y=b.j(g);N(b)&&(b=I),T=T.add(b),E=M(E,y)}return new Q(T,E)}n.A=function(E){return K(this,E).h},n.and=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},n.or=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},n.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function we(E){for(var g=E.g.length+1,v=[],w=0;w<g;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function ie(E,g){var v=g>>5;g%=32;for(var w=E.g.length-v,T=[],b=0;b<w;b++)T[b]=0<g?E.i(b+v)>>>g|E.i(b+v+1)<<32-g:E.i(b+v);return new o(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qh=a_.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Tn=a_.Integer=o}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zt={};var zh,Gh,Br,Wh,ks,za,Kh,Hh,Qh;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,d){return a==Array.prototype||a==Object.prototype||(a[u]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var d=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var A=a[p];if(!(A in d))break e;d=d[A]}a=a[a.length-1],p=d[a],u=u(p),u!=p&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var d=0,p=!1,A={next:function(){if(!p&&d<a.length){var S=d++;return{value:u(S,a[S]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(u,d){return d})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,d){return a.call.apply(a.bind,arguments)}function m(a,u,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function I(a,u,d){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,I.apply(null,arguments)}function C(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function N(a,u){function d(){}d.prototype=u.prototype,a.aa=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,A,S){for(var k=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)k[ae-2]=arguments[ae];return u.prototype[A].apply(p,k)}}function O(a){let u=a.length;if(0<u){let d=Array(u);for(let p=0;p<u;p++)d[p]=a[p];return d}return[]}function R(a,u){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(l(p)){let A=a.length||0,S=p.length||0;a.length=A+S;for(let k=0;k<S;k++)a[A+k]=p[k]}else a.push(p)}}class M{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function q(a){return/^[\s\xa0]*$/.test(a)}function Q(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function K(a){return K[" "](a),a}K[" "]=function(){};var we=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ie(a,u,d){for(let p in a)u.call(d,a[p],p,a)}function E(a,u){for(let d in a)u.call(void 0,a[d],d,a)}function g(a){let u={};for(let d in a)u[d]=a[d];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let d,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(d in p)a[d]=p[d];for(let S=0;S<v.length;S++)d=v[S],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function T(a){var u=1;a=a.split(":");let d=[];for(;0<u&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function b(a){c.setTimeout(()=>{throw a},0)}function y(){var a=Uc;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class Ct{constructor(){this.h=this.g=null}add(u,d){let p=li.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var li=new M(()=>new sw,a=>a.reset());class sw{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let hi,di=!1,Uc=new Ct,ip=()=>{let a=c.Promise.resolve(void 0);hi=()=>{a.then(ow)}};var ow=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(d){b(d)}var u=li;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}di=!1};function Jt(){this.s=this.s,this.C=this.C}Jt.prototype.s=!1,Jt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Jt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var aw=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return a}();function fi(a,u){if(ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(we){e:{try{K(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:cw[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&fi.aa.h.call(this)}}N(fi,ke);var cw={2:"touch",3:"pen",4:"mouse"};fi.prototype.h=function(){fi.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pi="closure_listenable_"+(1e6*Math.random()|0),uw=0;function lw(a,u,d,p,A){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=A,this.key=++uw,this.da=this.fa=!1}function no(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ro(a){this.src=a,this.g={},this.h=0}ro.prototype.add=function(a,u,d,p,A){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var k=Bc(a,u,p,A);return-1<k?(u=a[k],d||(u.fa=!1)):(u=new lw(u,this.src,S,!!p,A),u.fa=d,a.push(u)),u};function jc(a,u){var d=u.type;if(d in a.g){var p=a.g[d],A=Array.prototype.indexOf.call(p,u,void 0),S;(S=0<=A)&&Array.prototype.splice.call(p,A,1),S&&(no(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Bc(a,u,d,p){for(var A=0;A<a.length;++A){var S=a[A];if(!S.da&&S.listener==u&&S.capture==!!d&&S.ha==p)return A}return-1}var $c="closure_lm_"+(1e6*Math.random()|0),qc={};function sp(a,u,d,p,A){if(p&&p.once)return ap(a,u,d,p,A);if(Array.isArray(u)){for(var S=0;S<u.length;S++)sp(a,u[S],d,p,A);return null}return d=Kc(d),a&&a[pi]?a.K(u,d,h(p)?!!p.capture:!!p,A):op(a,u,d,!1,p,A)}function op(a,u,d,p,A,S){if(!u)throw Error("Invalid event type");var k=h(A)?!!A.capture:!!A,ae=Gc(a);if(ae||(a[$c]=ae=new ro(a)),d=ae.add(u,d,p,k,S),d.proxy)return d;if(p=hw(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)aw||(A=k),A===void 0&&(A=!1),a.addEventListener(u.toString(),p,A);else if(a.attachEvent)a.attachEvent(up(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function hw(){function a(d){return u.call(a.src,a.listener,d)}let u=dw;return a}function ap(a,u,d,p,A){if(Array.isArray(u)){for(var S=0;S<u.length;S++)ap(a,u[S],d,p,A);return null}return d=Kc(d),a&&a[pi]?a.L(u,d,h(p)?!!p.capture:!!p,A):op(a,u,d,!0,p,A)}function cp(a,u,d,p,A){if(Array.isArray(u))for(var S=0;S<u.length;S++)cp(a,u[S],d,p,A);else p=h(p)?!!p.capture:!!p,d=Kc(d),a&&a[pi]?(a=a.i,u=String(u).toString(),u in a.g&&(S=a.g[u],d=Bc(S,d,p,A),-1<d&&(no(S[d]),Array.prototype.splice.call(S,d,1),S.length==0&&(delete a.g[u],a.h--)))):a&&(a=Gc(a))&&(u=a.g[u.toString()],a=-1,u&&(a=Bc(u,d,p,A)),(d=-1<a?u[a]:null)&&zc(d))}function zc(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[pi])jc(u.i,a);else{var d=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(d,p,a.capture):u.detachEvent?u.detachEvent(up(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Gc(u))?(jc(d,a),d.h==0&&(d.src=null,u[$c]=null)):no(a)}}}function up(a){return a in qc?qc[a]:qc[a]="on"+a}function dw(a,u){if(a.da)a=!0;else{u=new fi(u,this);var d=a.listener,p=a.ha||a.src;a.fa&&zc(a),a=d.call(p,u)}return a}function Gc(a){return a=a[$c],a instanceof ro?a:null}var Wc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kc(a){return typeof a=="function"?a:(a[Wc]||(a[Wc]=function(u){return a.handleEvent(u)}),a[Wc])}function Oe(){Jt.call(this),this.i=new ro(this),this.M=this,this.F=null}N(Oe,Jt),Oe.prototype[pi]=!0,Oe.prototype.removeEventListener=function(a,u,d,p){cp(this,a,u,d,p)};function Ue(a,u){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new ke(u,a);else if(u instanceof ke)u.target=u.target||a;else{var A=u;u=new ke(p,a),w(u,A)}if(A=!0,d)for(var S=d.length-1;0<=S;S--){var k=u.g=d[S];A=io(k,p,!0,u)&&A}if(k=u.g=a,A=io(k,p,!0,u)&&A,A=io(k,p,!1,u)&&A,d)for(S=0;S<d.length;S++)k=u.g=d[S],A=io(k,p,!1,u)&&A}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var d=a.g[u],p=0;p<d.length;p++)no(d[p]);delete a.g[u],a.h--}}this.F=null},Oe.prototype.K=function(a,u,d,p){return this.i.add(String(a),u,!1,d,p)},Oe.prototype.L=function(a,u,d,p){return this.i.add(String(a),u,!0,d,p)};function io(a,u,d,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,S=0;S<u.length;++S){var k=u[S];if(k&&!k.da&&k.capture==d){var ae=k.listener,Pe=k.ha||k.src;k.fa&&jc(a.i,k),A=ae.call(Pe,p)!==!1&&A}}return A&&!p.defaultPrevented}function lp(a,u,d){if(typeof a=="function")d&&(a=I(a,d));else if(a&&typeof a.handleEvent=="function")a=I(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function hp(a){a.g=lp(()=>{a.g=null,a.i&&(a.i=!1,hp(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class fw extends Jt{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:hp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(a){Jt.call(this),this.h=a,this.g={}}N(gi,Jt);var dp=[];function fp(a){ie(a.g,function(u,d){this.g.hasOwnProperty(d)&&zc(u)},a),a.g={}}gi.prototype.N=function(){gi.aa.N.call(this),fp(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hc=c.JSON.stringify,pw=c.JSON.parse,gw=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Qc(){}Qc.prototype.h=null;function pp(a){return a.h||(a.h=a.i())}function gp(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jc(){ke.call(this,"d")}N(Jc,ke);function Yc(){ke.call(this,"c")}N(Yc,ke);var Rn={},mp=null;function so(){return mp=mp||new Oe}Rn.La="serverreachability";function yp(a){ke.call(this,Rn.La,a)}N(yp,ke);function yi(a){let u=so();Ue(u,new yp(u))}Rn.STAT_EVENT="statevent";function vp(a,u){ke.call(this,Rn.STAT_EVENT,a),this.stat=u}N(vp,ke);function je(a){let u=so();Ue(u,new vp(u,a))}Rn.Ma="timingevent";function _p(a,u){ke.call(this,Rn.Ma,a),this.size=u}N(_p,ke);function vi(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function mw(a,u,d,p,A,S){a.info(function(){if(a.g)if(S)for(var k="",ae=S.split("&"),Pe=0;Pe<ae.length;Pe++){var re=ae[Pe].split("=");if(1<re.length){var Me=re[0];re=re[1];var xe=Me.split("_");k=2<=xe.length&&xe[1]=="type"?k+(Me+"="+re+"&"):k+(Me+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+u+`
`+d+`
`+k})}function yw(a,u,d,p,A,S,k){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+u+`
`+d+`
`+S+" "+k})}function ur(a,u,d,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+_w(a,d)+(p?" "+p:"")})}function vw(a,u){a.info(function(){return"TIMEOUT: "+u})}_i.prototype.info=function(){};function _w(a,u){if(!a.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var S=A[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<A.length;k++)A[k]=""}}}}return Hc(d)}catch{return u}}var oo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ip={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xc;function ao(){}N(ao,Qc),ao.prototype.g=function(){return new XMLHttpRequest},ao.prototype.i=function(){return{}},Xc=new ao;function Yt(a,u,d,p){this.j=a,this.i=u,this.l=d,this.R=p||1,this.U=new gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wp}function wp(){this.i=null,this.g="",this.h=!1}var Ep={},Zc={};function eu(a,u,d){a.L=1,a.v=ho(Rt(u)),a.m=d,a.P=!0,Tp(a,null)}function Tp(a,u){a.F=Date.now(),co(a),a.A=Rt(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Lp(d.i,"t",p),a.C=0,d=a.j.J,a.h=new wp,a.g=tg(a.j,d?u:null,!a.m),0<a.O&&(a.M=new fw(I(a.Y,a,a.g),a.O)),u=a.U,d=a.g,p=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(dp[0]=A.toString()),A=dp);for(var S=0;S<A.length;S++){var k=sp(d,A[S],p||u.handleEvent,!1,u.h||u);if(!k)break;u.g[k.key]=k}u=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),yi(),mw(a.i,a.u,a.A,a.l,a.R,a.m)}Yt.prototype.ca=function(a){a=a.target;let u=this.M;u&&Dt(a)==3?u.j():this.Y(a)},Yt.prototype.Y=function(a){try{if(a==this.g)e:{let xe=Dt(this.g);var u=this.g.Ba();let dr=this.g.Z();if(!(3>xe)&&(xe!=3||this.g&&(this.h.h||this.g.oa()||zp(this.g)))){this.J||xe!=4||u==7||(u==8||0>=dr?yi(3):yi(2)),tu(this);var d=this.g.Z();this.X=d;t:if(Ap(this)){var p=zp(this.g);a="";var A=p.length,S=Dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),Ii(this);var k="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(S&&u==A-1)});p.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=d==200,yw(this.i,this.u,this.A,this.l,this.R,xe,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ae,Pe=this.g;if((ae=Pe.g?Pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(ae)){var re=ae;break t}}re=null}if(d=re)ur(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nu(this,d);else{this.o=!1,this.s=3,je(12),Dn(this),Ii(this);break e}}if(this.P){d=!0;let st;for(;!this.J&&this.C<k.length;)if(st=Iw(this,k),st==Zc){xe==4&&(this.s=4,je(14),d=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(st==Ep){this.s=4,je(15),ur(this.i,this.l,k,"[Invalid Chunk]"),d=!1;break}else ur(this.i,this.l,st,null),nu(this,st);if(Ap(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||k.length!=0||this.h.h||(this.s=1,je(16),d=!1),this.o=this.o&&d,!d)ur(this.i,this.l,k,"[Invalid Chunked Response]"),Dn(this),Ii(this);else if(0<k.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),cu(Me),Me.M=!0,je(11))}}else ur(this.i,this.l,k,null),nu(this,k);xe==4&&Dn(this),this.o&&!this.J&&(xe==4?Yp(this.j,this):(this.o=!1,co(this)))}else Lw(this.g),d==400&&0<k.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Dn(this),Ii(this)}}}catch{}finally{}};function Ap(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Iw(a,u){var d=a.C,p=u.indexOf(`
`,d);return p==-1?Zc:(d=Number(u.substring(d,p)),isNaN(d)?Ep:(p+=1,p+d>u.length?Zc:(u=u.slice(p,p+d),a.C=p+d,u)))}Yt.prototype.cancel=function(){this.J=!0,Dn(this)};function co(a){a.S=Date.now()+a.I,bp(a,a.I)}function bp(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vi(I(a.ba,a),u)}function tu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Yt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(vw(this.i,this.A),this.L!=2&&(yi(),je(17)),Dn(this),this.s=2,Ii(this)):bp(this,this.S-a)};function Ii(a){a.j.G==0||a.J||Yp(a.j,a)}function Dn(a){tu(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,fp(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function nu(a,u){try{var d=a.j;if(d.G!=0&&(d.g==a||ru(d.h,a))){if(!a.K&&ru(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)yo(d),go(d);else break e;au(d),je(18)}}else d.za=A[1],0<d.za-d.T&&37500>A[2]&&d.F&&d.v==0&&!d.C&&(d.C=vi(I(d.Za,d),6e3));if(1>=Rp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Nn(d,11)}else if((a.K||d.g==a)&&yo(d),!q(u))for(A=d.Da.g.parse(u),u=0;u<A.length;u++){let re=A[u];if(d.T=re[0],re=re[1],d.G==2)if(re[0]=="c"){d.K=re[1],d.ia=re[2];let Me=re[3];Me!=null&&(d.la=Me,d.j.info("VER="+d.la));let xe=re[4];xe!=null&&(d.Aa=xe,d.j.info("SVER="+d.Aa));let dr=re[5];dr!=null&&typeof dr=="number"&&0<dr&&(p=1.5*dr,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let st=a.g;if(st){let _o=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var S=p.h;S.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(iu(S,S.h),S.h=null))}if(p.D){let uu=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;uu&&(p.ya=uu,le(p.I,p.D,uu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var k=a;if(p.qa=eg(p,p.J?p.ia:null,p.W),k.K){Dp(p.h,k);var ae=k,Pe=p.L;Pe&&(ae.I=Pe),ae.B&&(tu(ae),co(ae)),p.g=k}else Qp(p);0<d.i.length&&mo(d)}else re[0]!="stop"&&re[0]!="close"||Nn(d,7);else d.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Nn(d,7):ou(d):re[0]!="noop"&&d.l&&d.l.ta(re),d.v=0)}}yi(4)}catch{}}var ww=class{constructor(a,u){this.g=a,this.map=u}};function Sp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rp(a){return a.h?1:a.g?a.g.size:0}function ru(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function iu(a,u){a.g?a.g.add(u):a.h=u}function Dp(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Sp.prototype.cancel=function(){if(this.i=Pp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Pp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let d of a.g.values())u=u.concat(d.D);return u}return O(a.i)}function Ew(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],d=a.length,p=0;p<d;p++)u.push(a[p]);return u}u=[],d=0;for(p in a)u[d++]=a[p];return u}function Tw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var d=0;d<a;d++)u.push(d);return u}u=[],d=0;for(let p in a)u[d++]=p;return u}}}function Np(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var d=Tw(a),p=Ew(a),A=p.length,S=0;S<A;S++)u.call(void 0,p[S],d&&d[S],a)}var kp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aw(a,u){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),A=null;if(0<=p){var S=a[d].substring(0,p);A=a[d].substring(p+1)}else S=a[d];u(S,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Pn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Pn){this.h=a.h,uo(this,a.j),this.o=a.o,this.g=a.g,lo(this,a.s),this.l=a.l;var u=a.i,d=new Ti;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Op(this,d),this.m=a.m}else a&&(u=String(a).match(kp))?(this.h=!1,uo(this,u[1]||"",!0),this.o=wi(u[2]||""),this.g=wi(u[3]||"",!0),lo(this,u[4]),this.l=wi(u[5]||"",!0),Op(this,u[6]||"",!0),this.m=wi(u[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}Pn.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Ei(u,Mp,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Ei(u,Mp,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ei(d,d.charAt(0)=="/"?Cw:Sw,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ei(d,Dw)),a.join("")};function Rt(a){return new Pn(a)}function uo(a,u,d){a.j=d?wi(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function lo(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Op(a,u,d){u instanceof Ti?(a.i=u,Pw(a.i,a.h)):(d||(u=Ei(u,Rw)),a.i=new Ti(u,a.h))}function le(a,u,d){a.i.set(u,d)}function ho(a){return le(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function wi(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ei(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,bw),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function bw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Mp=/[#\/\?@]/g,Sw=/[#\?:]/g,Cw=/[#\?]/g,Rw=/[#\?@]/g,Dw=/#/g;function Ti(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Xt(a){a.g||(a.g=new Map,a.h=0,a.i&&Aw(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Ti.prototype,n.add=function(a,u){Xt(this),this.i=null,a=lr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function xp(a,u){Xt(a),u=lr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Vp(a,u){return Xt(a),u=lr(a,u),a.g.has(u)}n.forEach=function(a,u){Xt(this),this.g.forEach(function(d,p){d.forEach(function(A){a.call(u,A,p,this)},this)},this)},n.na=function(){Xt(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){let A=a[p];for(let S=0;S<A.length;S++)d.push(u[p])}return d},n.V=function(a){Xt(this);let u=[];if(typeof a=="string")Vp(this,a)&&(u=u.concat(this.g.get(lr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)u=u.concat(a[d])}return u},n.set=function(a,u){return Xt(this),this.i=null,a=lr(this,a),Vp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Lp(a,u,d){xp(a,u),0<d.length&&(a.i=null,a.g.set(lr(a,u),O(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];let S=encodeURIComponent(String(p)),k=this.V(p);for(p=0;p<k.length;p++){var A=S;k[p]!==""&&(A+="="+encodeURIComponent(String(k[p]))),a.push(A)}}return this.i=a.join("&")};function lr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Pw(a,u){u&&!a.j&&(Xt(a),a.i=null,a.g.forEach(function(d,p){var A=p.toLowerCase();p!=A&&(xp(this,p),Lp(this,A,d))},a)),a.j=u}function Nw(a,u){let d=new _i;if(c.Image){let p=new Image;p.onload=C(Zt,d,"TestLoadImage: loaded",!0,u,p),p.onerror=C(Zt,d,"TestLoadImage: error",!1,u,p),p.onabort=C(Zt,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=C(Zt,d,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function kw(a,u){let d=new _i,p=new AbortController,A=setTimeout(()=>{p.abort(),Zt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(S=>{clearTimeout(A),S.ok?Zt(d,"TestPingServer: ok",!0,u):Zt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),Zt(d,"TestPingServer: error",!1,u)})}function Zt(a,u,d,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(d)}catch{}}function Ow(){this.g=new gw}function Mw(a,u,d){let p=d||"";try{Np(a,function(A,S){let k=A;h(A)&&(k=Hc(A)),u.push(p+S+"="+encodeURIComponent(k))})}catch(A){throw u.push(p+"type="+encodeURIComponent("_badmap")),A}}function Ai(a){this.l=a.Ub||null,this.j=a.eb||!1}N(Ai,Qc),Ai.prototype.g=function(){return new fo(this.l,this.j)},Ai.prototype.i=function(a){return function(){return a}}({});function fo(a,u){Oe.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(fo,Oe),n=fo.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Si(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?bi(this):Si(this),this.readyState==3&&Fp(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,bi(this))},n.Qa=function(a){this.g&&(this.response=a,bi(this))},n.ga=function(){this.g&&bi(this)};function bi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Si(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function Si(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Up(a){let u="";return ie(a,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function su(a,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Up(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):le(a,u,d))}function fe(a){Oe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(fe,Oe);var xw=/^https?$/i,Vw=["POST","PUT"];n=fe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xc.g(),this.v=this.o?pp(this.o):pp(Xc),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(S){jp(this,S);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)d.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let S of p.keys())d.set(S,p.get(S));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(S=>S.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Vw,u,void 0))||p||A||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of d)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qp(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){jp(this,S)}};function jp(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Bp(a),po(a)}function Bp(a){a.A||(a.A=!0,Ue(a,"complete"),Ue(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ue(this,"complete"),Ue(this,"abort"),po(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),po(this,!0)),fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$p(this):this.bb())},n.bb=function(){$p(this)};function $p(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Dt(a)!=4||a.Z()!=2)){if(a.u&&Dt(a)==4)lp(a.Ea,0,a);else if(Ue(a,"readystatechange"),Dt(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=k===0){var A=String(a.D).match(kp)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),p=!xw.test(A?A.toLowerCase():"")}d=p}if(d)Ue(a,"complete"),Ue(a,"success");else{a.m=6;try{var S=2<Dt(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Bp(a)}}finally{po(a)}}}}function po(a,u){if(a.g){qp(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Ue(a,"ready");try{d.onreadystatechange=p}catch{}}}function qp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Dt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),pw(u)}};function zp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Lw(a){let u={};a=(a.g&&2<=Dt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(q(a[p]))continue;var d=T(a[p]);let A=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let S=u[A]||[];u[A]=S,S.push(d)}E(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function Gp(a){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,a),this.cb=Ci("retryDelaySeedMs",1e4,a),this.Wa=Ci("forwardChannelMaxRetries",2,a),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Sp(a&&a.concurrentRequestLimit),this.Da=new Ow,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gp.prototype,n.la=8,n.G=1,n.connect=function(a,u,d,p){je(0),this.W=a,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=eg(this,null,this.W),mo(this)};function ou(a){if(Wp(a),a.G==3){var u=a.U++,d=Rt(a.I);if(le(d,"SID",a.K),le(d,"RID",u),le(d,"TYPE","terminate"),Ri(a,d),u=new Yt(a,a.j,u),u.L=2,u.v=ho(Rt(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=tg(u.j,null),u.g.ea(u.v)),u.F=Date.now(),co(u)}Zp(a)}function go(a){a.g&&(cu(a),a.g.cancel(),a.g=null)}function Wp(a){go(a),a.u&&(c.clearTimeout(a.u),a.u=null),yo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function mo(a){if(!Cp(a.h)&&!a.s){a.s=!0;var u=a.Ga;hi||ip(),di||(hi(),di=!0),Uc.add(u,a),a.B=0}}function Fw(a,u){return Rp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vi(I(a.Ga,a,u),Xp(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Yt(this,this.j,a),S=this.o;if(this.S&&(S?(S=g(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(A.H=S,S=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Hp(this,A,u),d=Rt(this.I),le(d,"RID",a),le(d,"CVER",22),this.D&&le(d,"X-HTTP-Session-Id",this.D),Ri(this,d),S&&(this.O?u="headers="+encodeURIComponent(String(Up(S)))+"&"+u:this.m&&su(d,this.m,S)),iu(this.h,A),this.Ua&&le(d,"TYPE","init"),this.P?(le(d,"$req",u),le(d,"SID","null"),A.T=!0,eu(A,d,null)):eu(A,d,u),this.G=2}}else this.G==3&&(a?Kp(this,a):this.i.length==0||Cp(this.h)||Kp(this))};function Kp(a,u){var d;u?d=u.l:d=a.U++;let p=Rt(a.I);le(p,"SID",a.K),le(p,"RID",d),le(p,"AID",a.T),Ri(a,p),a.m&&a.o&&su(p,a.m,a.o),d=new Yt(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Hp(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),iu(a.h,d),eu(d,p,u)}function Ri(a,u){a.H&&ie(a.H,function(d,p){le(u,p,d)}),a.l&&Np({},function(d,p){le(u,p,d)})}function Hp(a,u,d){d=Math.min(a.i.length,d);var p=a.l?I(a.l.Na,a.l,a):null;e:{var A=a.i;let S=-1;for(;;){let k=["count="+d];S==-1?0<d?(S=A[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let ae=!0;for(let Pe=0;Pe<d;Pe++){let re=A[Pe].g,Me=A[Pe].map;if(re-=S,0>re)S=Math.max(0,A[Pe].g-100),ae=!1;else try{Mw(Me,k,"req"+re+"_")}catch{p&&p(Me)}}if(ae){p=k.join("&");break e}}}return a=a.i.splice(0,d),u.D=a,p}function Qp(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;hi||ip(),di||(hi(),di=!0),Uc.add(u,a),a.v=0}}function au(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vi(I(a.Fa,a),Xp(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Jp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vi(I(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),go(this),Jp(this))};function cu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Jp(a){a.g=new Yt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Rt(a.qa);le(u,"RID","rpc"),le(u,"SID",a.K),le(u,"AID",a.T),le(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&le(u,"TO",a.ja),le(u,"TYPE","xmlhttp"),Ri(a,u),a.m&&a.o&&su(u,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=ho(Rt(u)),d.m=null,d.P=!0,Tp(d,a)}n.Za=function(){this.C!=null&&(this.C=null,go(this),au(this),je(19))};function yo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Yp(a,u){var d=null;if(a.g==u){yo(a),cu(a),a.g=null;var p=2}else if(ru(a.h,u))d=u.D,Dp(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;p=so(),Ue(p,new _p(p,d)),mo(a)}else Qp(a);else if(A=u.s,A==3||A==0&&0<u.X||!(p==1&&Fw(a,u)||p==2&&au(a)))switch(d&&0<d.length&&(u=a.h,u.i=u.i.concat(d)),A){case 1:Nn(a,5);break;case 4:Nn(a,10);break;case 3:Nn(a,6);break;default:Nn(a,2)}}}function Xp(a,u){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*u}function Nn(a,u){if(a.j.info("Error code "+u),u==2){var d=I(a.fb,a),p=a.Xa;let A=!p;p=new Pn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||uo(p,"https"),ho(p),A?Nw(p.toString(),d):kw(p.toString(),d)}else je(2);a.G=0,a.l&&a.l.sa(u),Zp(a),Wp(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function Zp(a){if(a.G=0,a.ka=[],a.l){let u=Pp(a.h);(u.length!=0||a.i.length!=0)&&(R(a.ka,u),R(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function eg(a,u,d){var p=d instanceof Pn?Rt(d):new Pn(d);if(p.g!="")u&&(p.g=u+"."+p.g),lo(p,p.s);else{var A=c.location;p=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var S=new Pn(null);p&&uo(S,p),u&&(S.g=u),A&&lo(S,A),d&&(S.l=d),p=S}return d=a.D,u=a.ya,d&&u&&le(p,d,u),le(p,"VER",a.la),Ri(a,p),p}function tg(a,u,d){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new fe(new Ai({eb:d})):new fe(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ng(){}n=ng.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function vo(){}vo.prototype.g=function(a,u){return new ze(a,u)};function ze(a,u){Oe.call(this),this.g=new Gp(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!q(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!q(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new hr(this)}N(ze,Oe),ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){ou(this.g)},ze.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Hc(a),a=d);u.i.push(new ww(u.Ya++,a)),u.G==3&&mo(u)},ze.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,ze.aa.N.call(this)};function rg(a){Jc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}N(rg,Jc);function ig(){Yc.call(this),this.status=1}N(ig,Yc);function hr(a){this.g=a}N(hr,ng),hr.prototype.ua=function(){Ue(this.g,"a")},hr.prototype.ta=function(a){Ue(this.g,new rg(a))},hr.prototype.sa=function(a){Ue(this.g,new ig)},hr.prototype.ra=function(){Ue(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,Qh=zt.createWebChannelTransport=function(){return new vo},Hh=zt.getStatEventTarget=function(){return so()},Kh=zt.Event=Rn,za=zt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oo.NO_ERROR=0,oo.TIMEOUT=8,oo.HTTP_ERROR=6,ks=zt.ErrorCode=oo,Ip.COMPLETE="complete",Wh=zt.EventType=Ip,gp.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Br=zt.WebChannel=gp,Gh=zt.FetchXmlHttpFactory=Ai,fe.prototype.listenOnce=fe.prototype.L,fe.prototype.getLastError=fe.prototype.Ka,fe.prototype.getLastErrorCode=fe.prototype.Ba,fe.prototype.getStatus=fe.prototype.Z,fe.prototype.getResponseJson=fe.prototype.Oa,fe.prototype.getResponseText=fe.prototype.oa,fe.prototype.send=fe.prototype.ea,fe.prototype.setWithCredentials=fe.prototype.Ha,zh=zt.XhrIo=fe}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});var c_="@firebase/firestore";var De=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");var ci="10.12.1";var er=new gn("@firebase/firestore");function Os(){return er.logLevel}function L(n,...e){if(er.logLevel<=Z.DEBUG){let t=e.map(xf);er.debug(`Firestore (${ci}): ${n}`,...t)}}function Wt(n,...e){if(er.logLevel<=Z.ERROR){let t=e.map(xf);er.error(`Firestore (${ci}): ${n}`,...t)}}function Hr(n,...e){if(er.logLevel<=Z.WARN){let t=e.map(xf);er.warn(`Firestore (${ci}): ${n}`,...t)}}function xf(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n="Unexpected state"){let e=`FIRESTORE (${ci}) INTERNAL ASSERTION FAILED: `+n;throw Wt(e),new Error(e)}function ue(n,e){n||$()}function z(n,e){return n}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Qa=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ed=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(De.UNAUTHENTICATED))}shutdown(){}},td=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},nd=class{constructor(e){this.t=e,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>_(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new Qa(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new De(e)}},rd=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=De.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},id=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new rd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},od=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ue(typeof t.token=="string"),this.R=t.token,new sd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function _R(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ja=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_R(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function Qr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ne=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var G=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ne(0,0))}static max(){return new n(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ya=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(),r===void 0?r=e.length-t:r>e.length-t&&$(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},de=class n extends Ya{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},IR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xe=class n extends Ya{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return IR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new x(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new x(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new x(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new x(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(de.fromString(e))}static fromName(e){return new n(de.fromString(e).popFirst(5))}static empty(){return new n(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return de.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new de(e.slice()))}};var ad=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ad.UNKNOWN_ID=-1;function wR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new Ne(t+1,0):new Ne(t,r));return new tr(i,U.empty(),e)}function ER(n){return new tr(n.readTime,n.key,-1)}var tr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(G.min(),U.empty(),-1)}static max(){return new n(G.max(),U.empty(),-1)}};function TR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var AR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Js(n){return _(this,null,function*(){if(n.code!==D.FAILED_PRECONDITION||n.message!==AR)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let h=l;t(e[h]).next(f=>{o[h]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function bR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ys(n){return n.name==="IndexedDbTransactionError"}var j_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Dc(n){return n==null}function Us(n){return n===0&&1/n==-1/0}function SR(n){return typeof n=="number"&&Number.isInteger(n)&&!Us(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var CR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QO=[...CR,"documentOverlays"],RR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DR=RR,JO=[...DR,"indexConfiguration","indexState","indexEntries"];function u_(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ar(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ge=class n{constructor(e,t){this.comparator=e,this.root=t||Et.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gr(this.root,e,this.comparator,!0)}},Gr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Et=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Et(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Le=class n{constructor(e){this.comparator=e,this.data=new ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xa(this.data.getIterator())}getIteratorFrom(e){return new Xa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xa=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var it=class n{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new n([])}unionWith(e){let t=new Le(Xe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Za=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var $e=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Za("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};$e.EMPTY_BYTE_STRING=new $e("");var PR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kt(n){if(ue(!!n),typeof n=="string"){let e=0,t=PR.exec(n);if(ue(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pe(n.seconds),nanos:pe(n.nanos)}}function pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bn(n){return typeof n=="string"?$e.fromBase64String(n):$e.fromUint8Array(n)}function Vf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lf(n){let e=n.mapValue.fields.__previous_value__;return Vf(e)?Lf(e):e}function js(n){let e=Kt(n.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}var ud=class{constructor(e,t,r,i,s,o,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},ec=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vf(n)?4:$_(n)?9007199254740991:10:$()}function bt(n,e){if(n===e)return!0;let t=nr(n);if(t!==nr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return js(n).isEqual(js(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Kt(i.timestampValue),c=Kt(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return bn(i.bytesValue).isEqual(bn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return pe(i.geoPointValue.latitude)===pe(s.geoPointValue.latitude)&&pe(i.geoPointValue.longitude)===pe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pe(i.integerValue)===pe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=pe(i.doubleValue),c=pe(s.doubleValue);return o===c?Us(o)===Us(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Qr(n.arrayValue.values||[],e.arrayValue.values||[],bt);case 10:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(u_(o)!==u_(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!bt(o[l],c[l])))return!1;return!0}(n,e);default:return $()}}function Bs(n,e){return(n.values||[]).find(t=>bt(t,e))!==void 0}function Jr(n,e){if(n===e)return 0;let t=nr(n),r=nr(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=pe(s.integerValue||s.doubleValue),l=pe(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return l_(n.timestampValue,e.timestampValue);case 4:return l_(js(n),js(e));case 5:return se(n.stringValue,e.stringValue);case 6:return function(s,o){let c=bn(s),l=bn(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){let f=se(c[h],l[h]);if(f!==0)return f}return se(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=se(pe(s.latitude),pe(o.latitude));return c!==0?c:se(pe(s.longitude),pe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let h=0;h<c.length&&h<l.length;++h){let f=Jr(c[h],l[h]);if(f)return f}return se(c.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ga.mapValue&&o===Ga.mapValue)return 0;if(s===Ga.mapValue)return 1;if(o===Ga.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let I=se(l[m],f[m]);if(I!==0)return I;let C=Jr(c[l[m]],h[f[m]]);if(C!==0)return C}return se(l.length,f.length)}(n.mapValue,e.mapValue);default:throw $()}}function l_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=Kt(n),r=Kt(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function Yr(n){return ld(n)}function ld(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Kt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return bn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=ld(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ld(t.fields[o])}`;return i+"}"}(n.mapValue):$()}function h_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hd(n){return!!n&&"integerValue"in n}function Ff(n){return!!n&&"arrayValue"in n}function d_(n){return!!n&&"nullValue"in n}function f_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ka(n){return!!n&&"mapValue"in n}function xs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ar(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ye=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ka(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xs(t)}setAll(e){let t=Xe.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=xs(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ka(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ka(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ar(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(xs(this.value))}};function q_(n){let e=[];return ar(n.fields,(t,r)=>{let i=new Xe([t]);if(Ka(r)){let s=q_(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new it(e)}var ut=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,G.min(),G.min(),G.min(),Ye.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,G.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,G.min(),G.min(),Ye.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,G.min(),G.min(),Ye.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ye.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ye.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xr=class{constructor(e,t){this.position=e,this.inclusive=t}};function p_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),t.key):r=Jr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function g_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bt(n.position[t],e.position[t]))return!1;return!0}var Zr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function NR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var tc=class{},Ie=class n extends tc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fd(e,t,r):t==="array-contains"?new md(e,r):t==="in"?new yd(e,r):t==="not-in"?new vd(e,r):t==="array-contains-any"?new _d(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new pd(e,r):new gd(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jr(t,this.value)):t!==null&&nr(this.value)===nr(t)&&this.matchesComparison(Jr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},lt=class n extends tc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return z_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function z_(n){return n.op==="and"}function G_(n){return kR(n)&&z_(n)}function kR(n){for(let e of n.filters)if(e instanceof lt)return!1;return!0}function dd(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+Yr(n.value);if(G_(n))return n.filters.map(e=>dd(e)).join(",");{let e=n.filters.map(t=>dd(t)).join(",");return`${n.op}(${e})`}}function W_(n,e){return n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&bt(r.value,i.value)}(n,e):n instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&W_(o,i.filters[c]),!0):!1}(n,e):void $()}function K_(n){return n instanceof Ie?function(t){return`${t.field.canonicalString()} ${t.op} ${Yr(t.value)}`}(n):n instanceof lt?function(t){return t.op.toString()+" {"+t.getFilters().map(K_).join(" ,")+"}"}(n):"Filter"}var fd=class extends Ie{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},pd=class extends Ie{constructor(e,t){super(e,"in",t),this.keys=H_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},gd=class extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=H_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function H_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var md=class extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ff(t)&&Bs(t.arrayValue,this.value)}},yd=class extends Ie{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bs(this.value.arrayValue,t)}},vd=class extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Bs(this.value.arrayValue,t)}},_d=class extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bs(this.value.arrayValue,r))}};var Id=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function m_(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Id(n,e,t,r,i,s,o)}function Uf(n){let e=z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dd(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yr(r)).join(",")),e.ue=t}return e.ue}function jf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!g_(n.startAt,e.startAt)&&g_(n.endAt,e.endAt)}function wd(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var rr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function OR(n,e,t,r,i,s,o,c){return new rr(n,e,t,r,i,s,o,c)}function Pc(n){return new rr(n)}function y_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Q_(n){return n.collectionGroup!==null}function Vs(n){let e=z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Le(Xe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Zr(s,r))}),t.has(Xe.keyField().canonicalString())||e.ce.push(new Zr(Xe.keyField(),r))}return e.ce}function Tt(n){let e=z(n);return e.le||(e.le=MR(e,Vs(n))),e.le}function MR(n,e){if(n.limitType==="F")return m_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Zr(i.field,s)});let t=n.endAt?new Xr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xr(n.startAt.position,n.startAt.inclusive):null;return m_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ed(n,e){let t=n.filters.concat([e]);return new rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Td(n,e,t){return new rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nc(n,e){return jf(Tt(n),Tt(e))&&n.limitType===e.limitType}function J_(n){return`${Uf(Tt(n))}|lt:${n.limitType}`}function $r(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>K_(i)).join(", ")}]`),Dc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Yr(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Yr(i)).join(",")),`Target(${r})`}(Tt(n))}; limitType=${n.limitType})`}function kc(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Vs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){let h=p_(o,c,l);return o.inclusive?h<=0:h<0}(r.startAt,Vs(r),i)||r.endAt&&!function(o,c,l){let h=p_(o,c,l);return o.inclusive?h>=0:h>0}(r.endAt,Vs(r),i))}(n,e)}function xR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y_(n){return(e,t)=>{let r=!1;for(let i of Vs(n)){let s=VR(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VR(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),h=c.data.field(s);return l!==null&&h!==null?Jr(l,h):$()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}var Sn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ar(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return B_(this.inner)}size(){return this.innerSize}};var LR=new ge(U.comparator);function Ht(){return LR}var X_=new ge(U.comparator);function Ms(...n){let e=X_;for(let t of n)e=e.insert(t.key,t);return e}function Z_(n){let e=X_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yn(){return Ls()}function eI(){return Ls()}function Ls(){return new Sn(n=>n.toString(),(n,e)=>n.isEqual(e))}var FR=new ge(U.comparator),UR=new Le(U.comparator);function ee(...n){let e=UR;for(let t of n)e=e.add(t);return e}var jR=new Le(se);function BR(){return jR}function tI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Us(e)?"-0":e}}function nI(n){return{integerValue:""+n}}function $R(n,e){return SR(e)?nI(e):tI(n,e)}var ei=class{constructor(){this._=void 0}};function qR(n,e,t){return n instanceof ti?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Vf(s)&&(s=Lf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ir?iI(n,e):n instanceof sr?sI(n,e):function(i,s){let o=rI(i,s),c=v_(o)+v_(i.Pe);return hd(o)&&hd(i.Pe)?nI(c):tI(i.serializer,c)}(n,e)}function zR(n,e,t){return n instanceof ir?iI(n,e):n instanceof sr?sI(n,e):t}function rI(n,e){return n instanceof ni?function(r){return hd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ti=class extends ei{},ir=class extends ei{constructor(e){super(),this.elements=e}};function iI(n,e){let t=oI(e);for(let r of n.elements)t.some(i=>bt(i,r))||t.push(r);return{arrayValue:{values:t}}}var sr=class extends ei{constructor(e){super(),this.elements=e}};function sI(n,e){let t=oI(e);for(let r of n.elements)t=t.filter(i=>!bt(i,r));return{arrayValue:{values:t}}}var ni=class extends ei{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function v_(n){return pe(n.integerValue||n.doubleValue)}function oI(n){return Ff(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ir&&i instanceof ir||r instanceof sr&&i instanceof sr?Qr(r.elements,i.elements,bt):r instanceof ni&&i instanceof ni?bt(r.Pe,i.Pe):r instanceof ti&&i instanceof ti}(n.transform,e.transform)}var Ad=class{constructor(e,t){this.version=e,this.transformResults=t}},Gt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ha(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ri=class{};function aI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nc(n.key,Gt.none()):new or(n.key,n.data,Gt.none());{let t=n.data,r=Ye.empty(),i=new Le(Xe.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new St(n.key,r,new it(i.toArray()),Gt.none())}}function WR(n,e,t){n instanceof or?function(i,s,o){let c=i.value.clone(),l=I_(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof St?function(i,s,o){if(!Ha(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=I_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(cI(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Fs(n,e,t,r){return n instanceof or?function(s,o,c,l){if(!Ha(s.precondition,o))return c;let h=s.value.clone(),f=w_(s.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof St?function(s,o,c,l){if(!Ha(s.precondition,o))return c;let h=w_(s.fieldTransforms,l,o),f=o.data;return f.setAll(cI(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(s,o,c){return Ha(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function KR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=rI(r.transform,i||null);s!=null&&(t===null&&(t=Ye.empty()),t.set(r.field,s))}return t||null}function __(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qr(r,i,(s,o)=>GR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var or=class extends ri{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},St=class extends ri{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function cI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function I_(n,e,t){let r=new Map;ue(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,zR(o,c,t[i]))}return r}function w_(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,qR(s,o,e))}return r}var nc=class extends ri{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bd=class extends ri{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sd=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&WR(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=eI();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let l=aI(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ee())}isEqual(e){return this.batchId===e.batchId&&Qr(this.mutations,e.mutations,(t,r)=>__(t,r))&&Qr(this.baseMutations,e.baseMutations,(t,r)=>__(t,r))}},Cd=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ue(e.mutations.length===r.length);let i=function(){return FR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Rd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dd=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ve,ne;function HR(n){switch(n){default:return $();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function uI(n){if(n===void 0)return Wt("GRPC error has no .code"),D.UNKNOWN;switch(n){case ve.OK:return D.OK;case ve.CANCELLED:return D.CANCELLED;case ve.UNKNOWN:return D.UNKNOWN;case ve.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ve.INTERNAL:return D.INTERNAL;case ve.UNAVAILABLE:return D.UNAVAILABLE;case ve.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ve.NOT_FOUND:return D.NOT_FOUND;case ve.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ve.ABORTED:return D.ABORTED;case ve.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ve.DATA_LOSS:return D.DATA_LOSS;default:return $()}}(ne=ve||(ve={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";var E_=null;function QR(){return new TextEncoder}var JR=new Tn([4294967295,4294967295],0);function T_(n){let e=QR().encode(n),t=new qh;return t.update(e),new Uint8Array(t.digest())}function A_(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tn([t,r],0),new Tn([i,s],0)]}var Pd=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xn(`Invalid padding: ${t}`);if(r<0)throw new Xn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xn(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Tn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Tn.fromNumber(r)));return i.compare(JR)===1&&(i=new Tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=T_(e),[r,i]=A_(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=T_(e),[r,i]=A_(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Xn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var rc=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$s.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(G.min(),i,new ge(se),Ht(),ee())}},$s=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ee(),ee(),ee())}};var Wr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ic=class{constructor(e,t){this.targetId=e,this.me=t}},sc=class{constructor(e,t,r=$e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},oc=class{constructor(){this.fe=0,this.ge=S_(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ee(),t=ee(),r=ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$()}}),new $s(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=S_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Nd=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ht(),this.qe=b_(),this.Qe=new ge(se)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:$()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(wd(s))if(r===0){let o=new U(s.path);this.Ue(t,o,ut.newNoDocument(o,G.min()))}else ue(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}E_?.et(function(f,m,I,C,N){var O,R,M,q,Q,K;let we={localCacheCount:f,existenceFilterCount:m.count,databaseId:I.database,projectId:I.projectId},ie=m.unchangedNames;return ie&&(we.bloomFilter={applied:N===0,hashCount:(O=ie?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(q=(M=(R=ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||M===void 0?void 0:M.length)!==null&&q!==void 0?q:0,padding:(K=(Q=ie?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&K!==void 0?K:0,mightContain:E=>{var g;return(g=C?.mightContain(E))!==null&&g!==void 0&&g}}),we}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=bn(r).toUint8Array()}catch(l){if(l instanceof Za)return Hr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Pd(o,i,s)}catch(l){return Hr(l instanceof Xn?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&wd(c.target)){let l=new U(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ut.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ee();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new rc(e,t,this.Qe,this.ke,r);return this.ke=Ht(),this.qe=b_(),this.Qe=new ge(se),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new oc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Le(se),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function b_(){return new ge(U.comparator)}function S_(){return new ge(U.comparator)}var YR={asc:"ASCENDING",desc:"DESCENDING"},XR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZR={and:"AND",or:"OR"},kd=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Od(n,e){return n.useProto3Json||Dc(e)?e:{value:e}}function ac(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eD(n,e){return ac(n,e.toTimestamp())}function At(n){return ue(!!n),G.fromTimestamp(function(t){let r=Kt(t);return new Ne(r.seconds,r.nanos)}(n))}function Bf(n,e){return Md(n,e).canonicalString()}function Md(n,e){let t=function(i){return new de(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hI(n){let e=de.fromString(n);return ue(mI(e)),e}function xd(n,e){return Bf(n.databaseId,e.path)}function Jh(n,e){let t=hI(e);if(t.get(1)!==n.databaseId.projectId)throw new x(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(fI(t))}function dI(n,e){return Bf(n.databaseId,e)}function tD(n){let e=hI(n);return e.length===4?de.emptyPath():fI(e)}function Vd(n){return new de(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fI(n){return ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function C_(n,e,t){return{name:xd(n,e),fields:t.value.mapValue.fields}}function nD(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(ue(f===void 0||typeof f=="string"),$e.fromBase64String(f||"")):(ue(f===void 0||f instanceof Buffer||f instanceof Uint8Array),$e.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?D.UNKNOWN:uI(h.code);return new x(f,h.message||"")}(o);t=new sc(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jh(n,r.document.name),s=At(r.document.updateTime),o=r.document.createTime?At(r.document.createTime):G.min(),c=new Ye({mapValue:{fields:r.document.fields}}),l=ut.newFoundDocument(i,s,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];t=new Wr(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jh(n,r.document),s=r.readTime?At(r.readTime):G.min(),o=ut.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Wr([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jh(n,r.document),s=r.removedTargetIds||[];t=new Wr([],s,i,null)}else{if(!("filter"in e))return $();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Dd(i,s),c=r.targetId;t=new ic(c,o)}}return t}function rD(n,e){let t;if(e instanceof or)t={update:C_(n,e.key,e.value)};else if(e instanceof nc)t={delete:xd(n,e.key)};else if(e instanceof St)t={update:C_(n,e.key,e.data),updateMask:dD(e.fieldMask)};else{if(!(e instanceof bd))return $();t={verify:xd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof ti)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ir)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof sr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ni)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw $()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(n,e.precondition)),t}function iD(n,e){return n&&n.length>0?(ue(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?At(i.updateTime):At(s);return o.isEqual(G.min())&&(o=At(s)),new Ad(o,i.transformResults||[])}(t,e))):[]}function sD(n,e){return{documents:[dI(n,e.path)]}}function oD(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dI(n,i);let s=function(h){if(h.length!==0)return gI(lt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(I){return{field:qr(I.field),direction:uD(I.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Od(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:i}}function aD(n){let e=tD(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ue(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){let I=pI(m);return I instanceof lt&&G_(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(I=>function(N){return new Zr(zr(N.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(I))}(t.orderBy));let c=null;t.limit&&(c=function(m){let I;return I=typeof m=="object"?m.value:m,Dc(I)?null:I}(t.limit));let l=null;t.startAt&&(l=function(m){let I=!!m.before,C=m.values||[];return new Xr(C,I)}(t.startAt));let h=null;return t.endAt&&(h=function(m){let I=!m.before,C=m.values||[];return new Xr(C,I)}(t.endAt)),OR(e,i,o,s,c,"F",l,h)}function cD(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=zr(t.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zr(t.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=zr(t.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=zr(t.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(n):n.fieldFilter!==void 0?function(t){return Ie.create(zr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return lt.create(t.compositeFilter.filters.map(r=>pI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $()}}(t.compositeFilter.op))}(n):$()}function uD(n){return YR[n]}function lD(n){return XR[n]}function hD(n){return ZR[n]}function qr(n){return{fieldPath:n.canonicalString()}}function zr(n){return Xe.fromServerFormat(n.fieldPath)}function gI(n){return n instanceof Ie?function(t){if(t.op==="=="){if(f_(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NAN"}};if(d_(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(f_(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NAN"}};if(d_(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(t.field),op:lD(t.op),value:t.value}}}(n):n instanceof lt?function(t){let r=t.getFilters().map(i=>gI(i));return r.length===1?r[0]:{compositeFilter:{op:hD(t.op),filters:r}}}(n):$()}function dD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qs=class n{constructor(e,t,r,i,s=G.min(),o=G.min(),c=$e.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ld=class{constructor(e){this.ct=e}};function fD(n){let e=aD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Td(e,e.limit,"L"):e}var cc=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(pe(e.integerValue));else if("doubleValue"in e){let r=pe(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Us(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Kt(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(bn(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?$_(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):$()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),U.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};cc.bt=new cc;var Fd=class{constructor(){this._n=new Ud}addToCollectionParentIndex(e,t){return this._n.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(tr.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Ud=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Le(de.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(de.comparator)).toArray()}};var XO=new Uint8Array(0);var It=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(41943040,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);var zs=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var jd=class{constructor(){this.changes=new Sn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Bd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $d=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fs(r.mutation,i,it.empty(),Ne.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ee()){let i=Yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ms();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Ht(),o=Ls(),c=function(){return Ls()}();return t.forEach((l,h)=>{let f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof St)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Fs(f.mutation,h,f.mutation.getFieldMask(),Ne.now())):o.set(h.key,it.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var m;return c.set(h,new Bd(f,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Ls(),i=new ge((o,c)=>o-c),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let f=r.get(l)||it.empty();f=c.applyToLocalView(h,f),r.set(l,f);let m=(i.get(c.batchId)||ee()).add(l);i=i.insert(c.batchId,m)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,f=l.value,m=eI();f.forEach(I=>{if(!s.has(I)){let C=aI(t.get(I),r.get(I));C!==null&&m.set(I,C),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Yn()),c=-1,l=s;return o.next(h=>P.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(I=>{l=l.insert(f,I)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,ee())).next(f=>({batchId:c,changes:Z_(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=Ms();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Ms();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,l=>{let h=function(m,I){return new rr(I,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((m,I)=>{o=o.insert(m,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,ut.newInvalidDocument(f)))});let c=Ms();return o.forEach((l,h)=>{let f=s.get(l);f!==void 0&&Fs(f.mutation,h,it.empty(),Ne.now()),kc(t,h)&&(c=c.insert(l,h))}),c})}};var qd=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return P.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:At(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:fD(i.bundledQuery),readTime:At(i.readTime)}}(t)),P.resolve()}};var zd=class{constructor(){this.overlays=new ge(U.comparator),this.hr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Yn();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Yn(),s=t.length+1,o=new U(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ge((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Yn(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=Yn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=i)););return P.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rd(t,r));let s=this.hr.get(t);s===void 0&&(s=ee(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}};var Gs=class{constructor(){this.Pr=new Le(_e.Ir),this.Tr=new Le(_e.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new _e(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new _e(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new U(new de([])),r=new _e(t,e),i=new _e(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new U(new de([])),r=new _e(t,e),i=new _e(t,e+1),s=ee();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new _e(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},_e=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return U.comparator(e.key,t.key)||se(e.pr,t.pr)}static Er(e,t){return se(e.pr,t.pr)||U.comparator(e.key,t.key)}};var Gd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Le(_e.Ir)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sd(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.wr=this.wr.add(new _e(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new _e(t,0),i=new _e(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let c=this.Sr(o.pr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Le(se);return t.forEach(i=>{let s=new _e(i,0),o=new _e(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{r=r.add(c.pr)})}),P.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new _e(new U(s),0),c=new Le(se);return this.wr.forEachWhile(l=>{let h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.pr)),!0)},o),P.resolve(this.Dr(c))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ue(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return P.forEach(t.mutations,i=>{let s=new _e(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new _e(t,0),i=this.wr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Wd=class{constructor(e){this.vr=e,this.docs=function(){return new ge(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Ht();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ut.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ht(),o=t.path,c=new U(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||TR(ER(f),r)<=0||(i.has(f.key)||kc(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){$()}Fr(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Kd(this)}getSize(e){return P.resolve(this.size)}},Kd=class extends jd{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Hd=class{constructor(e){this.persistence=e,this.Mr=new Sn(t=>Uf(t),jf),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Gs,this.targetCount=0,this.Lr=zs.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),P.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new zs(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.qn(t),P.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Nr.containsKey(t))}};var Qd=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new j_(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Hd(this),this.indexManager=new Fd,this.remoteDocumentCache=function(i){return new Wd(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Ld(t),this.$r=new qd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Gd(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new Jd(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},Jd=class extends cd{constructor(e){super(),this.currentSequenceNumber=e}},Yd=class n{constructor(e){this.persistence=e,this.zr=new Gs,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw $()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),P.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,r=>{let i=U.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,G.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return P.or([()=>P.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var Xd=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ee(),i=ee();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Zd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ef=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Wy()?8:bR(be())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Zd;return this.Ji(e,t,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,t,o,c.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Os()<=Z.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",$r(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(Os()<=Z.DEBUG&&L("QueryEngine","Query:",$r(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Os()<=Z.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",$r(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tt(t))):P.resolve())}ji(e,t){if(y_(t))return P.resolve(null);let r=Tt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Td(t,null,"F"),r=Tt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ee(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let h=this.Zi(t,c);return this.Xi(t,h,o,l.readTime)?this.ji(e,Td(t,null,"F")):this.es(e,h,t,l)}))})))}Hi(e,t,r,i){return y_(t)||i.isEqual(G.min())?P.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(t,s);return this.Xi(t,o,r,i)?P.resolve(null):(Os()<=Z.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$r(t)),this.es(e,o,t,wR(i,-1)).next(c=>c))})}Zi(e,t){let r=new Le(Y_(e));return t.forEach((i,s)=>{kc(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Os()<=Z.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",$r(t)),this.zi.getDocumentsMatchingQuery(e,t,tr.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var tf=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new ge(se),this.rs=new Sn(s=>Uf(s),jf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $d(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function pD(n,e,t,r){return new tf(n,e,t,r)}function yI(n,e){return _(this,null,function*(){let t=z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],l=ee();for(let h of i){o.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(h=>({us:h,removedBatchIds:o,addedBatchIds:c}))})})})}function gD(n,e){let t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(c,l,h,f){let m=h.batch,I=m.keys(),C=P.resolve();return I.forEach(N=>{C=C.next(()=>f.getEntry(l,N)).next(O=>{let R=h.docVersions.get(N);ue(R!==null),O.version.compareTo(R)<0&&(m.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),f.addEntry(O)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ee();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vI(n){let e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function mD(n,e){let t=z(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let c=[];e.targetChanges.forEach((f,m)=>{let I=i.get(m);if(!I)return;c.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let C=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken($e.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),i=i.insert(m,C),function(O,R,M){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(I,C,f)&&c.push(t.Qr.updateTargetData(s,C))});let l=Ht(),h=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(yD(s,o,e.documentUpdates).next(f=>{l=f.cs,h=f.ls})),!r.isEqual(G.min())){let f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return P.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.ns=i,s))}function yD(n,e,t){let r=ee(),i=ee();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ht();return t.forEach((c,l)=>{let h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(G.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):L("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{cs:o,ls:i}})}function vD(n,e){let t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _D(n,e){let t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function nf(n,e,t){return _(this,null,function*(){let r=z(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ys(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function R_(n,e,t){let r=z(n),i=G.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,f){let m=z(l),I=m.rs.get(f);return I!==void 0?P.resolve(m.ns.get(I)):m.Qr.getTargetData(h,f)}(r,o,Tt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:G.min(),t?s:ee())).next(c=>(ID(r,xR(e),c),{documents:c,hs:s})))}function ID(n,e,t){let r=n.ss.get(e)||G.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}var uc=class{constructor(){this.activeTargetIds=BR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rf=class{constructor(){this.no=new uc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new uc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sf=class{io(e){}shutdown(){}};var lc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wa=null;function Yh(){return Wa===null?Wa=function(){return 268435456+Math.round(2147483648*Math.random())}():Wa++,"0x"+Wa.toString(16)}var wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var of=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ve="WebChannelConnection",af=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){let c=Yh(),l=this.vo(t,r.toUriEncodedString());L("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let h={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(h,s,o),this.Mo(t,l,h,i).then(f=>(L("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Hr("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",i),f})}xo(t,r,i,s,o,c){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ci}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){let i=wD[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let s=Yh();return new Promise((o,c)=>{let l=new zh;l.setWithCredentials(!0),l.listenOnce(Wh.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ks.NO_ERROR:let f=l.getResponseJson();L(Ve,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ks.TIMEOUT:L(Ve,`RPC '${e}' ${s} timed out`),c(new x(D.DEADLINE_EXCEEDED,"Request time out"));break;case ks.HTTP_ERROR:let m=l.getStatus();if(L(Ve,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let I=l.getResponseJson();Array.isArray(I)&&(I=I[0]);let C=I?.error;if(C&&C.status&&C.message){let N=function(R){let M=R.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(M)>=0?M:D.UNKNOWN}(C.status);c(new x(N,C.message))}else c(new x(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new x(D.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{L(Ve,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(Ve,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}Oo(e,t,r){let i=Yh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qh(),c=Hh(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.xmlHttpFactory=new Gh({})),this.Fo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=s.join("");L(Ve,`Creating RPC '${e}' stream ${i}: ${f}`,l);let m=o.createWebChannel(f,l),I=!1,C=!1,N=new of({lo:R=>{C?L(Ve,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(I||(L(Ve,`Opening RPC '${e}' stream ${i} transport.`),m.open(),I=!0),L(Ve,`RPC '${e}' stream ${i} sending:`,R),m.send(R))},ho:()=>m.close()}),O=(R,M,q)=>{R.listen(M,Q=>{try{q(Q)}catch(K){setTimeout(()=>{throw K},0)}})};return O(m,Br.EventType.OPEN,()=>{C||(L(Ve,`RPC '${e}' stream ${i} transport opened.`),N.mo())}),O(m,Br.EventType.CLOSE,()=>{C||(C=!0,L(Ve,`RPC '${e}' stream ${i} transport closed`),N.po())}),O(m,Br.EventType.ERROR,R=>{C||(C=!0,Hr(Ve,`RPC '${e}' stream ${i} transport errored:`,R),N.po(new x(D.UNAVAILABLE,"The operation could not be completed")))}),O(m,Br.EventType.MESSAGE,R=>{var M;if(!C){let q=R.data[0];ue(!!q);let Q=q,K=Q.error||((M=Q[0])===null||M===void 0?void 0:M.error);if(K){L(Ve,`RPC '${e}' stream ${i} received error:`,K);let we=K.status,ie=function(v){let w=ve[v];if(w!==void 0)return uI(w)}(we),E=K.message;ie===void 0&&(ie=D.INTERNAL,E="Unknown error status: "+we+" with message "+K.message),C=!0,N.po(new x(ie,E)),m.close()}else L(Ve,`RPC '${e}' stream ${i} received:`,q),N.yo(q)}}),O(c,Kh.STAT_EVENT,R=>{R.stat===za.PROXY?L(Ve,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===za.NOPROXY&&L(Ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.fo()},0),N}};function Xh(){return typeof document<"u"?document:null}function Oc(n){return new kd(n,!0)}var hc=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var dc=class{constructor(e,t,r,i,s,o,c,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new hc(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return _(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return _(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return _(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new x(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>_(this,null,function*(){this.state=0,this.start()}))}c_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cf=class extends dc{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=nD(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?At(o.readTime):G.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=Vd(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=wd(l)?{documents:sD(s,l)}:{query:oD(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=lI(s,o.resumeToken);let h=Od(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(G.min())>0){c.readTime=ac(s,o.snapshotVersion.toTimestamp());let h=Od(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let r=cD(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=Vd(this.serializer),t.removeTarget=e,this.i_(t)}},uf=class extends dc{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=iD(e.writeResults,e.commitTime),r=At(e.commitTime);return this.listener.A_(r,t)}return ue(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Vd(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>rD(this.serializer,r))};this.i_(t)}};var lf=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new x(D.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Md(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(D.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,Md(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(D.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},hf=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Wt(t),this.y_=!1):L("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var df=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>_(this,null,function*(){cr(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(l){return _(this,null,function*(){let h=z(l);h.M_.add(4),yield Xs(h),h.N_.set("Unknown"),h.M_.delete(4),yield Mc(h)})}(this))}))}),this.N_=new hf(r,i)}};function Mc(n){return _(this,null,function*(){if(cr(n))for(let e of n.x_)yield e(!0)})}function Xs(n){return _(this,null,function*(){for(let e of n.x_)yield e(!1)})}function _I(n,e){let t=z(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Gf(t)?zf(t):ui(t).Xo()&&qf(t,e))}function $f(n,e){let t=z(n),r=ui(t);t.F_.delete(e),r.Xo()&&II(t,e),t.F_.size===0&&(r.Xo()?r.n_():cr(t)&&t.N_.set("Unknown"))}function qf(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ui(n).P_(e)}function II(n,e){n.L_.xe(e),ui(n).I_(e)}function zf(n){n.L_=new Nd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ui(n).start(),n.N_.w_()}function Gf(n){return cr(n)&&!ui(n).Zo()&&n.F_.size>0}function cr(n){return z(n).M_.size===0}function wI(n){n.L_=void 0}function ED(n){return _(this,null,function*(){n.N_.set("Online")})}function TD(n){return _(this,null,function*(){n.F_.forEach((e,t)=>{qf(n,e)})})}function AD(n,e){return _(this,null,function*(){wI(n),Gf(n)?(n.N_.D_(e),zf(n)):n.N_.set("Unknown")})}function bD(n,e,t){return _(this,null,function*(){if(n.N_.set("Online"),e instanceof sc&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.F_.delete(c),i.L_.removeTarget(c))})}(n,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fc(n,r)}else if(e instanceof Wr?n.L_.Ke(e):e instanceof ic?n.L_.He(e):n.L_.We(e),!t.isEqual(G.min()))try{let r=yield vI(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.F_.get(h);f&&s.F_.set(h,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{let f=s.F_.get(l);if(!f)return;s.F_.set(l,f.withResumeToken($e.EMPTY_BYTE_STRING,f.snapshotVersion)),II(s,l);let m=new qs(f.target,l,h,f.sequenceNumber);qf(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield fc(n,r)}})}function fc(n,e,t){return _(this,null,function*(){if(!Ys(e))throw e;n.M_.add(1),yield Xs(n),n.N_.set("Offline"),t||(t=()=>vI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Mc(n)}))})}function EI(n,e){return e().catch(t=>fc(n,t,e))}function xc(n){return _(this,null,function*(){let e=z(n),t=Cn(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;SD(e);)try{let i=yield vD(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,CD(e,i)}catch(i){yield fc(e,i)}TI(e)&&AI(e)})}function SD(n){return cr(n)&&n.v_.length<10}function CD(n,e){n.v_.push(e);let t=Cn(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function TI(n){return cr(n)&&!Cn(n).Zo()&&n.v_.length>0}function AI(n){Cn(n).start()}function RD(n){return _(this,null,function*(){Cn(n).V_()})}function DD(n){return _(this,null,function*(){let e=Cn(n);for(let t of n.v_)e.d_(t.mutations)})}function PD(n,e,t){return _(this,null,function*(){let r=n.v_.shift(),i=Cd.from(r,e,t);yield EI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xc(n)})}function ND(n,e){return _(this,null,function*(){e&&Cn(n).E_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return HR(o)&&o!==D.ABORTED}(i.code)){let s=r.v_.shift();Cn(r).t_(),yield EI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield xc(r)}})}(n,e)),TI(n)&&AI(n)})}function D_(n,e){return _(this,null,function*(){let t=z(n);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=cr(t);t.M_.add(3),yield Xs(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Mc(t)})}function kD(n,e){return _(this,null,function*(){let t=z(n);e?(t.M_.delete(2),yield Mc(t)):e||(t.M_.add(2),yield Xs(t),t.N_.set("Unknown"))})}function ui(n){return n.B_||(n.B_=function(t,r,i){let s=z(t);return s.f_(),new cf(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:ED.bind(null,n),To:TD.bind(null,n),Ao:AD.bind(null,n),h_:bD.bind(null,n)}),n.x_.push(e=>_(this,null,function*(){e?(n.B_.t_(),Gf(n)?zf(n):n.N_.set("Unknown")):(yield n.B_.stop(),wI(n))}))),n.B_}function Cn(n){return n.k_||(n.k_=function(t,r,i){let s=z(t);return s.f_(),new uf(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:RD.bind(null,n),Ao:ND.bind(null,n),R_:DD.bind(null,n),A_:PD.bind(null,n)}),n.x_.push(e=>_(this,null,function*(){e?(n.k_.t_(),yield xc(n)):(yield n.k_.stop(),n.v_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var ff=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Wf(n,e){if(Wt("AsyncQueue",`${e}: ${n}`),Ys(n))return new x(D.UNAVAILABLE,`${e}: ${n}`);throw n}var pc=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=Ms(),this.sortedSet=new ge(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var gc=class{constructor(){this.q_=new ge(U.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):$():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},ii=class n{constructor(e,t,r,i,s,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,pc.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var pf=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},gf=class{constructor(){this.queries=new Sn(e=>J_(e),Nc),this.onlineState="Unknown",this.z_=new Set}};function bI(n,e){return _(this,null,function*(){let t=z(n),r=3,i=e.query,s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new pf,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=Wf(o,`Initialization of query '${$r(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&Kf(t)})}function SI(n,e){return _(this,null,function*(){let t=z(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function OD(n,e){let t=z(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.U_)c.H_(i)&&(r=!0);o.K_=i}}r&&Kf(t)}function MD(n,e,t){let r=z(n),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(t);r.queries.delete(e)}function Kf(n){n.z_.forEach(e=>{e.next()})}var mf,P_;(P_=mf||(mf={})).J_="default",P_.Cache="cache";var mc=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==mf.Cache}};var yc=class{constructor(e){this.key=e}},vc=class{constructor(e){this.key=e}},yf=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ee(),this.mutatedKeys=ee(),this.Ia=Y_(e),this.Ta=new pc(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new gc,i=t?t.Ta:this.Ta,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{let I=i.get(f),C=kc(this.query,m)?m:null,N=!!I&&this.mutatedKeys.has(I.key),O=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),R=!1;I&&C?I.data.isEqual(C.data)?N!==O&&(r.track({type:3,doc:C}),R=!0):this.Ra(I,C)||(r.track({type:2,doc:C}),R=!0,(l&&this.Ia(C,l)>0||h&&this.Ia(C,h)<0)&&(c=!0)):!I&&C?(r.track({type:0,doc:C}),R=!0):I&&!C&&(r.track({type:1,doc:I}),R=!0,(l||h)&&(c=!0)),R&&(C?(o=o.add(C),s=O?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((f,m)=>function(C,N){let O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return O(C)-O(N)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=i!=null&&i;let c=t&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,h=l!==this.ha;return this.ha=l,o.length!==0||h?{snapshot:new ii(this.query,e.Ta,s,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new gc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ee(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new vc(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new yc(r))}),t}pa(e){this.la=e.hs,this.Pa=ee();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return ii.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},vf=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},_f=class{constructor(e){this.key=e,this.wa=!1}},If=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Sn(c=>J_(c),Nc),this.Da=new Map,this.Ca=new Set,this.va=new ge(U.comparator),this.Fa=new Map,this.Ma=new Gs,this.xa={},this.Oa=new Map,this.Na=zs.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function xD(n,e,t=!0){return _(this,null,function*(){let r=kI(n),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield CI(r,e,t,!0),i})}function VD(n,e){return _(this,null,function*(){let t=kI(n);yield CI(t,e,!0,!1)})}function CI(n,e,t,r){return _(this,null,function*(){let i=yield _D(n.localStore,Tt(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield LD(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&_I(n.remoteStore,i),c})}function LD(n,e,t,r,i){return _(this,null,function*(){n.Ba=(m,I,C)=>function(O,R,M,q){return _(this,null,function*(){let Q=R.view.da(M);Q.Xi&&(Q=yield R_(O.localStore,R.query,!1).then(({documents:E})=>R.view.da(E,Q)));let K=q&&q.targetChanges.get(R.targetId),we=q&&q.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(Q,O.isPrimaryClient,K,we);return k_(O,R.targetId,ie.fa),ie.snapshot})}(n,m,I,C);let s=yield R_(n.localStore,e,!0),o=new yf(e,s.hs),c=o.da(s.documents),l=$s.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(c,n.isPrimaryClient,l);k_(n,t,h.fa);let f=new vf(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),h.snapshot})}function FD(n,e,t){return _(this,null,function*(){let r=z(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Nc(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$f(r.remoteStore,i.targetId),wf(r,i.targetId)}).catch(Js))):(wf(r,i.targetId),yield nf(r.localStore,i.targetId,!0))})}function UD(n,e){return _(this,null,function*(){let t=z(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$f(t.remoteStore,r.targetId))})}function jD(n,e,t){return _(this,null,function*(){let r=KD(n);try{let i=yield function(o,c){let l=z(o),h=Ne.now(),f=c.reduce((C,N)=>C.add(N.key),ee()),m,I;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=Ht(),O=ee();return l.os.getEntries(C,f).next(R=>{N=R,N.forEach((M,q)=>{q.isValidDocument()||(O=O.add(M))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,N)).next(R=>{m=R;let M=[];for(let q of c){let Q=KR(q,m.get(q.key).overlayedDocument);Q!=null&&M.push(new St(q.key,Q,q_(Q.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(C,h,M,c)}).next(R=>{I=R;let M=R.applyToLocalDocumentSet(m,O);return l.documentOverlayCache.saveOverlays(C,R.batchId,M)})}).then(()=>({batchId:I.batchId,changes:Z_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let h=o.xa[o.currentUser.toKey()];h||(h=new ge(se)),h=h.insert(c,l),o.xa[o.currentUser.toKey()]=h}(r,i.batchId,t),yield Zs(r,i.changes),yield xc(r.remoteStore)}catch(i){let s=Wf(i,"Failed to persist write");t.reject(s)}})}function RI(n,e){return _(this,null,function*(){let t=z(n);try{let r=yield mD(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Fa.get(s);o&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ue(o.wa):i.removedDocuments.size>0&&(ue(o.wa),o.wa=!1))}),yield Zs(t,r,e)}catch(r){yield Js(r)}})}function N_(n,e,t){let r=z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let l=z(o);l.onlineState=c;let h=!1;l.queries.forEach((f,m)=>{for(let I of m.U_)I.j_(c)&&(h=!0)}),h&&Kf(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BD(n,e,t){return _(this,null,function*(){let r=z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new ge(U.comparator);o=o.insert(s,ut.newNoDocument(s,G.min()));let c=ee().add(s),l=new rc(G.min(),new Map,new ge(se),o,c);yield RI(r,l),r.va=r.va.remove(s),r.Fa.delete(e),Hf(r)}else yield nf(r.localStore,e,!1).then(()=>wf(r,e,t)).catch(Js)})}function $D(n,e){return _(this,null,function*(){let t=z(n),r=e.batch.batchId;try{let i=yield gD(t.localStore,e);PI(t,r,null),DI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zs(t,i)}catch(i){yield Js(i)}})}function qD(n,e,t){return _(this,null,function*(){let r=z(n);try{let i=yield function(o,c){let l=z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next(m=>(ue(m!==null),f=m.keys(),l.mutationQueue.removeMutationBatch(h,m))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(r.localStore,e);PI(r,e,t),DI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zs(r,i)}catch(i){yield Js(i)}})}function DI(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function PI(n,e,t){let r=z(n),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function wf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||NI(n,r)})}function NI(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&($f(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),Hf(n))}function k_(n,e,t){for(let r of t)r instanceof yc?(n.Ma.addReference(r.key,e),zD(n,r)):r instanceof vc?(L("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||NI(n,r.key)):$()}function zD(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(L("SyncEngine","New document in limbo: "+t),n.Ca.add(r),Hf(n))}function Hf(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new U(de.fromString(e)),r=n.Na.next();n.Fa.set(r,new _f(t)),n.va=n.va.insert(t,r),_I(n.remoteStore,new qs(Tt(Pc(t.path)),r,"TargetPurposeLimboResolution",j_.oe))}}function Zs(n,e,t){return _(this,null,function*(){let r=z(n),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((c,l)=>{o.push(r.Ba(l,e,t).then(h=>{if((h||t)&&r.isPrimaryClient){let f=h&&!h.fromCache;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(h){i.push(h);let f=Xd.Ki(l.targetId,h);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(l,h){return _(this,null,function*(){let f=z(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>P.forEach(h,I=>P.forEach(I.qi,C=>f.persistence.referenceDelegate.addReference(m,I.targetId,C)).next(()=>P.forEach(I.Qi,C=>f.persistence.referenceDelegate.removeReference(m,I.targetId,C)))))}catch(m){if(!Ys(m))throw m;L("LocalStore","Failed to update sequence numbers: "+m)}for(let m of h){let I=m.targetId;if(!m.fromCache){let C=f.ns.get(I),N=C.snapshotVersion,O=C.withLastLimboFreeSnapshotVersion(N);f.ns=f.ns.insert(I,O)}}})}(r.localStore,s))})}function GD(n,e){return _(this,null,function*(){let t=z(n);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield yI(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new x(D.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zs(t,r.us)}})}function WD(n,e){let t=z(n),r=t.Fa.get(e);if(r&&r.wa)return ee().add(r.key);{let i=ee(),s=t.Da.get(e);if(!s)return i;for(let o of s){let c=t.ba.get(o);i=i.unionWith(c.view.Ea)}return i}}function kI(n){let e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BD.bind(null,e),e.Sa.h_=OD.bind(null,e.eventManager),e.Sa.ka=MD.bind(null,e.eventManager),e}function KD(n){let e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qD.bind(null,e),e}var _c=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Oc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return pD(this.persistence,new ef,e.initialUser,this.serializer)}createPersistence(e){return new Qd(Yd.Hr,this.serializer)}createSharedClientState(e){return new rf}terminate(){return _(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ef=class{initialize(e,t){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>N_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GD.bind(null,this.syncEngine),yield kD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new gf}()}createDatastore(e){let t=Oc(e.databaseInfo.databaseId),r=function(s){return new af(s)}(e.databaseInfo);return function(s,o,c,l){return new lf(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,c){return new df(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>N_(this.syncEngine,t,0),function(){return lc.D()?new lc:new sf}())}createSyncEngine(e,t){return function(i,s,o,c,l,h,f){let m=new If(i,s,o,c,l,h);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return _(this,null,function*(){var e;yield function(r){return _(this,null,function*(){let i=z(r);L("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Xs(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Ic=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Tf=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=De.UNAUTHENTICATED,this.clientId=Ja.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>_(this,null,function*(){L("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Wf(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Zh(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield yI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function O_(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield QD(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>D_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>D_(e.remoteStore,i)),n._onlineComponents=e})}function HD(n){return n.name==="FirebaseError"?n.code===D.FAILED_PRECONDITION||n.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function QD(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!HD(t))throw t;Hr("Error using user provided cache. Falling back to memory cache: "+t),yield Zh(n,new _c)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Zh(n,new _c);return n._offlineComponents})}function OI(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield O_(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield O_(n,new Ef))),n._onlineComponents})}function JD(n){return OI(n).then(e=>e.syncEngine)}function Af(n){return _(this,null,function*(){let e=yield OI(n),t=e.eventManager;return t.onListen=xD.bind(null,e.syncEngine),t.onUnlisten=FD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UD.bind(null,e.syncEngine),t})}function YD(n,e,t={}){let r=new wt;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,c,l,h){let f=new Ic({next:I=>{o.enqueueAndForget(()=>SI(s,m));let C=I.docs.has(c);!C&&I.fromCache?h.reject(new x(D.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&I.fromCache&&l&&l.source==="server"?h.reject(new x(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(I)},error:I=>h.reject(I)}),m=new mc(Pc(c.path),f,{includeMetadataChanges:!0,ra:!0});return bI(s,m)}(yield Af(n),n.asyncQueue,e,t,r)})),r.promise}function MI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var M_=new Map;function xI(n,e,t){if(!t)throw new x(D.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XD(n,e,t,r){if(e===!0&&r===!0)throw new x(D.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function x_(n){if(!U.isDocumentKey(n))throw new x(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V_(n){if(U.isDocumentKey(n))throw new x(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$()}function ct(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Vc(n);throw new x(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var wc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},si=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new x(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ed;switch(r.type){case"firstParty":return new id(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=M_.get(t);r&&(L("ComponentProvider","Removing Datastore"),M_.delete(t),r.terminate())}(this),Promise.resolve()}};function VI(n,e,t,r={}){var i;let s=(n=ct(n,si))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=De.MOCK_USER;else{c=By(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new x(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new De(h)}n._authCredentials=new td(new Qa(c,l))}}var oi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Fe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new An(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},An=class n extends oi{constructor(e,t,r){super(e,t,Pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function LI(n,e,...t){if(n=ye(n),xI("collection","path",e),n instanceof si){let r=de.fromString(e,...t);return V_(r),new An(n,null,r)}{if(!(n instanceof Fe||n instanceof An))throw new x(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(de.fromString(e,...t));return V_(r),new An(n.firestore,null,r)}}function Qf(n,e,...t){if(n=ye(n),arguments.length===1&&(e=Ja.newId()),xI("doc","path",e),n instanceof si){let r=de.fromString(e,...t);return x_(r),new Fe(n,null,new U(r))}{if(!(n instanceof Fe||n instanceof An))throw new x(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(de.fromString(e,...t));return x_(r),new Fe(n.firestore,n instanceof An?n.converter:null,new U(r))}}var bf=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new hc(this,"async_queue_retry"),this.hu=()=>{let t=Xh();t&&L("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Xh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Xh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new wt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return _(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ys(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Wt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=ff.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&$()}verifyOperationInProgress(){}du(){return _(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function L_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Qt=class extends si{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new bf}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UI(this),this._firestoreClient.terminate()}};function FI(n,e){let t=typeof n=="object"?n:xr(),r=typeof n=="string"?n:e||"(default)",i=Is(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=jy("firestore");s&&VI(i,...s)}return i}function Jf(n){return n._firestoreClient||UI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UI(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,h,f){return new ud(c,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,MI(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Tf(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ws=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n($e.fromBase64String(e))}catch(t){throw new x(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n($e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ai=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ks=class{constructor(e){this._methodName=e}};var Hs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var ZD=/^__.*__$/,Sf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new St(e,this.data,this.fieldMask,t,this.fieldTransforms):new or(e,this.data,t,this.fieldTransforms)}},Ec=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new St(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function jI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var Cf=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ac(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(jI(this.fu)&&ZD.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Rf=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Oc(e)}Fu(e,t,r,i=!1){return new Cf({fu:e,methodName:t,vu:r,path:Xe.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Lc(n){let e=n._freezeSettings(),t=Oc(n._databaseId);return new Rf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BI(n,e,t,r,i,s={}){let o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);Yf("Data must be an object, but it was:",o,r);let c=$I(r,o),l,h;if(s.merge)l=new it(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let m of s.mergeFields){let I=Df(e,m,t);if(!o.contains(I))throw new x(D.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);zI(f,I)||f.push(I)}l=new it(f),h=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,h=o.fieldTransforms;return new Sf(new Ye(c),l,h)}var Tc=class n extends Ks{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function eP(n,e,t,r){let i=n.Fu(1,e,t);Yf("Data must be an object, but it was:",i,r);let s=[],o=Ye.empty();ar(r,(l,h)=>{let f=Xf(e,l,t);h=ye(h);let m=i.Su(f);if(h instanceof Tc)s.push(f);else{let I=eo(h,m);I!=null&&(s.push(f),o.set(f,I))}});let c=new it(s);return new Ec(o,c,i.fieldTransforms)}function tP(n,e,t,r,i,s){let o=n.Fu(1,e,t),c=[Df(e,r,t)],l=[i];if(s.length%2!=0)throw new x(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)c.push(Df(e,s[I])),l.push(s[I+1]);let h=[],f=Ye.empty();for(let I=c.length-1;I>=0;--I)if(!zI(h,c[I])){let C=c[I],N=l[I];N=ye(N);let O=o.Su(C);if(N instanceof Tc)h.push(C);else{let R=eo(N,O);R!=null&&(h.push(C),f.set(C,R))}}let m=new it(h);return new Ec(f,m,o.fieldTransforms)}function nP(n,e,t,r=!1){return eo(t,n.Fu(r?4:3,e))}function eo(n,e){if(qI(n=ye(n)))return Yf("Unsupported field value:",e,n),$I(n,e);if(n instanceof Ks)return function(r,i){if(!jI(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let l=eo(c,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $R(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ne.fromDate(r);return{timestampValue:ac(i.serializer,s)}}if(r instanceof Ne){let s=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(i.serializer,s)}}if(r instanceof Hs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ws)return{bytesValue:lI(i.serializer,r._byteString)};if(r instanceof Fe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bf(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Vc(r)}`)}(n,e)}function $I(n,e){let t={};return B_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ar(n,(r,i)=>{let s=eo(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function qI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ne||n instanceof Hs||n instanceof Ws||n instanceof Fe||n instanceof Ks)}function Yf(n,e,t){if(!qI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Vc(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function Df(n,e,t){if((e=ye(e))instanceof ai)return e._internalPath;if(typeof e=="string")return Xf(n,e);throw Ac("Field path arguments must be of type string or ",n,!1,void 0,t)}var rP=new RegExp("[~\\*/\\[\\]]");function Xf(n,e,t){if(e.search(rP)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ai(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ac(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new x(D.INVALID_ARGUMENT,c+n+l)}function zI(n,e){return n.some(t=>t.isEqual(e))}var bc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Pf=class extends bc{data(){return super.data()}};function Zf(n,e){return typeof e=="string"?Xf(n,e):e instanceof ai?e._internalPath:e._delegate._internalPath}function iP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qs=class{},Nf=class extends Qs{};function GI(n,e,...t){let r=[];e instanceof Qs&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof kf).length,c=s.filter(l=>l instanceof Sc).length;if(o>1||o>0&&c>0)throw new x(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Sc=class n extends Nf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return KI(e._query,t),new oi(e.firestore,e.converter,Ed(e._query,t))}_parse(e){let t=Lc(e.firestore);return function(s,o,c,l,h,f,m){let I;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new x(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){U_(m,f);let C=[];for(let N of m)C.push(F_(l,s,N));I={arrayValue:{values:C}}}else I=F_(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||U_(m,f),I=nP(c,o,m,f==="in"||f==="not-in");return Ie.create(h,f,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function WI(n,e,t){let r=e,i=Zf("where",n);return Sc._create(i,r,t)}var kf=class n extends Qs{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:lt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let l of c)KI(o,l),o=Ed(o,l)}(e._query,t),new oi(e.firestore,e.converter,Ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function F_(n,e,t){if(typeof(t=ye(t))=="string"){if(t==="")throw new x(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q_(e)&&t.indexOf("/")!==-1)throw new x(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(de.fromString(t));if(!U.isDocumentKey(r))throw new x(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return h_(n,new U(r))}if(t instanceof Fe)return h_(n,t._key);throw new x(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(t)}.`)}function U_(n,e){if(!Array.isArray(n)||n.length===0)throw new x(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KI(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new x(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Of=class{convertValue(e,t="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ar(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Hs(pe(e.latitude),pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Lf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(js(e));default:return null}}convertTimestamp(e){let t=Kt(e);return new Ne(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=de.fromString(e);ue(mI(r));let i=new ec(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(t)||Wt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function HI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Zn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cc=class extends bc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Kr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Kr=class extends Cc{data(e={}){return super.data(e)}},Mf=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kr(this._firestore,this._userDataWriter,r.key,r,new Zn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new Kr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Kr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:sP(c.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function sP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}function QI(n){n=ct(n,Fe);let e=ct(n.firestore,Qt);return YD(Jf(e),n._key).then(t=>ZI(e,n,t))}var Rc=class extends Of{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,t)}};function JI(n,e,t){n=ct(n,Fe);let r=ct(n.firestore,Qt),i=HI(n.converter,e,t);return tp(r,[BI(Lc(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gt.none())])}function YI(n,e,t,...r){n=ct(n,Fe);let i=ct(n.firestore,Qt),s=Lc(i),o;return o=typeof(e=ye(e))=="string"||e instanceof ai?tP(s,"updateDoc",n._key,e,t,r):eP(s,"updateDoc",n._key,e),tp(i,[o.toMutation(n._key,Gt.exists(!0))])}function XI(n,e){let t=ct(n.firestore,Qt),r=Qf(n),i=HI(n.converter,e);return tp(t,[BI(Lc(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function ep(n,...e){var t,r,i;n=ye(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||L_(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(L_(e[o])){let m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let l,h,f;if(n instanceof Fe)h=ct(n.firestore,Qt),f=Pc(n._key.path),l={next:m=>{e[o]&&e[o](ZI(h,n,m))},error:e[o+1],complete:e[o+2]};else{let m=ct(n,oi);h=ct(m.firestore,Qt),f=m._query;let I=new Rc(h);l={next:C=>{e[o]&&e[o](new Mf(h,I,m,C))},error:e[o+1],complete:e[o+2]},iP(n._query)}return function(I,C,N,O){let R=new Ic(O),M=new mc(C,R,N);return I.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return bI(yield Af(I),M)})),()=>{R.$a(),I.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return SI(yield Af(I),M)}))}}(Jf(h),f,c,l)}function tp(n,e){return function(r,i){let s=new wt;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return jD(yield JD(r),i,s)})),s.promise}(Jf(n),e)}function ZI(n,e,t){let r=t.docs.get(e._key),i=new Rc(n);return new Cc(n,i,e._key,r,new Zn(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ci=i})(vn),yn(new rt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Qt(new nd(r.getProvider("auth-internal")),new od(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new x(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Se(c_,"4.6.3",e),Se(c_,"4.6.3","esm2017")})();var Fc=function(){return Fc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Fc.apply(this,arguments)};var cP={includeMetadataChanges:!1};function ew(n,e){return e===void 0&&(e=cP),new Pt(function(t){var r=ep(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function tw(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Fc(Fc({},r),(t={},t[e.idField]=n.id,t))}function nw(n){return ew(n,{includeMetadataChanges:!0}).pipe(te(function(e){return e.docs}))}function rw(n,e){return e===void 0&&(e={}),nw(n).pipe(te(function(t){return t.map(function(r){return tw(r,e)})}))}var to=class{constructor(e){return e}},iw="firestore",np=class{constructor(){return ws(iw)}};var rp=new J("angularfire2.firestore-instances");function uP(n,e){let t=Ia(iw,n,e);return t&&new to(t)}function lP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new to(r)}}var hP={provide:np,deps:[[new Be,rp]]},dP={provide:to,useFactory:uP,deps:[[new Be,rp],jt]};function Cx(n,...e){return Se("angularfire",Gn.full,"fst"),ot([dP,hP,{provide:rp,useFactory:lP(n),multi:!0,deps:[me,ft,Fr,Wn,[new Be,Ns],[new Be,Lr],...e]}])}var Rx=Re(rw,!0);var Dx=Re(XI,!0);var Px=Re(LI,!0);var Nx=Re(Qf,!0);var kx=Re(QI,!0);var Ox=Re(FI,!0);var Mx=Re(GI,!0);var xx=Re(JI,!0);var Vx=Re(YI,!0);var Lx=Re(WI,!0);export{Ln as a,Hw as b,bP as c,rm as d,WP as e,kE as f,dn as g,cT as h,Lt as i,pN as j,gN as k,mN as l,dy as m,ty as n,xN as o,VN as p,rb as q,ob as r,FN as s,cb as t,lb as u,db as v,My as w,UN as x,jN as y,BN as z,$N as A,qN as B,jy as C,By as D,Je as E,ye as F,rt as G,yn as H,Is as I,vn as J,xr as K,Se as L,Gn as M,Ia as N,ws as O,Lr as P,Fr as Q,Re as R,jt as S,Wn as T,Nk as U,kk as V,Ps as W,Ns as X,NO as Y,kO as Z,OO as _,MO as $,xO as aa,to as ba,Cx as ca,Rx as da,Dx as ea,Px as fa,Nx as ga,kx as ha,Ox as ia,Mx as ja,xx as ka,Vx as la,Lx as ma};
